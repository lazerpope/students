<div class="ts-message acc-message-list-focusable has-replies no-padding-vertical" ng-class="{
  'has-replies': msgCtrl.thread.hasReplies,
  'reply-is-visible': msgCtrl.thread.replyFormVisible &amp;&amp; msgCtrl.thread.shouldShowReplyButton &amp;&amp; !msgCtrl.thread.hasMessageFailures,
  'conversation-bubble': msgCtrl.thread.firstMessage.mergeMessageBubble,
  'conversation-bubble-previous': msgCtrl.thread.firstMessage.mergeMessageBubblesPreviousInChain,
  'no-padding-vertical': msgCtrl.thread.firstMessage.isDeleted || msgCtrl.thread.firstMessage.isCallMessage }" ng-focus="msgCtrl.onFocus()" ng-blur="msgCtrl.removeAriaLabel()" ng-keydown="msgCtrl.onKeydown($event)" aria-label="" data-tid="messageThreadBodyContainer"
    tabindex="-1">

    <!---->
    <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::!msgCtrl.thread.parentViewModel.isChat" role="heading" aria-level="4">, от пользователя Калинин Максим Игоревич. Ответов: 240, новых: 219.</div>
    <!---->

    <!---->
    <!-- first message -->
    <div scroll-item-tracker="" scroll-item-id="msgCtrl.thread.firstMessage.objectId" scroll-item-event-name="messageListScroll" is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)"
        scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="true" deferred-render-ready="msgCtrl.thread.deferredRenderReady" class="conversation-common conversation-start conversation-not-collapsed" ng-class="{
      'conversation-start conversation-not-collapsed': !msgCtrl.showThreadHeader,
      'conversation-reply conversation-not-collapsed': msgCtrl.showThreadHeader,
      'no-reply-style' : !msgCtrl.thread.hasReplies &amp;&amp; !msgCtrl.thread.shouldShowReplyButton }">
        <!---->
        <thread-body ng-if="!msgCtrl.thread.firstMessage.isDeleted" message-view-model="msgCtrl.thread.firstMessage" message-type="conversation" show-border="true" show-subject="msgCtrl.showSubject" show-post-toolbar="msgCtrl.showPostToolbar" edit-root-message-subject="msgCtrl.editRootMessageSubject === 'true' &amp;&amp; msgCtrl.showSubject"
            edit-root-message-post="msgCtrl.editRootMessagePost === 'true' &amp;&amp; msgCtrl.showPostToolbar" see-more-enabled="true" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90" defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady"
            defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody0" is-calling-screen="msgCtrl.isCallingScreen" read-receipt-seen-string="msgCtrl.readReceiptSeenString">
            <!--Calling message template-->
            <div id="m1671026222575" data-tid="threadBodyMedia" class="media thread-body is-call-message acc-thread-focusable" ng-hide="::(ctrl.isCallRecordingMessage &amp;&amp; !ctrl.isRecordingFlagEnabled) || (ctrl.isCallTranscriptMessage &amp;&amp; !ctrl.messageViewModel.isTranscriptEnabled)"
                ng-class="{ 'thread-body-call-end': (ctrl.isCallEndedMessage || ctrl.isCallRecordingStoppedAndSavingMessage), 'thread-body-call-recording': ctrl.isRecordingFlagEnabled &amp;&amp; (ctrl.messageViewModel.recordings.length > 0 || ctrl.isCallRecordingMessage)}"
                tabindex="-1" simple-focus="ctrl.onFocus($event)" simple-blur="ctrl.onBlur($event)">

                <!--Chat head-->
                <div class="media-left">
                    <div class="wrapper">
                        <!---->
                        <!---->
                        <!---->
                        <div ng-if="!(ctrl.isCallRecordingStoppedAndSavingMessage || ctrl.isCallRecordingStartedMessage)"><svg role="presentation" viewBox="-6 -6 32 32" class="app-svg icons-call-meetup-line"><g class="icons-default-fill"><path class="icons-unfilled" d="M4.5 4C3.11929 4 2 5.11929 2 6.5V13.5C2 14.8807 3.11929 16 4.5 16H11.5C12.8807 16 14 14.8807 14 13.5V12.5L16.4 14.3C17.0592 14.7944 18 14.324 18 13.5V6.49998C18 5.67594 17.0592 5.20556 16.4 5.69998L14 7.49998V6.5C14 5.11929 12.8807 4 11.5 4H4.5ZM14 8.74998L17 6.49998V13.5L14 11.25V8.74998ZM13 6.5V13.5C13 14.3284 12.3284 15 11.5 15H4.5C3.67157 15 3 14.3284 3 13.5V6.5C3 5.67157 3.67157 5 4.5 5H11.5C12.3284 5 13 5.67157 13 6.5Z"></path><path class="icons-filled" d="M13 6.5C13 5.11929 11.8807 4 10.5 4H4.5C3.11929 4 2 5.11929 2 6.5V13.5C2 14.8807 3.11929 16 4.5 16H10.5C11.8807 16 13 14.8807 13 13.5V6.5ZM14 7.93082V12.0815L16.7642 14.4319C17.2512 14.8461 18 14.4999 18 13.8606V6.19315C18 5.55685 17.2575 5.20962 16.7692 5.61756L14 7.93082Z"></path></g></svg></div>
                        <!---->
                    </div>
                </div>

                <div class="ts-message-thread-body" data-tid="messageThreadBody">
                    <div class="message-body message-body-width">
                        <!---->
                        <calling-thread-body ng-if="!ctrl.isCallRecordingMessage &amp;&amp; !ctrl.isCallTranscriptMessage" message-vm="::ctrl.messageViewModel" defered-pre-render-ready="ctrl.deferedPreRenderReady" conversation-id="19:x48VY3ngTSvbeDyfkVZlEz4fHRXcZCQcCJFeukTUbNA1@thread.tacv2"
                            render-state="ctrl.renderState" host-tenant-id="ctrl.hostTenantId" is-shared-channel="ctrl.isSharedChannel">
                            <div class="ts-calling-thread-body">
                                <div class="content">
                                    <div class="top padded-content">
                                        <div class="left larger" ng-class="{
   'call-ended': ctrl.messageVm.isCallEndedMessage
   }" ng-bind-html="ctrl.callTitleHtml" ng-attr-data-tid="{{ctrl.messageVm.isCallEndedMessage &amp;&amp; 'call-ended-' + ctrl.messageVm.callId || 'in-progress-' + ctrl.messageVm.callId}}" data-tid="in-progress-0af7ada6-8b5d-410b-80c8-4bc4ed8ea908">Собрание PYTHON 8 началось.</div>
                                        <!---->
                                        <!---->
                                    </div>
                                    <!---->
                                </div>
                                <!---->
                            </div>
                        </calling-thread-body>
                        <!---->
                        <!---->
                        <!---->
                    </div>
                </div>
            </div>
        </thread-body>
        <!---->
        <!---->
        <!---->

    </div>

    <!-- collapsed messages -->
    <!---->
    <div class="conversation-common conversation-collapsed" ng-if="msgCtrl.thread.cachedCountOfCollapsedMessages > 0 || msgCtrl.thread.expandedReplies.length > 1">
        <thread-collapsed defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" scroll-container="::msgCtrl.scrollContainer" ng-class="{'no-reply-style' : msgCtrl.thread.expandedReplies.length === 0 &amp;&amp; !msgCtrl.showReplyButton &amp;&amp; !msgCtrl.thread.shouldShowReplyButton}"
            thread="msgCtrl.thread">
            <div ng-class="{'unread': tcCtrl.thread.collapsedShouldBeBolded,
            'mention': tcCtrl.thread.collapsedMarkerForMentionExists,
            'important': tcCtrl.thread.collapsedContainsImportantReplies}" class="">
                <div class="media message-body acc-thread-focusable expand-collapse chevron-expanded" ng-class="{'chevron-expanded': tcCtrl.thread.shouldShowCollapseAll,
              'loading-replies': tcCtrl.enablePartialLoadAPI &amp;&amp; tcCtrl.thread.isLoadingReplies,
              'loading-replies-error-common': tcCtrl.thread.shouldShowLoadingRepliesError}" ng-click="tcCtrl.toggleCollapsedState()" data-tid="threadViewToggle" track-click-silent="true" tabindex="-1" title="Свернуть все">
                    <a class="ts-collapsed-string app-small-font ts-collapsed-common" data-tid="messageBodyCollapsedString">
                        <div class="screen-reader-text" role="heading" aria-level="5">
                            Все ответы развернуты. Нажмите СТРЕЛКУ ВНИЗ для перехода к сообщениям. Чтобы свернуть ответы, нажмите клавишу ВВОД.
                        </div>
                        <svg viewBox="0 0 7 7" role="presentation" class="app-svg icons-chevron" focusable="false"><g class="icons-default-fill icons-chevron-expanded"><polygon points="3.5,6 7,2 0,2"></polygon></g><g class="icons-default-fill icons-chevron-collapsed"><polygon points="6,3.5 2,0 2,7"></polygon></g></svg>
                        <div aria-hidden="true">
                            <!---->
                            Свернуть все
                        </div>
                    </a>
                </div>
                <!---->
                <div class="collapsed-indicators" ng-class="{'load-replies-indicators': tcCtrl.thread.shouldShowLoadRepliesButton}">
                    <div class="icons">
                        <!---->
                        <!---->
                        <!---->
                    </div>
                    <!---->
                    <action-marker ng-if="tcCtrl.deferedRenderReady" thread-vm="tcCtrl.thread" expand-thread="tcCtrl.loadReplies(markerType)">
                        <!---->
                    </action-marker>
                    <!---->
                </div>
            </div>
        </thread-collapsed>
    </div>
    <!---->

    <!-- expanded messages -->
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody1">
            <!--Regular message template-->
            <div id="m1671026267901" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">Plhfcnt, ответ от пользователя Бобров Степан Алексеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-332" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178/profilepicturev2?displayname=Бобров Степан Алексеевич&amp;size=HR64x64"
                                alt="Аватар пользователя Бобров Степан Алексеевич." upn="Bobro_us85@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178/profilepicturev2?displayname=Бобров Степан Алексеевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Бобров Степан Алексеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 16:57:47">
         16:57
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>Plhfcnt</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671026267901', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody2">
            <!--Regular message template-->
            <div id="m1671026271427" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions merge-bubble keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">Здрасте, ответ от пользователя Бобров Степан Алексеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Бобров Степан Алексеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime ng-hide" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 16:57:51">
         16:57
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>Здрасте</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671026271427', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody3">
            <!--Regular message template-->
            <div id="m1671026278243" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">здравствуйте , ответ от пользователя Шестелева Евгения Евгеньевна.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:df95f487-a504-4955-b8e8-21e6501ff8ff" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-333" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:df95f487-a504-4955-b8e8-21e6501ff8ff/profilepicturev2?displayname=Шестелева Евгения Евгеньевна&amp;size=HR64x64"
                                alt="Аватар пользователя Шестелева Евгения Евгеньевна." upn="Shest_vz91@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:df95f487-a504-4955-b8e8-21e6501ff8ff/profilepicturev2?displayname=Шестелева Евгения Евгеньевна&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Нет на месте" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym away" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:df95f487-a504-4955-b8e8-21e6501ff8ff"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Шестелева Евгения Евгеньевна
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 16:57:58">
         16:57
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>здравствуйте </p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671026278243', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody4">
            <!--Regular message template-->
            <div id="m1671026301054" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">здравствуйте, ответ от пользователя Семенова Екатерина Александровна.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:5e9e57bb-6f0c-438b-bf3a-3417be184470" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-334" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:5e9e57bb-6f0c-438b-bf3a-3417be184470/profilepicturev2?displayname=Семенова Екатерина Александровна&amp;size=HR64x64"
                                alt="Аватар пользователя Семенова Екатерина Александровна." upn="Semen_jx73@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:5e9e57bb-6f0c-438b-bf3a-3417be184470/profilepicturev2?displayname=Семенова Екатерина Александровна&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:5e9e57bb-6f0c-438b-bf3a-3417be184470"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Семенова Екатерина Александровна
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 16:58:21">
         16:58
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>здравствуйте</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671026301054', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody5">
            <!--Regular message template-->
            <div id="m1671026375907" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">Здравствуйте, ответ от пользователя Бровкин Михаил Сергеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:474bd458-f97e-4fb2-b697-3a616a81d012" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-335" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:474bd458-f97e-4fb2-b697-3a616a81d012/profilepicturev2?displayname=Бровкин Михаил Сергеевич&amp;size=HR64x64"
                                alt="Аватар пользователя Бровкин Михаил Сергеевич." upn="Brovk_gi63@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:474bd458-f97e-4fb2-b697-3a616a81d012/profilepicturev2?displayname=Бровкин Михаил Сергеевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:474bd458-f97e-4fb2-b697-3a616a81d012"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Бровкин Михаил Сергеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 16:59:35">
         16:59
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p><span style="font-size:14px;font-style:inherit;font-weight:inherit">Здравствуйте</span></p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671026375907', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody6">
            <!--Regular message template-->
            <div id="m1671026377786" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">Здравствуйте, ответ от пользователя Сафронов Артём Игоревич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:96cb4cbd-2b1a-4ffe-b527-cf60e29332dd" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-336" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:96cb4cbd-2b1a-4ffe-b527-cf60e29332dd/profilepicturev2?displayname=Сафронов Артём Игоревич&amp;size=HR64x64"
                                alt="Аватар пользователя Сафронов Артём Игоревич." upn="Safro_wj68@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:96cb4cbd-2b1a-4ffe-b527-cf60e29332dd/profilepicturev2?displayname=Сафронов Артём Игоревич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="В сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym online" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:96cb4cbd-2b1a-4ffe-b527-cf60e29332dd"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Сафронов Артём Игоревич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 16:59:37">
         16:59
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>Здравствуйте</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeLess" track-panel-type="4" track-data="{messageID: '1671026377786', leftRailDirective: 'school-app-left-rail'}"
                                    track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody7">
            <!--Regular message template-->
            <div id="m1671026382460" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">здравствуйте, ответ от пользователя Сысина Карина Алексеевна.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:414d4345-0dc5-4525-b25a-c1bc7ee73f79" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-337" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:414d4345-0dc5-4525-b25a-c1bc7ee73f79/profilepicturev2?displayname=Сысина Карина Алексеевна&amp;size=HR64x64"
                                alt="Аватар пользователя Сысина Карина Алексеевна." upn="Sysin_bq71@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:414d4345-0dc5-4525-b25a-c1bc7ee73f79/profilepicturev2?displayname=Сысина Карина Алексеевна&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:414d4345-0dc5-4525-b25a-c1bc7ee73f79"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Сысина Карина Алексеевна
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 16:59:42">
         16:59
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>здравствуйте</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671026382460', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody8">
            <!--Regular message template-->
            <div id="m1671026388312" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">ты гость, ответ от пользователя Бобров Степан Алексеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-338" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178/profilepicturev2?displayname=Бобров Степан Алексеевич&amp;size=HR64x64"
                                alt="Аватар пользователя Бобров Степан Алексеевич." upn="Bobro_us85@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178/profilepicturev2?displayname=Бобров Степан Алексеевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Бобров Степан Алексеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 16:59:48">
         16:59
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>ты гость</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671026388312', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody9">
            <!--Regular message template-->
            <div id="m1671026412907" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">Дратуте, ответ от пользователя Петроченков Алексей Андреевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:4f1e392a-d25a-49ab-bbf5-4ced6b27efe8" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-339" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:4f1e392a-d25a-49ab-bbf5-4ced6b27efe8/profilepicturev2?displayname=Петроченков Алексей Андреевич&amp;size=HR64x64"
                                alt="Аватар пользователя Петроченков Алексей Андреевич." upn="Petro_wi51@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:4f1e392a-d25a-49ab-bbf5-4ced6b27efe8/profilepicturev2?displayname=Петроченков Алексей Андреевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:4f1e392a-d25a-49ab-bbf5-4ced6b27efe8"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Петроченков Алексей Андреевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 17:00:12">
         17:00
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>Дратуте</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671026412907', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody10">
            <!--Regular message template-->
            <div id="m1671026448365" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like has-reactions" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">ох уж этот жаренный чай, ответ от пользователя Бобров Степан Алексеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-340" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178/profilepicturev2?displayname=Бобров Степан Алексеевич&amp;size=HR64x64"
                                alt="Аватар пользователя Бобров Степан Алексеевич." upn="Bobro_us85@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178/profilepicturev2?displayname=Бобров Степан Алексеевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message has-reactions" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Бобров Степан Алексеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 17:00:48">
         17:00
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>ох уж этот жаренный чай</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671026448365', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->
                        <div class="message-expanded-reactions" ng-if="ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction &amp;&amp; ctrl.expandedReactionsConfigService.shouldSendExpandedReactions">
                            <!---->
                            <div ng-if="!ctrl.isInteropChat
        &amp;&amp; !ctrl.isHiddenByDlp
        &amp;&amp; (ctrl.messageViewModel.isDeferredLoad
        &amp;&amp; !ctrl.messageIsClientLie)" aria-label="Реакции на сообщения." class="message-reactions-view reduce-left-margin" ng-class="{'reduce-left-margin' : ctrl.messageViewModel.isReply &amp;&amp; ctrl.messageType !== 'conversation'}">
                                <message-reactions message-view-model="ctrl.messageViewModel" aria-label="Реакции на сообщения." should-hide-reaction-popover="ctrl.shouldHideReactionPopover" ma-deferred-load="" class="message-reactions-container">
                                    <ul data-tid="messageReactions" class="message-reactions">
                                        <!---->
                                        <!---->
                                        <li class="reaction-container person-card-list-hover app-font-caption-regular" person-card-list="" enable-people-list-v2="true" participant-list="reactionsCtrl.messageViewModel.reactionsUsers[reaction]" host-tenant-id="reactionsCtrl.hostTenantId"
                                            conversation-id="reactionsCtrl.isSharedChannel ? reactionsCtrl.conversationId : null" is-shared-channel="reactionsCtrl.isSharedChannel" is-person-img-displayed="true" is-expanded-reaction="reactionsCtrl.shouldSendExpandedReactions"
                                            reaction="reaction" reaction-name="::reactionsCtrl.getReactionName(reaction)" reaction-img-src="::reactionsCtrl.reactionsImageUrlMap[reaction]" no-sort="true" is-list-sorted="true" delay-in-ms="::reactionsCtrl.constants.personCard.delayInReaction"
                                            show-more-reaction-users="reactionsCtrl.showMoreUers(reaction)" show-as-context-menu="reactionsCtrl.shouldSendExpandedReactions" start-show-reactions="reactionsCtrl.startShowReactions(reaction)" end-show-reactions="reactionsCtrl.endShowReactions(reaction)"
                                            aria-haspopup="!reactionsCtrl.shouldSendExpandedReactions" tabindex="-1" ng-repeat="(reaction, count) in reactionsCtrl.messageViewModel.reactionsSummary" ng-if="((!reactionsCtrl.messageViewModel.isRightRail || $first) &amp;&amp; count)"
                                            role="button" ng-click="reactionsCtrl.onMessageReaction($event, reaction)" ng-keydown="reactionsCtrl.onReactionKeydown($event, reaction)" oncontextmenu="reactionsCtrl.onContextMenu($event)" ng-class="{ 'message-actions-reacted app-font-caption-bold': reactionsCtrl.messageViewModel.currentUserHasReactedWith === reaction,
             'app-font-caption-regular': reactionsCtrl.messageViewModel.currentUserHasReactedWith !== reaction}" aria-pressed="" aria-label="3 Нравится реакций. Нажмите ВВОД или ПРОБЕЛ, чтобы добавить Нравится реакций. Содержит контекстное меню .">
                                            <div dir="auto" class="reaction-image-container" aria-hidden="true">
                                                <img class="reaction-size reaction personal-expression-emoticon fluent-reaction-emoticon" ng-class="::reactionsCtrl.reactionClass" ng-src="https://statics.teams.cdn.office.net/evergreen-assets/personal-expressions/v2/assets/emoticons/yes/default/30_f.png?v=v70"
                                                    data-tid="messageReactionImage-like" title="" src="https://statics.teams.cdn.office.net/evergreen-assets/personal-expressions/v2/assets/emoticons/yes/default/30_f.png?v=v70">
                                                <span class="reaction-count reaction-count-size" data-tid="messageReactionCount-like">
       3
 </span>
                                            </div>
                                        </li>
                                        <!---->
                                        <!---->
                                    </ul>
                                    <!---->
                                    <!---->
                                </message-reactions>
                            </div>
                            <!---->
                        </div>
                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody11">
            <!--Regular message template-->
            <div id="m1671026527581" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions merge-bubble keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">я начал учить го, ответ от пользователя Бобров Степан Алексеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Бобров Степан Алексеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime ng-hide" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 17:02:07">
         17:02
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>я начал учить го</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671026527581', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody12">
            <!--Regular message template-->
            <div id="m1671026528632" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions merge-bubble keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">и это чтото среднее между паскалем и питоном, ответ от пользователя Бобров Степан Алексеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Бобров Степан Алексеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime ng-hide" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 17:02:08">
         17:02
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>и это чтото среднее между паскалем и питоном</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671026528632', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody13">
            <!--Regular message template-->
            <div id="m1671026541347" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">Это учитель лежит?, ответ от пользователя Саничев Артур Вячеславович.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:1c78ec7f-a250-4dd7-933d-db57f0e82473" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-341" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:1c78ec7f-a250-4dd7-933d-db57f0e82473/profilepicturev2?displayname=Саничев Артур Вячеславович&amp;size=HR64x64"
                                alt="Аватар пользователя Саничев Артур Вячеславович." upn="Sanic_fx75@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:1c78ec7f-a250-4dd7-933d-db57f0e82473/profilepicturev2?displayname=Саничев Артур Вячеславович&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:1c78ec7f-a250-4dd7-933d-db57f0e82473"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Саничев Артур Вячеславович
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 17:02:21">
         17:02
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>Это учитель лежит?</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671026541347', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody14">
            <!--Regular message template-->
            <div id="m1671026589467" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions merge-bubble keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">Он нас научит спать), ответ от пользователя Саничев Артур Вячеславович.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Саничев Артур Вячеславович
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime ng-hide" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 17:03:09">
         17:03
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>Он нас научит спать)</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671026589467', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody15">
            <!--Regular message template-->
            <div id="m1671026597256" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">наелся и спит, ответ от пользователя Петроченков Алексей Андреевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:4f1e392a-d25a-49ab-bbf5-4ced6b27efe8" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-342" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:4f1e392a-d25a-49ab-bbf5-4ced6b27efe8/profilepicturev2?displayname=Петроченков Алексей Андреевич&amp;size=HR64x64"
                                alt="Аватар пользователя Петроченков Алексей Андреевич." upn="Petro_wi51@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:4f1e392a-d25a-49ab-bbf5-4ced6b27efe8/profilepicturev2?displayname=Петроченков Алексей Андреевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:4f1e392a-d25a-49ab-bbf5-4ced6b27efe8"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Петроченков Алексей Андреевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 17:03:17">
         17:03
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>наелся и спит</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671026597256', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody16">
            <!--Regular message template-->
            <div id="m1671026624227" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">хахаха, ответ от пользователя Бобров Степан Алексеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-343" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178/profilepicturev2?displayname=Бобров Степан Алексеевич&amp;size=HR64x64"
                                alt="Аватар пользователя Бобров Степан Алексеевич." upn="Bobro_us85@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178/profilepicturev2?displayname=Бобров Степан Алексеевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Бобров Степан Алексеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 17:03:44">
         17:03
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>хахаха</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671026624227', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody17">
            <!--Regular message template-->
            <div id="m1671026644837" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">Лучший урок, ответ от пользователя Саничев Артур Вячеславович.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:1c78ec7f-a250-4dd7-933d-db57f0e82473" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-316" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:1c78ec7f-a250-4dd7-933d-db57f0e82473/profilepicturev2?displayname=Саничев Артур Вячеславович&amp;size=HR64x64"
                                alt="Аватар пользователя Саничев Артур Вячеславович." upn="Sanic_fx75@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:1c78ec7f-a250-4dd7-933d-db57f0e82473/profilepicturev2?displayname=Саничев Артур Вячеславович&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:1c78ec7f-a250-4dd7-933d-db57f0e82473"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Саничев Артур Вячеславович
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 17:04:04">
         17:04
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>Лучший урок</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671026644837', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody18">
            <!--Regular message template-->
            <div id="m1671026660970" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">Здравствуйте, ответ от пользователя Гнездилов Алексей Дмитриевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:cbf301cb-934e-4a99-b0dc-224095c65013" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-317" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:cbf301cb-934e-4a99-b0dc-224095c65013/profilepicturev2?displayname=Гнездилов Алексей Дмитриевич&amp;size=HR64x64"
                                alt="Аватар пользователя Гнездилов Алексей Дмитриевич." upn="Gnezd_mg41@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:cbf301cb-934e-4a99-b0dc-224095c65013/profilepicturev2?displayname=Гнездилов Алексей Дмитриевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:cbf301cb-934e-4a99-b0dc-224095c65013"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Гнездилов Алексей Дмитриевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 17:04:20">
         17:04
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>Здравствуйте</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671026660970', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody19">
            <!--Regular message template-->
            <div id="m1671026682362" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">здравствуйте , ответ от пользователя Тюргашкин Максим Михайлович.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:dc1f0536-bff6-4126-95db-a318aacc229f" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-318" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:dc1f0536-bff6-4126-95db-a318aacc229f/profilepicturev2?displayname=Тюргашкин Максим Михайлович&amp;size=HR64x64"
                                alt="Аватар пользователя Тюргашкин Максим Михайлович." upn="Tyurg_pe69@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:dc1f0536-bff6-4126-95db-a318aacc229f/profilepicturev2?displayname=Тюргашкин Максим Михайлович&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:dc1f0536-bff6-4126-95db-a318aacc229f"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Тюргашкин Максим Михайлович
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 17:04:42">
         17:04
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>здравствуйте </p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671026682362', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody20">
            <!--Regular message template-->
            <div id="m1671026682936" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">я не смогу писать код, ответ от пользователя Бобров Степан Алексеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-319" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178/profilepicturev2?displayname=Бобров Степан Алексеевич&amp;size=HR64x64"
                                alt="Аватар пользователя Бобров Степан Алексеевич." upn="Bobro_us85@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178/profilepicturev2?displayname=Бобров Степан Алексеевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Бобров Степан Алексеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 17:04:42">
         17:04
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>я не смогу писать код</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671026682936', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody21">
            <!--Regular message template-->
            <div id="m1671026686246" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions merge-bubble keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">у меня лапки, ответ от пользователя Бобров Степан Алексеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Бобров Степан Алексеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime ng-hide" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 17:04:46">
         17:04
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>у меня лапки</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671026686246', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody22">
            <!--Regular message template-->
            <div id="m1671026689917" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">Нужно -loaf gang, ответ от пользователя Гнездилов Алексей Дмитриевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:cbf301cb-934e-4a99-b0dc-224095c65013" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-320" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:cbf301cb-934e-4a99-b0dc-224095c65013/profilepicturev2?displayname=Гнездилов Алексей Дмитриевич&amp;size=HR64x64"
                                alt="Аватар пользователя Гнездилов Алексей Дмитриевич." upn="Gnezd_mg41@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:cbf301cb-934e-4a99-b0dc-224095c65013/profilepicturev2?displayname=Гнездилов Алексей Дмитриевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:cbf301cb-934e-4a99-b0dc-224095c65013"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Гнездилов Алексей Дмитриевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 17:04:49">
         17:04
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>Нужно</p>
                                            <p>-loaf gang</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671026689917', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody23">
            <!--Regular message template-->
            <div id="m1671026709172" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">У меня лапки затекли, ответ от пользователя Саничев Артур Вячеславович.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:1c78ec7f-a250-4dd7-933d-db57f0e82473" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-321" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:1c78ec7f-a250-4dd7-933d-db57f0e82473/profilepicturev2?displayname=Саничев Артур Вячеславович&amp;size=HR64x64"
                                alt="Аватар пользователя Саничев Артур Вячеславович." upn="Sanic_fx75@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:1c78ec7f-a250-4dd7-933d-db57f0e82473/profilepicturev2?displayname=Саничев Артур Вячеславович&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:1c78ec7f-a250-4dd7-933d-db57f0e82473"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Саничев Артур Вячеславович
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 17:05:09">
         17:05
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>У меня лапки затекли</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671026709172', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody24">
            <!--Regular message template-->
            <div id="m1671026714482" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions merge-bubble keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">Я спать, ответ от пользователя Саничев Артур Вячеславович.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Саничев Артур Вячеславович
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime ng-hide" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 17:05:14">
         17:05
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>Я спать</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671026714482', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody25">
            <!--Regular message template-->
            <div id="m1671026734061" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">я не успеваю записывать, ответ от пользователя Потапов Максим Владиславович.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:a13c31ad-8f13-4d53-8b3f-24855a709370" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-322" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:a13c31ad-8f13-4d53-8b3f-24855a709370/profilepicturev2?displayname=Потапов Максим Владиславович&amp;size=HR64x64"
                                alt="Аватар пользователя Потапов Максим Владиславович." upn="Potap_qu77@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:a13c31ad-8f13-4d53-8b3f-24855a709370/profilepicturev2?displayname=Потапов Максим Владиславович&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:a13c31ad-8f13-4d53-8b3f-24855a709370"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Потапов Максим Владиславович
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 17:05:34">
         17:05
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>я не успеваю записывать</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671026734061', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody26">
            <!--Regular message template-->
            <div id="m1671026747866" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">спасибо, ответ от пользователя Бобров Степан Алексеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-323" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178/profilepicturev2?displayname=Бобров Степан Алексеевич&amp;size=HR64x64"
                                alt="Аватар пользователя Бобров Степан Алексеевич." upn="Bobro_us85@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178/profilepicturev2?displayname=Бобров Степан Алексеевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Бобров Степан Алексеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 17:05:47">
         17:05
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>спасибо</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671026747866', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody27">
            <!--Calling message template-->
            <div id="m1671026762053" data-tid="threadBodyMedia" class="media thread-body is-call-message acc-thread-focusable" ng-hide="::(ctrl.isCallRecordingMessage &amp;&amp; !ctrl.isRecordingFlagEnabled) || (ctrl.isCallTranscriptMessage &amp;&amp; !ctrl.messageViewModel.isTranscriptEnabled)"
                ng-class="{ 'thread-body-call-end': (ctrl.isCallEndedMessage || ctrl.isCallRecordingStoppedAndSavingMessage), 'thread-body-call-recording': ctrl.isRecordingFlagEnabled &amp;&amp; (ctrl.messageViewModel.recordings.length > 0 || ctrl.isCallRecordingMessage)}"
                tabindex="-1" simple-focus="ctrl.onFocus($event)" simple-blur="ctrl.onBlur($event)">

                <!--Chat head-->
                <div class="media-left">
                    <div class="wrapper">
                        <!---->
                        <div ng-if="ctrl.isCallRecordingStartedMessage"><svg viewBox="-6 -6 32 32" role="presentation" focusable="false" class="app-svg icons-call-recording-start"><g class="icons-default-fill"><path class="icons-default-fill" d="M10 14.5C12.4853 14.5 14.5 12.4853 14.5 10C14.5 7.51472 12.4853 5.5 10 5.5C7.51472 5.5 5.5 7.51472 5.5 10C5.5 12.4853 7.51472 14.5 10 14.5ZM10 2C5.58172 2 2 5.58172 2 10C2 14.4183 5.58172 18 10 18C14.4183 18 18 14.4183 18 10C18 5.58172 14.4183 2 10 2ZM3 10C3 6.13401 6.13401 3 10 3C13.866 3 17 6.13401 17 10C17 13.866 13.866 17 10 17C6.13401 17 3 13.866 3 10Z"></path></g></svg></div>
                        <!---->
                        <!---->
                        <!---->
                    </div>
                </div>

                <div class="ts-message-thread-body" data-tid="messageThreadBody">
                    <div class="message-body message-body-width">
                        <!---->
                        <calling-thread-body ng-if="!ctrl.isCallRecordingMessage &amp;&amp; !ctrl.isCallTranscriptMessage" message-vm="::ctrl.messageViewModel" defered-pre-render-ready="ctrl.deferedPreRenderReady" conversation-id="19:x48VY3ngTSvbeDyfkVZlEz4fHRXcZCQcCJFeukTUbNA1@thread.tacv2"
                            render-state="ctrl.renderState" host-tenant-id="ctrl.hostTenantId" is-shared-channel="ctrl.isSharedChannel">
                            <div class="ts-calling-thread-body">
                                <div class="content">
                                    <div class="top padded-content">
                                        <div class="left larger" ng-class="{
   'call-ended': ctrl.messageVm.isCallEndedMessage
   }" ng-bind-html="ctrl.callTitleHtml" ng-attr-data-tid="{{ctrl.messageVm.isCallEndedMessage &amp;&amp; 'call-ended-' + ctrl.messageVm.callId || 'in-progress-' + ctrl.messageVm.callId}}" data-tid="in-progress-0af7ada6-8b5d-410b-80c8-4bc4ed8ea908">Запись начата</div>
                                        <!---->
                                        <!---->
                                    </div>
                                    <!---->
                                </div>
                                <!---->
                            </div>
                        </calling-thread-body>
                        <!---->
                        <!---->
                        <!---->
                    </div>
                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody28">
            <!--Regular message template-->
            <div id="m1671026762357" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">Можно автограф?, ответ от пользователя Гнездилов Алексей Дмитриевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:cbf301cb-934e-4a99-b0dc-224095c65013" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-324" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:cbf301cb-934e-4a99-b0dc-224095c65013/profilepicturev2?displayname=Гнездилов Алексей Дмитриевич&amp;size=HR64x64"
                                alt="Аватар пользователя Гнездилов Алексей Дмитриевич." upn="Gnezd_mg41@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:cbf301cb-934e-4a99-b0dc-224095c65013/profilepicturev2?displayname=Гнездилов Алексей Дмитриевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:cbf301cb-934e-4a99-b0dc-224095c65013"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Гнездилов Алексей Дмитриевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 17:06:02">
         17:06
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>Можно автограф?</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671026762357', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody29">
            <!--Regular message template-->
            <div id="m1671026767069" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">Здравствуйте, ответ от пользователя Кириллова Ульяна Станиславовна.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:2a34fd62-d738-454f-937d-b07f443f3147" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-325" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:2a34fd62-d738-454f-937d-b07f443f3147/profilepicturev2?displayname=Кириллова Ульяна Станиславовна&amp;size=HR64x64"
                                alt="Аватар пользователя Кириллова Ульяна Станиславовна." upn="Kiril_jc33@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:2a34fd62-d738-454f-937d-b07f443f3147/profilepicturev2?displayname=Кириллова Ульяна Станиславовна&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:2a34fd62-d738-454f-937d-b07f443f3147"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Кириллова Ульяна Станиславовна
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 17:06:07">
         17:06
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>Здравствуйте</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671026767069', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody30">
            <!--Regular message template-->
            <div id="m1671026783814" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions edited-message show-top-row keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">здравствуйте, ответ от пользователя Сандульский Семён.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:3e008d96-8266-4c84-9869-a4efc34dee35" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-326" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:3e008d96-8266-4c84-9869-a4efc34dee35/profilepicturev2?displayname=Сандульский Семён&amp;size=HR64x64"
                                alt="Аватар пользователя Сандульский Семён." upn="Sandu_gs22@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:3e008d96-8266-4c84-9869-a4efc34dee35/profilepicturev2?displayname=Сандульский Семён&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:3e008d96-8266-4c84-9869-a4efc34dee35"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Сандульский Семён
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 17:06:23">
         17:06
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="Изменено 14 дек., 17:06:30" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="Изменено 14 дек., 17:06:30" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>здравствуйте</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671026783814', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody31">
            <!--Regular message template-->
            <div id="m1671026784909" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like has-reactions" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">ох уж этот жаренный чай x2, ответ от пользователя Бобров Степан Алексеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-327" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178/profilepicturev2?displayname=Бобров Степан Алексеевич&amp;size=HR64x64"
                                alt="Аватар пользователя Бобров Степан Алексеевич." upn="Bobro_us85@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178/profilepicturev2?displayname=Бобров Степан Алексеевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message has-reactions" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Бобров Степан Алексеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 17:06:24">
         17:06
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>ох уж этот жаренный чай x2</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671026784909', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->
                        <div class="message-expanded-reactions" ng-if="ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction &amp;&amp; ctrl.expandedReactionsConfigService.shouldSendExpandedReactions">
                            <!---->
                            <div ng-if="!ctrl.isInteropChat
        &amp;&amp; !ctrl.isHiddenByDlp
        &amp;&amp; (ctrl.messageViewModel.isDeferredLoad
        &amp;&amp; !ctrl.messageIsClientLie)" aria-label="Реакции на сообщения." class="message-reactions-view reduce-left-margin" ng-class="{'reduce-left-margin' : ctrl.messageViewModel.isReply &amp;&amp; ctrl.messageType !== 'conversation'}">
                                <message-reactions message-view-model="ctrl.messageViewModel" aria-label="Реакции на сообщения." should-hide-reaction-popover="ctrl.shouldHideReactionPopover" ma-deferred-load="" class="message-reactions-container">
                                    <ul data-tid="messageReactions" class="message-reactions">
                                        <!---->
                                        <!---->
                                        <li class="reaction-container person-card-list-hover app-font-caption-regular" person-card-list="" enable-people-list-v2="true" participant-list="reactionsCtrl.messageViewModel.reactionsUsers[reaction]" host-tenant-id="reactionsCtrl.hostTenantId"
                                            conversation-id="reactionsCtrl.isSharedChannel ? reactionsCtrl.conversationId : null" is-shared-channel="reactionsCtrl.isSharedChannel" is-person-img-displayed="true" is-expanded-reaction="reactionsCtrl.shouldSendExpandedReactions"
                                            reaction="reaction" reaction-name="::reactionsCtrl.getReactionName(reaction)" reaction-img-src="::reactionsCtrl.reactionsImageUrlMap[reaction]" no-sort="true" is-list-sorted="true" delay-in-ms="::reactionsCtrl.constants.personCard.delayInReaction"
                                            show-more-reaction-users="reactionsCtrl.showMoreUers(reaction)" show-as-context-menu="reactionsCtrl.shouldSendExpandedReactions" start-show-reactions="reactionsCtrl.startShowReactions(reaction)" end-show-reactions="reactionsCtrl.endShowReactions(reaction)"
                                            aria-haspopup="!reactionsCtrl.shouldSendExpandedReactions" tabindex="-1" ng-repeat="(reaction, count) in reactionsCtrl.messageViewModel.reactionsSummary" ng-if="((!reactionsCtrl.messageViewModel.isRightRail || $first) &amp;&amp; count)"
                                            role="button" ng-click="reactionsCtrl.onMessageReaction($event, reaction)" ng-keydown="reactionsCtrl.onReactionKeydown($event, reaction)" oncontextmenu="reactionsCtrl.onContextMenu($event)" ng-class="{ 'message-actions-reacted app-font-caption-bold': reactionsCtrl.messageViewModel.currentUserHasReactedWith === reaction,
             'app-font-caption-regular': reactionsCtrl.messageViewModel.currentUserHasReactedWith !== reaction}" aria-pressed="" aria-label="One Нравится реакция. Нажмите ВВОД или ПРОБЕЛ, чтобы добавить Нравится реакцию. Содержит контекстное меню .">
                                            <div dir="auto" class="reaction-image-container" aria-hidden="true">
                                                <img class="reaction-size reaction personal-expression-emoticon fluent-reaction-emoticon" ng-class="::reactionsCtrl.reactionClass" ng-src="https://statics.teams.cdn.office.net/evergreen-assets/personal-expressions/v2/assets/emoticons/yes/default/30_f.png?v=v70"
                                                    data-tid="messageReactionImage-like" title="" src="https://statics.teams.cdn.office.net/evergreen-assets/personal-expressions/v2/assets/emoticons/yes/default/30_f.png?v=v70">
                                                <span class="reaction-count reaction-count-size" data-tid="messageReactionCount-like">
       1
 </span>
                                            </div>
                                        </li>
                                        <!---->
                                        <!---->
                                    </ul>
                                    <!---->
                                    <!---->
                                </message-reactions>
                            </div>
                            <!---->
                        </div>
                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody32">
            <!--Regular message template-->
            <div id="m1671026800327" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">здравствуйте, ответ от пользователя Скукина Елизавета Александровна.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:e221314d-88fe-488c-a2b1-0fd00a09668a" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-328" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:e221314d-88fe-488c-a2b1-0fd00a09668a/profilepicturev2?displayname=Скукина Елизавета Александровна&amp;size=HR64x64"
                                alt="Аватар пользователя Скукина Елизавета Александровна." upn="Skuki_xp91@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:e221314d-88fe-488c-a2b1-0fd00a09668a/profilepicturev2?displayname=Скукина Елизавета Александровна&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:e221314d-88fe-488c-a2b1-0fd00a09668a"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Скукина Елизавета Александровна
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 17:06:40">
         17:06
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>здравствуйте</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671026800327', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody33">
            <!--Regular message template-->
            <div id="m1671026873681" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">здраствуйте, ответ от пользователя Портас Константин Сергеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:21bf49d8-b9fb-4c73-8a04-97cf59e07012" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-329" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:21bf49d8-b9fb-4c73-8a04-97cf59e07012/profilepicturev2?displayname=Портас Константин Сергеевич&amp;size=HR64x64"
                                alt="Аватар пользователя Портас Константин Сергеевич." upn="Porta_yx78@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:21bf49d8-b9fb-4c73-8a04-97cf59e07012/profilepicturev2?displayname=Портас Константин Сергеевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:21bf49d8-b9fb-4c73-8a04-97cf59e07012"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Портас Константин Сергеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 17:07:53">
         17:07
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>здраствуйте</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671026873681', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody34">
            <!--Regular message template-->
            <div id="m1671026912985" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">здравствуйте, ответ от пользователя Муравьев Дмитрий Дмитриевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:10638eaa-5a95-4b5a-b6b7-a8f353fd614e" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-330" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:10638eaa-5a95-4b5a-b6b7-a8f353fd614e/profilepicturev2?displayname=Муравьев Дмитрий Дмитриевич&amp;size=HR64x64"
                                alt="Аватар пользователя Муравьев Дмитрий Дмитриевич." upn="Murav_yk73@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:10638eaa-5a95-4b5a-b6b7-a8f353fd614e/profilepicturev2?displayname=Муравьев Дмитрий Дмитриевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Нет на месте" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym away" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:10638eaa-5a95-4b5a-b6b7-a8f353fd614e"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Муравьев Дмитрий Дмитриевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 17:08:32">
         17:08
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>здравствуйте</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671026912985', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody35">
            <!--Regular message template-->
            <div id="m1671027010012" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">доверяй , но проверяй, ответ от пользователя Бобров Степан Алексеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-331" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178/profilepicturev2?displayname=Бобров Степан Алексеевич&amp;size=HR64x64"
                                alt="Аватар пользователя Бобров Степан Алексеевич." upn="Bobro_us85@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178/profilepicturev2?displayname=Бобров Степан Алексеевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Бобров Степан Алексеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 17:10:10">
         17:10
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>доверяй , но проверяй</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671027010012', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->

        <!---->
        <tombstone message-view-model="messageViewModel" ng-if="messageViewModel.isDeleted">
            <div id="m1671027124852" data-tid="tombstone-m1671027124852" class="media acc-thread-focusable tombstone-media" tabindex="-1" aria-label="Сообщение удалено." ng-class="{ 'message-action-error' : tmbCtrl.messageViewModel.hasMessageActionFailed,
              'self' : tmbCtrl.messageViewModel.isFromMe }">
                <div class="media-left">
                    <div class="wrapper">
                        <div class="media-object">
                            <svg viewBox="-6 -6 32 32" role="presentation" focusable="false" class="app-svg icons-delete"><g class="icons-default-fill"><path class="icons-filled" d="M10 1.25C11.4346 1.25 12.6126 2.34848 12.7388 3.75019L17 3.75C17.4142 3.75 17.75 4.08579 17.75 4.5C17.75 4.8797 17.4678 5.19349 17.1018 5.24315L17 5.25H16.417L15.1499 16.2292C15.0335 17.2384 14.179 18 13.1631 18H6.83688C5.821 18 4.9665 17.2384 4.85006 16.2292L3.582 5.25H3C2.6203 5.25 2.30651 4.96785 2.25685 4.60177L2.25 4.5C2.25 4.1203 2.53215 3.80651 2.89823 3.75685L3 3.75L7.26119 3.75019C7.38741 2.34848 8.56542 1.25 10 1.25ZM8.5 7.5C8.25454 7.5 8.05039 7.65477 8.00806 7.85886L8 7.9375V14.0625L8.00806 14.1411C8.05039 14.3452 8.25454 14.5 8.5 14.5C8.74546 14.5 8.94961 14.3452 8.99194 14.1411L9 14.0625V7.9375L8.99194 7.85886C8.94961 7.65477 8.74546 7.5 8.5 7.5ZM11.5 7.5C11.2545 7.5 11.0504 7.65477 11.0081 7.85886L11 7.9375V14.0625L11.0081 14.1411C11.0504 14.3452 11.2545 14.5 11.5 14.5C11.7455 14.5 11.9496 14.3452 11.9919 14.1411L12 14.0625V7.9375L11.9919 7.85886C11.9496 7.65477 11.7455 7.5 11.5 7.5ZM10 2.75C9.39524 2.75 8.89079 3.17947 8.77499 3.75005H11.225C11.1092 3.17947 10.6048 2.75 10 2.75Z"></path><path class="icons-unfilled" d="M11.5 4C11.5 3.17157 10.8284 2.5 10 2.5C9.17157 2.5 8.5 3.17157 8.5 4H7.5C7.5 2.61929 8.61929 1.5 10 1.5C11.3807 1.5 12.5 2.61929 12.5 4H17C17.2761 4 17.5 4.22386 17.5 4.5C17.5 4.77614 17.2761 5 17 5H16.446L15.1499 16.2292C15.0335 17.2384 14.179 18 13.1631 18H6.83688C5.821 18 4.9665 17.2384 4.85006 16.2292L3.553 5H3C2.75454 5 2.55039 4.82312 2.50806 4.58988L2.5 4.5C2.5 4.22386 2.72386 4 3 4H11.5ZM15.438 5H4.561L5.84347 16.1146C5.90169 16.6192 6.32894 17 6.83688 17H13.1631C13.6711 17 14.0983 16.6192 14.1565 16.1146L15.438 5ZM8.5 7.5C8.74546 7.5 8.94961 7.65477 8.99194 7.85886L9 7.9375V14.0625C9 14.3041 8.77614 14.5 8.5 14.5C8.25454 14.5 8.05039 14.3452 8.00806 14.1411L8 14.0625V7.9375C8 7.69588 8.22386 7.5 8.5 7.5ZM11.5 7.5C11.7455 7.5 11.9496 7.65477 11.9919 7.85886L12 7.9375V14.0625C12 14.3041 11.7761 14.5 11.5 14.5C11.2545 14.5 11.0504 14.3452 11.0081 14.1411L11 14.0625V7.9375C11 7.69588 11.2239 7.5 11.5 7.5Z"></path></g></svg>
                        </div>
                    </div>
                </div>
                <div class="tombstone-body message-body message-body-width">
                    <div class="tombstone-content">
                        <!---->

                        <div class="deleted-message" id="deleted-message-1671027124852" role="heading" aria-level="5" data-tid="deletedMessage">
                            <!---->
                            <!---->
                            <div ng-if="!tmbCtrl.showDataSpillageMessage()">
                                <span>
           Сообщение удалено.
           <!---->
         </span>
                            </div>
                            <!---->
                        </div>
                    </div>
                    <!---->
                </div>
            </div>
        </tombstone>
        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody37">
            <!--Regular message template-->
            <div id="m1671027156222" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">Я знал про это, но решил циклом сделать, ответ от пользователя Бровкин Михаил Сергеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:474bd458-f97e-4fb2-b697-3a616a81d012" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-306" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:474bd458-f97e-4fb2-b697-3a616a81d012/profilepicturev2?displayname=Бровкин Михаил Сергеевич&amp;size=HR64x64"
                                alt="Аватар пользователя Бровкин Михаил Сергеевич." upn="Brovk_gi63@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:474bd458-f97e-4fb2-b697-3a616a81d012/profilepicturev2?displayname=Бровкин Михаил Сергеевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:474bd458-f97e-4fb2-b697-3a616a81d012"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Бровкин Михаил Сергеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 17:12:36">
         17:12
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>Я знал про это, но решил циклом сделать</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671027156222', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody38">
            <!--Regular message template-->
            <div id="m1671027203713" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">я пробывал через reverse(), ответ от пользователя Портас Константин Сергеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:21bf49d8-b9fb-4c73-8a04-97cf59e07012" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-307" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:21bf49d8-b9fb-4c73-8a04-97cf59e07012/profilepicturev2?displayname=Портас Константин Сергеевич&amp;size=HR64x64"
                                alt="Аватар пользователя Портас Константин Сергеевич." upn="Porta_yx78@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:21bf49d8-b9fb-4c73-8a04-97cf59e07012/profilepicturev2?displayname=Портас Константин Сергеевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:21bf49d8-b9fb-4c73-8a04-97cf59e07012"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Портас Константин Сергеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 17:13:23">
         17:13
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>я пробывал через reverse()</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671027203713', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody39">
            <!--Regular message template-->
            <div id="m1671027214647" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions merge-bubble keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">но все равно не получилось, ответ от пользователя Портас Константин Сергеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Портас Константин Сергеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime ng-hide" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 17:13:34">
         17:13
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>но все равно не получилось</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671027214647', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody40">
            <!--Regular message template-->
            <div id="m1671027282777" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">replace, ответ от пользователя Бобров Степан Алексеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-308" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178/profilepicturev2?displayname=Бобров Степан Алексеевич&amp;size=HR64x64"
                                alt="Аватар пользователя Бобров Степан Алексеевич." upn="Bobro_us85@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178/profilepicturev2?displayname=Бобров Степан Алексеевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Бобров Степан Алексеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 17:14:42">
         17:14
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>replace</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671027282777', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody41">
            <!--Regular message template-->
            <div id="m1671027303405" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions merge-bubble keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">огда перебором, ответ от пользователя Бобров Степан Алексеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Бобров Степан Алексеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime ng-hide" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 17:15:03">
         17:15
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>огда перебором</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671027303405', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody42">
            <!--Regular message template-->
            <div id="m1671027310821" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">Пробелы еле как убрал чтобы нормально работало), ответ от пользователя Бровкин Михаил Сергеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:474bd458-f97e-4fb2-b697-3a616a81d012" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-309" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:474bd458-f97e-4fb2-b697-3a616a81d012/profilepicturev2?displayname=Бровкин Михаил Сергеевич&amp;size=HR64x64"
                                alt="Аватар пользователя Бровкин Михаил Сергеевич." upn="Brovk_gi63@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:474bd458-f97e-4fb2-b697-3a616a81d012/profilepicturev2?displayname=Бровкин Михаил Сергеевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:474bd458-f97e-4fb2-b697-3a616a81d012"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Бровкин Михаил Сергеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 17:15:10">
         17:15
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>Пробелы еле как убрал чтобы нормально работало)</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671027310821', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody43">
            <!--Regular message template-->
            <div id="m1671027314342" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">if a[i] == " ":, ответ от пользователя Бобров Степан Алексеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-310" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178/profilepicturev2?displayname=Бобров Степан Алексеевич&amp;size=HR64x64"
                                alt="Аватар пользователя Бобров Степан Алексеевич." upn="Bobro_us85@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178/profilepicturev2?displayname=Бобров Степан Алексеевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Бобров Степан Алексеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 17:15:14">
         17:15
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>if a[i] == " ":</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671027314342', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody44">
            <!--Regular message template-->
            <div id="m1671027446446" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions merge-bubble keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">фор с шагом -!, ответ от пользователя Бобров Степан Алексеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Бобров Степан Алексеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime ng-hide" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 17:17:26">
         17:17
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>фор с шагом -!</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671027446446', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody45">
            <!--Regular message template-->
            <div id="m1671027449104" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions merge-bubble keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">-1, ответ от пользователя Бобров Степан Алексеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Бобров Степан Алексеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime ng-hide" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 17:17:29">
         17:17
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>-1</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671027449104', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody46">
            <!--Regular message template-->
            <div id="m1671027522705" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions merge-bubble keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">черещ лен, ответ от пользователя Бобров Степан Алексеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Бобров Степан Алексеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime ng-hide" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 17:18:42">
         17:18
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>черещ лен</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671027522705', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody47">
            <!--Regular message template-->
            <div id="m1671027657330" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions edited-message show-top-row merge-bubble keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">a = input() point = 0 for i in range(len(s)): &nbsp; &nbsp; a1 = len(a)-1 &nbsp; &nbsp; a = 1 &nbsp; &nbsp;if s[1] == s[a1] &nbsp; &nbsp; &nbsp; …, ответ от пользователя Бобров Степан Алексеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Бобров Степан Алексеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime ng-hide" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 17:20:57">
         17:20
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="Изменено 14 дек., 17:30:07" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="Изменено 14 дек., 17:30:07" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content ts-see-more-btn-showing" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>a = input()</p>
                                            <p>point = 0</p>
                                            <p>for i in range(len(s)):</p>
                                            <p>&nbsp; &nbsp; a1 = len(a)-1</p>
                                            <p>&nbsp; &nbsp; a = 1</p>
                                            <p>&nbsp; &nbsp;if s[1] == s[a1]</p>
                                            <p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;print("YES")</p>
                                            <p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;point+=1</p>
                                            <p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if point == len(a):</p>
                                            <p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break</p>
                                            <p>&nbsp; &nbsp;a+=1</p>
                                            <p>&nbsp; &nbsp;a1-=1</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4" track-data="{messageID: '1671027657330', leftRailDirective: 'school-app-left-rail'}"
                                    track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody48">
            <!--Regular message template-->
            <div id="m1671027685665" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions merge-bubble keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">чтото типа такого, ответ от пользователя Бобров Степан Алексеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Бобров Степан Алексеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime ng-hide" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 17:21:25">
         17:21
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>чтото типа такого</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671027685665', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody49">
            <!--Regular message template-->
            <div id="m1671027904297" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions merge-bubble keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">Оно по идеи должно работать, ответ от пользователя Бобров Степан Алексеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Бобров Степан Алексеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime ng-hide" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 17:25:04">
         17:25
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>Оно по идеи должно работать</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671027904297', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody50">
            <!--Regular message template-->
            <div id="m1671028067110" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">да, ответ от пользователя Шестелева Евгения Евгеньевна.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:df95f487-a504-4955-b8e8-21e6501ff8ff" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-311" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:df95f487-a504-4955-b8e8-21e6501ff8ff/profilepicturev2?displayname=Шестелева Евгения Евгеньевна&amp;size=HR64x64"
                                alt="Аватар пользователя Шестелева Евгения Евгеньевна." upn="Shest_vz91@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:df95f487-a504-4955-b8e8-21e6501ff8ff/profilepicturev2?displayname=Шестелева Евгения Евгеньевна&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Нет на месте" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym away" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:df95f487-a504-4955-b8e8-21e6501ff8ff"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Шестелева Евгения Евгеньевна
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 17:27:47">
         17:27
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>да</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671028067110', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody51">
            <!--Regular message template-->
            <div id="m1671028074051" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">я знаю, ответ от пользователя Бобров Степан Алексеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-312" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178/profilepicturev2?displayname=Бобров Степан Алексеевич&amp;size=HR64x64"
                                alt="Аватар пользователя Бобров Степан Алексеевич." upn="Bobro_us85@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178/profilepicturev2?displayname=Бобров Степан Алексеевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Бобров Степан Алексеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 17:27:54">
         17:27
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>я знаю</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671028074051', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody52">
            <!--Regular message template-->
            <div id="m1671028087244" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions merge-bubble keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">я по другому, ответ от пользователя Бобров Степан Алексеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Бобров Степан Алексеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime ng-hide" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 17:28:07">
         17:28
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>я по другому</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671028087244', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody53">
            <!--Regular message template-->
            <div id="m1671028093656" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions merge-bubble keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">но я всеравно знаю, ответ от пользователя Бобров Степан Алексеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Бобров Степан Алексеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime ng-hide" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 17:28:13">
         17:28
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>но я всеравно знаю</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671028093656', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody54">
            <!--Regular message template-->
            <div id="m1671028095019" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">нулевому должен быть равен, ответ от пользователя Шестелева Евгения Евгеньевна.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:df95f487-a504-4955-b8e8-21e6501ff8ff" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-313" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:df95f487-a504-4955-b8e8-21e6501ff8ff/profilepicturev2?displayname=Шестелева Евгения Евгеньевна&amp;size=HR64x64"
                                alt="Аватар пользователя Шестелева Евгения Евгеньевна." upn="Shest_vz91@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:df95f487-a504-4955-b8e8-21e6501ff8ff/profilepicturev2?displayname=Шестелева Евгения Евгеньевна&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Нет на месте" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym away" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:df95f487-a504-4955-b8e8-21e6501ff8ff"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Шестелева Евгения Евгеньевна
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 17:28:15">
         17:28
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>нулевому должен быть равен</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671028095019', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody55">
            <!--Regular message template-->
            <div id="m1671028111178" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">if a[i] == " ": ?, ответ от пользователя Тюргашкин Максим Михайлович.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:dc1f0536-bff6-4126-95db-a318aacc229f" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-314" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:dc1f0536-bff6-4126-95db-a318aacc229f/profilepicturev2?displayname=Тюргашкин Максим Михайлович&amp;size=HR64x64"
                                alt="Аватар пользователя Тюргашкин Максим Михайлович." upn="Tyurg_pe69@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:dc1f0536-bff6-4126-95db-a318aacc229f/profilepicturev2?displayname=Тюргашкин Максим Михайлович&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:dc1f0536-bff6-4126-95db-a318aacc229f"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Тюргашкин Максим Михайлович
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 17:28:31">
         17:28
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p><span style="font-size:14px;font-style:inherit;font-weight:inherit">if a[i] == " ": ?</span></p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671028111178', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody56">
            <!--Regular message template-->
            <div id="m1671028125585" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">len(a)-1, ответ от пользователя Бобров Степан Алексеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-315" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178/profilepicturev2?displayname=Бобров Степан Алексеевич&amp;size=HR64x64"
                                alt="Аватар пользователя Бобров Степан Алексеевич." upn="Bobro_us85@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178/profilepicturev2?displayname=Бобров Степан Алексеевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Бобров Степан Алексеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 17:28:45">
         17:28
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>len(a)-1</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671028125585', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody57">
            <!--Regular message template-->
            <div id="m1671028143298" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">Здраствуйте извините за опоздание, ответ от пользователя Ашрапов Карим Ленарович.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:003f8ab6-3f51-4fdb-af47-f57af4643a1c" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-289" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:003f8ab6-3f51-4fdb-af47-f57af4643a1c/profilepicturev2?displayname=Ашрапов Карим Ленарович&amp;size=HR64x64"
                                alt="Аватар пользователя Ашрапов Карим Ленарович." upn="Ashra_ss79@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:003f8ab6-3f51-4fdb-af47-f57af4643a1c/profilepicturev2?displayname=Ашрапов Карим Ленарович&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:003f8ab6-3f51-4fdb-af47-f57af4643a1c"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Ашрапов Карим Ленарович
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 17:29:03">
         17:29
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>Здраствуйте извините за опоздание</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671028143298', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody58">
            <!--Regular message template-->
            <div id="m1671028512626" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">Методика сенсея поменялась, ответ от пользователя Бобров Степан Алексеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-290" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178/profilepicturev2?displayname=Бобров Степан Алексеевич&amp;size=HR64x64"
                                alt="Аватар пользователя Бобров Степан Алексеевич." upn="Bobro_us85@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178/profilepicturev2?displayname=Бобров Степан Алексеевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Бобров Степан Алексеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 17:35:12">
         17:35
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>Методика сенсея поменялась</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671028512626', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody59">
            <!--Regular message template-->
            <div id="m1671028824882" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">Величайший устремил свой взор против нас, надежда стремительно падает : (, ответ от пользователя Гнездилов Алексей Дмитриевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:cbf301cb-934e-4a99-b0dc-224095c65013" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-291" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:cbf301cb-934e-4a99-b0dc-224095c65013/profilepicturev2?displayname=Гнездилов Алексей Дмитриевич&amp;size=HR64x64"
                                alt="Аватар пользователя Гнездилов Алексей Дмитриевич." upn="Gnezd_mg41@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:cbf301cb-934e-4a99-b0dc-224095c65013/profilepicturev2?displayname=Гнездилов Алексей Дмитриевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:cbf301cb-934e-4a99-b0dc-224095c65013"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Гнездилов Алексей Дмитриевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 17:40:24">
         17:40
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>Величайший устремил свой взор против нас, надежда стремительно падает : (</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671028824882', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody60">
            <!--Regular message template-->
            <div id="m1671029070437" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">find(), ответ от пользователя Сандульский Семён.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:3e008d96-8266-4c84-9869-a4efc34dee35" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-292" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:3e008d96-8266-4c84-9869-a4efc34dee35/profilepicturev2?displayname=Сандульский Семён&amp;size=HR64x64"
                                alt="Аватар пользователя Сандульский Семён." upn="Sandu_gs22@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:3e008d96-8266-4c84-9869-a4efc34dee35/profilepicturev2?displayname=Сандульский Семён&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:3e008d96-8266-4c84-9869-a4efc34dee35"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Сандульский Семён
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 17:44:30">
         17:44
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>find()</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671029070437', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody61">
            <!--Regular message template-->
            <div id="m1671029083173" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">append?, ответ от пользователя Бобров Степан Алексеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-293" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178/profilepicturev2?displayname=Бобров Степан Алексеевич&amp;size=HR64x64"
                                alt="Аватар пользователя Бобров Степан Алексеевич." upn="Bobro_us85@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178/profilepicturev2?displayname=Бобров Степан Алексеевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Бобров Степан Алексеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 17:44:43">
         17:44
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>append?</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671029083173', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody62">
            <!--Regular message template-->
            <div id="m1671029122454" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions merge-bubble keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">+=?, ответ от пользователя Бобров Степан Алексеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Бобров Степан Алексеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime ng-hide" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 17:45:22">
         17:45
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>+=?</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671029122454', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody63">
            <!--Regular message template-->
            <div id="m1671029279833" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">blank?, ответ от пользователя Гнездилов Алексей Дмитриевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:cbf301cb-934e-4a99-b0dc-224095c65013" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-294" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:cbf301cb-934e-4a99-b0dc-224095c65013/profilepicturev2?displayname=Гнездилов Алексей Дмитриевич&amp;size=HR64x64"
                                alt="Аватар пользователя Гнездилов Алексей Дмитриевич." upn="Gnezd_mg41@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:cbf301cb-934e-4a99-b0dc-224095c65013/profilepicturev2?displayname=Гнездилов Алексей Дмитриевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:cbf301cb-934e-4a99-b0dc-224095c65013"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Гнездилов Алексей Дмитриевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 17:47:59">
         17:47
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>blank?</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671029279833', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody64">
            <!--Regular message template-->
            <div id="m1671029388254" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">в список и in, ответ от пользователя Петроченков Алексей Андреевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:4f1e392a-d25a-49ab-bbf5-4ced6b27efe8" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-295" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:4f1e392a-d25a-49ab-bbf5-4ced6b27efe8/profilepicturev2?displayname=Петроченков Алексей Андреевич&amp;size=HR64x64"
                                alt="Аватар пользователя Петроченков Алексей Андреевич." upn="Petro_wi51@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:4f1e392a-d25a-49ab-bbf5-4ced6b27efe8/profilepicturev2?displayname=Петроченков Алексей Андреевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:4f1e392a-d25a-49ab-bbf5-4ced6b27efe8"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Петроченков Алексей Андреевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 17:49:48">
         17:49
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>в список и in</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671029388254', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody65">
            <!--Regular message template-->
            <div id="m1671029399606" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions merge-bubble keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">запятые, точки и тд, ответ от пользователя Петроченков Алексей Андреевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Петроченков Алексей Андреевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime ng-hide" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 17:49:59">
         17:49
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>запятые, точки и тд</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671029399606', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody66">
            <!--Regular message template-->
            <div id="m1671029403609" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">ладно, ответ от пользователя Бобров Степан Алексеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-296" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178/profilepicturev2?displayname=Бобров Степан Алексеевич&amp;size=HR64x64"
                                alt="Аватар пользователя Бобров Степан Алексеевич." upn="Bobro_us85@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178/profilepicturev2?displayname=Бобров Степан Алексеевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Бобров Степан Алексеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 17:50:03">
         17:50
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>ладно</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671029403609', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody67">
            <!--Regular message template-->
            <div id="m1671029411650" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">капец, ответ от пользователя Портас Константин Сергеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:21bf49d8-b9fb-4c73-8a04-97cf59e07012" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-297" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:21bf49d8-b9fb-4c73-8a04-97cf59e07012/profilepicturev2?displayname=Портас Константин Сергеевич&amp;size=HR64x64"
                                alt="Аватар пользователя Портас Константин Сергеевич." upn="Porta_yx78@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:21bf49d8-b9fb-4c73-8a04-97cf59e07012/profilepicturev2?displayname=Портас Константин Сергеевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:21bf49d8-b9fb-4c73-8a04-97cf59e07012"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Портас Константин Сергеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 17:50:11">
         17:50
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>капец</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671029411650', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody68">
            <!--Regular message template-->
            <div id="m1671029413813" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">Что еще раз не гуглить?, ответ от пользователя Бобров Степан Алексеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-298" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178/profilepicturev2?displayname=Бобров Степан Алексеевич&amp;size=HR64x64"
                                alt="Аватар пользователя Бобров Степан Алексеевич." upn="Bobro_us85@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178/profilepicturev2?displayname=Бобров Степан Алексеевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Бобров Степан Алексеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 17:50:13">
         17:50
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>Что еще раз не гуглить?</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671029413813', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody69">
            <!--Regular message template-->
            <div id="m1671029424393" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like self" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">regexp, ответ от пользователя Калинин Максим Игоревич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:eda3c4a8-fbf3-496d-99a0-af83f7769e9c" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-299" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object default-profile-image" ng-class="$ctrl.additionalCssClass" ng-src="blob:https://teams.microsoft.com/4786931a-51c4-479f-a8a7-a2919836b78f"
                                alt="Аватар пользователя Калинин Максим Игоревич." upn="kalinin_maks@t.top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="blob:https://teams.microsoft.com/4786931a-51c4-479f-a8a7-a2919836b78f" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="В сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym online" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:eda3c4a8-fbf3-496d-99a0-af83f7769e9c"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Калинин Максим Игоревич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 17:50:24">
         17:50
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>regexp</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeLess" track-panel-type="4" track-data="{messageID: '1671029424393', leftRailDirective: 'school-app-left-rail'}"
                                    track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody70">
            <!--Regular message template-->
            <div id="m1671029425312" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">regex вроде, ответ от пользователя Сафронов Артём Игоревич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:96cb4cbd-2b1a-4ffe-b527-cf60e29332dd" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-300" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:96cb4cbd-2b1a-4ffe-b527-cf60e29332dd/profilepicturev2?displayname=Сафронов Артём Игоревич&amp;size=HR64x64"
                                alt="Аватар пользователя Сафронов Артём Игоревич." upn="Safro_wj68@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:96cb4cbd-2b1a-4ffe-b527-cf60e29332dd/profilepicturev2?displayname=Сафронов Артём Игоревич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="В сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym online" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:96cb4cbd-2b1a-4ffe-b527-cf60e29332dd"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Сафронов Артём Игоревич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 17:50:25">
         17:50
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>regex вроде</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671029425312', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody71">
            <!--Regular message template-->
            <div id="m1671029436344" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">спс, ответ от пользователя Бобров Степан Алексеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-301" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178/profilepicturev2?displayname=Бобров Степан Алексеевич&amp;size=HR64x64"
                                alt="Аватар пользователя Бобров Степан Алексеевич." upn="Bobro_us85@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178/profilepicturev2?displayname=Бобров Степан Алексеевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Бобров Степан Алексеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 17:50:36">
         17:50
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>спс</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671029436344', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody72">
            <!--Regular message template-->
            <div id="m1671029723970" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions merge-bubble keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">upper, ответ от пользователя Бобров Степан Алексеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Бобров Степан Алексеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime ng-hide" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 17:55:23">
         17:55
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>upper</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671029723970', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody73">
            <!--Regular message template-->
            <div id="m1671029726209" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions edited-message show-top-row keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">upper, ответ от пользователя Сафронов Артём Игоревич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:96cb4cbd-2b1a-4ffe-b527-cf60e29332dd" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-302" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:96cb4cbd-2b1a-4ffe-b527-cf60e29332dd/profilepicturev2?displayname=Сафронов Артём Игоревич&amp;size=HR64x64"
                                alt="Аватар пользователя Сафронов Артём Игоревич." upn="Safro_wj68@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:96cb4cbd-2b1a-4ffe-b527-cf60e29332dd/profilepicturev2?displayname=Сафронов Артём Игоревич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="В сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym online" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:96cb4cbd-2b1a-4ffe-b527-cf60e29332dd"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Сафронов Артём Игоревич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 17:55:26">
         17:55
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="Изменено 14 дек., 17:55:31" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="Изменено 14 дек., 17:55:31" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>upper</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671029726209', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody74">
            <!--Regular message template-->
            <div id="m1671030054048" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">lower, ответ от пользователя Бобров Степан Алексеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-303" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178/profilepicturev2?displayname=Бобров Степан Алексеевич&amp;size=HR64x64"
                                alt="Аватар пользователя Бобров Степан Алексеевич." upn="Bobro_us85@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178/profilepicturev2?displayname=Бобров Степан Алексеевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Бобров Степан Алексеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 18:00:54">
         18:00
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>lower</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671030054048', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody75">
            <!--Regular message template-->
            <div id="m1671030481730" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">: O, ответ от пользователя Гнездилов Алексей Дмитриевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:cbf301cb-934e-4a99-b0dc-224095c65013" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-304" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:cbf301cb-934e-4a99-b0dc-224095c65013/profilepicturev2?displayname=Гнездилов Алексей Дмитриевич&amp;size=HR64x64"
                                alt="Аватар пользователя Гнездилов Алексей Дмитриевич." upn="Gnezd_mg41@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:cbf301cb-934e-4a99-b0dc-224095c65013/profilepicturev2?displayname=Гнездилов Алексей Дмитриевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:cbf301cb-934e-4a99-b0dc-224095c65013"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Гнездилов Алексей Дмитриевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 18:08:01">
         18:08
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>: O</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671030481730', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody76">
            <!--Regular message template-->
            <div id="m1671030498525" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">3 строки, ответ от пользователя Петроченков Алексей Андреевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:4f1e392a-d25a-49ab-bbf5-4ced6b27efe8" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-305" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:4f1e392a-d25a-49ab-bbf5-4ced6b27efe8/profilepicturev2?displayname=Петроченков Алексей Андреевич&amp;size=HR64x64"
                                alt="Аватар пользователя Петроченков Алексей Андреевич." upn="Petro_wi51@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:4f1e392a-d25a-49ab-bbf5-4ced6b27efe8/profilepicturev2?displayname=Петроченков Алексей Андреевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:4f1e392a-d25a-49ab-bbf5-4ced6b27efe8"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Петроченков Алексей Андреевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 18:08:18">
         18:08
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>3 строки</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671030498525', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody77">
            <!--Regular message template-->
            <div id="m1671030639321" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like self" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">перерыв до 18.20, ответ от пользователя Калинин Максим Игоревич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:eda3c4a8-fbf3-496d-99a0-af83f7769e9c" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-275" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object default-profile-image" ng-class="$ctrl.additionalCssClass" ng-src="blob:https://teams.microsoft.com/4786931a-51c4-479f-a8a7-a2919836b78f"
                                alt="Аватар пользователя Калинин Максим Игоревич." upn="kalinin_maks@t.top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="blob:https://teams.microsoft.com/4786931a-51c4-479f-a8a7-a2919836b78f" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="В сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym online" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:eda3c4a8-fbf3-496d-99a0-af83f7769e9c"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Калинин Максим Игоревич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 18:10:39">
         18:10
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>перерыв до 18.20</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeLess" track-panel-type="4" track-data="{messageID: '1671030639321', leftRailDirective: 'school-app-left-rail'}"
                                    track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody78">
            <!--Regular message template-->
            <div id="m1671030660391" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">+, ответ от пользователя Сафронов Артём Игоревич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:96cb4cbd-2b1a-4ffe-b527-cf60e29332dd" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-276" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:96cb4cbd-2b1a-4ffe-b527-cf60e29332dd/profilepicturev2?displayname=Сафронов Артём Игоревич&amp;size=HR64x64"
                                alt="Аватар пользователя Сафронов Артём Игоревич." upn="Safro_wj68@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:96cb4cbd-2b1a-4ffe-b527-cf60e29332dd/profilepicturev2?displayname=Сафронов Артём Игоревич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="В сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym online" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:96cb4cbd-2b1a-4ffe-b527-cf60e29332dd"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Сафронов Артём Игоревич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 18:11:00">
         18:11
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>+</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671030660391', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody79">
            <!--Regular message template-->
            <div id="m1671030872503" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">Ссылка https://www.youtube.com/watch?v=dQw4w9WgXcQ, ответ от пользователя Бобров Степан Алексеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-277" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178/profilepicturev2?displayname=Бобров Степан Алексеевич&amp;size=HR64x64"
                                alt="Аватар пользователя Бобров Степан Алексеевич." upn="Bobro_us85@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178/profilepicturev2?displayname=Бобров Степан Алексеевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Бобров Степан Алексеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 18:14:32">
         18:14
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p><a href="https://www.youtube.com/watch?v=dQw4w9WgXcQ" rel="noreferrer noopener" title="https://www.youtube.com/watch?v=dqw4w9wgxcq" target="_blank" tabindex="-1">https://www.youtube.com/watch?v=dQw4w9WgXcQ</a></p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671030872503', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->
                            <url-preview message-view-model="ctrl.messageViewModel" ng-if="ctrl.messageViewModel.firstUrlPreview &amp;&amp; !ctrl.layoutService.rightRailVisible">
                                <!---->
                                <a class="url-preview-anchor" ng-if="upc.showPreview" ng-class="::{'isSelf': upc.isFromMe}" data-tid="urlPreviewAnchor">
                                    <div class="preview-container preview-height" ng-click="upc.openLink()" track-outcome="3" track-scenario="327" track-scenario-type="35" track-name="" track-type="32" track-summary="URL Preview" target="_blank" simple-focus="upc.constructAriaLabelForContainer($event)"
                                        id="app-based-link-url-preview" data-tid="appBasedLinkUrlPreview" acc-role-dom="table-content-row" tabindex="-1" role="row" acc-row="">
                                        <div class="preview-image">
                                            <!---->
                                            <!---->
                                            <div ng-if="upc.urlPreview.previewUrl &amp;&amp; !upc.imageNotAvailable" ng-class="::{'auto-background-size': upc.shouldShrinkThumbnailImage}" class="preview-actual-image" ng-style="{'background-image': 'url(https://urlp.asm.skype.com/v1/url/image/Thumbnail?url=https%3a%2f%2fi.ytimg.com%2fvi%2fdQw4w9WgXcQ%2fmaxresdefault.jpg)'}"
                                                style="background-image: url(&quot;https://urlp.asm.skype.com/v1/url/image/Thumbnail?url=https%3a%2f%2fi.ytimg.com%2fvi%2fdQw4w9WgXcQ%2fmaxresdefault.jpg&quot;);"><img ng-src="https://urlp.asm.skype.com/v1/url/image/Thumbnail?url=https%3a%2f%2fi.ytimg.com%2fvi%2fdQw4w9WgXcQ%2fmaxresdefault.jpg" class="hidden" data-tid="urlPreviewThumbnail" img-failure-src="" src="https://urlp.asm.skype.com/v1/url/image/Thumbnail?url=https%3a%2f%2fi.ytimg.com%2fvi%2fdQw4w9WgXcQ%2fmaxresdefault.jpg"></div>
                                            <!---->
                                        </div>
                                        <div class="preview-content">
                                            <div class="preview-detail">
                                                <!---->
                                                <div class="title" title="Rick Astley - Never Gonna Give You Up (Official Music Video) - YouTube" data-tid="urlPreviewTitle" ng-if="upc.urlPreview.title">Rick Astley - Never Gonna Give You Up (Official Music Video) - YouTube</div>
                                                <!---->
                                                <!---->
                                                <div class="description" title="The official video for “Never Gonna Give You Up” by Rick AstleyTaken from the album ‘Whenever You Need Somebody’ – deluxe 2CD and digital deluxe out 6th May ..." data-tid="urlPreviewDescription"
                                                    ng-if="upc.urlPreview.description">The official video for “Never Gonna Give You Up” by Rick AstleyTaken from the album ‘Whenever You Need Somebody’ – deluxe 2CD and digital deluxe out 6th May ...</div>
                                                <!---->
                                                <!---->
                                            </div>
                                            <!---->
                                            <div class="domain" data-tid="urlPreviewDomain" ng-if="upc.urlDomain">www.youtube.com</div>
                                            <!---->
                                        </div>
                                        <!---->
                                    </div>
                                    <!---->
                                </a>
                                <!---->
                            </url-preview>
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody80">
            <!--Regular message template-->
            <div id="m1671031374836" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">слит?, ответ от пользователя Бобров Степан Алексеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-278" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178/profilepicturev2?displayname=Бобров Степан Алексеевич&amp;size=HR64x64"
                                alt="Аватар пользователя Бобров Степан Алексеевич." upn="Bobro_us85@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178/profilepicturev2?displayname=Бобров Степан Алексеевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Бобров Степан Алексеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 18:22:54">
         18:22
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>слит?</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671031374836', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody81">
            <!--Regular message template-->
            <div id="m1671031450666" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions merge-bubble keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">в regexp, ответ от пользователя Бобров Степан Алексеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Бобров Степан Алексеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime ng-hide" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 18:24:10">
         18:24
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>в regexp</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671031450666', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody82">
            <!--Regular message template-->
            <div id="m1671031455163" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions merge-bubble keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">nfrfz inerf ttcnm, ответ от пользователя Бобров Степан Алексеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Бобров Степан Алексеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime ng-hide" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 18:24:15">
         18:24
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>nfrfz inerf ttcnm</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671031455163', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody83">
            <!--Regular message template-->
            <div id="m1671031460252" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions merge-bubble keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">такая штука есть, ответ от пользователя Бобров Степан Алексеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Бобров Степан Алексеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime ng-hide" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 18:24:20">
         18:24
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>такая штука есть</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671031460252', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody84">
            <!--Regular message template-->
            <div id="m1671031489223" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions merge-bubble keep-size-after-like has-reactions" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">нам нужен хардкор, ответ от пользователя Бобров Степан Алексеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message has-reactions" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Бобров Степан Алексеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 18:24:49">
         18:24
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>нам нужен хардкор</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671031489223', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->
                        <div class="message-expanded-reactions" ng-if="ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction &amp;&amp; ctrl.expandedReactionsConfigService.shouldSendExpandedReactions">
                            <!---->
                            <div ng-if="!ctrl.isInteropChat
        &amp;&amp; !ctrl.isHiddenByDlp
        &amp;&amp; (ctrl.messageViewModel.isDeferredLoad
        &amp;&amp; !ctrl.messageIsClientLie)" aria-label="Реакции на сообщения." class="message-reactions-view reduce-left-margin" ng-class="{'reduce-left-margin' : ctrl.messageViewModel.isReply &amp;&amp; ctrl.messageType !== 'conversation'}">
                                <message-reactions message-view-model="ctrl.messageViewModel" aria-label="Реакции на сообщения." should-hide-reaction-popover="ctrl.shouldHideReactionPopover" ma-deferred-load="" class="message-reactions-container">
                                    <ul data-tid="messageReactions" class="message-reactions">
                                        <!---->
                                        <!---->
                                        <li class="reaction-container person-card-list-hover app-font-caption-regular" person-card-list="" enable-people-list-v2="true" participant-list="reactionsCtrl.messageViewModel.reactionsUsers[reaction]" host-tenant-id="reactionsCtrl.hostTenantId"
                                            conversation-id="reactionsCtrl.isSharedChannel ? reactionsCtrl.conversationId : null" is-shared-channel="reactionsCtrl.isSharedChannel" is-person-img-displayed="true" is-expanded-reaction="reactionsCtrl.shouldSendExpandedReactions"
                                            reaction="reaction" reaction-name="::reactionsCtrl.getReactionName(reaction)" reaction-img-src="::reactionsCtrl.reactionsImageUrlMap[reaction]" no-sort="true" is-list-sorted="true" delay-in-ms="::reactionsCtrl.constants.personCard.delayInReaction"
                                            show-more-reaction-users="reactionsCtrl.showMoreUers(reaction)" show-as-context-menu="reactionsCtrl.shouldSendExpandedReactions" start-show-reactions="reactionsCtrl.startShowReactions(reaction)" end-show-reactions="reactionsCtrl.endShowReactions(reaction)"
                                            aria-haspopup="!reactionsCtrl.shouldSendExpandedReactions" tabindex="-1" ng-repeat="(reaction, count) in reactionsCtrl.messageViewModel.reactionsSummary" ng-if="((!reactionsCtrl.messageViewModel.isRightRail || $first) &amp;&amp; count)"
                                            role="button" ng-click="reactionsCtrl.onMessageReaction($event, reaction)" ng-keydown="reactionsCtrl.onReactionKeydown($event, reaction)" oncontextmenu="reactionsCtrl.onContextMenu($event)" ng-class="{ 'message-actions-reacted app-font-caption-bold': reactionsCtrl.messageViewModel.currentUserHasReactedWith === reaction,
             'app-font-caption-regular': reactionsCtrl.messageViewModel.currentUserHasReactedWith !== reaction}" aria-pressed="" aria-label="One Нет реакция. Нажмите ВВОД или ПРОБЕЛ, чтобы добавить Нет реакцию. Содержит контекстное меню .">
                                            <div dir="auto" class="reaction-image-container" aria-hidden="true">
                                                <img class="reaction-size reaction personal-expression-emoticon fluent-reaction-emoticon" ng-class="::reactionsCtrl.reactionClass" ng-src="https://statics.teams.cdn.office.net/evergreen-assets/personal-expressions/v2/assets/emoticons/no/default/30_f.png?v=v49"
                                                    data-tid="messageReactionImage-no" title="" src="https://statics.teams.cdn.office.net/evergreen-assets/personal-expressions/v2/assets/emoticons/no/default/30_f.png?v=v49">
                                                <span class="reaction-count reaction-count-size" data-tid="messageReactionCount-no">
       1
 </span>
                                            </div>
                                        </li>
                                        <!---->
                                        <!---->
                                        <!---->
                                        <li class="reaction-container person-card-list-hover app-font-caption-regular" person-card-list="" enable-people-list-v2="true" participant-list="reactionsCtrl.messageViewModel.reactionsUsers[reaction]" host-tenant-id="reactionsCtrl.hostTenantId"
                                            conversation-id="reactionsCtrl.isSharedChannel ? reactionsCtrl.conversationId : null" is-shared-channel="reactionsCtrl.isSharedChannel" is-person-img-displayed="true" is-expanded-reaction="reactionsCtrl.shouldSendExpandedReactions"
                                            reaction="reaction" reaction-name="::reactionsCtrl.getReactionName(reaction)" reaction-img-src="::reactionsCtrl.reactionsImageUrlMap[reaction]" no-sort="true" is-list-sorted="true" delay-in-ms="::reactionsCtrl.constants.personCard.delayInReaction"
                                            show-more-reaction-users="reactionsCtrl.showMoreUers(reaction)" show-as-context-menu="reactionsCtrl.shouldSendExpandedReactions" start-show-reactions="reactionsCtrl.startShowReactions(reaction)" end-show-reactions="reactionsCtrl.endShowReactions(reaction)"
                                            aria-haspopup="!reactionsCtrl.shouldSendExpandedReactions" tabindex="-1" ng-repeat="(reaction, count) in reactionsCtrl.messageViewModel.reactionsSummary" ng-if="((!reactionsCtrl.messageViewModel.isRightRail || $first) &amp;&amp; count)"
                                            role="button" ng-click="reactionsCtrl.onMessageReaction($event, reaction)" ng-keydown="reactionsCtrl.onReactionKeydown($event, reaction)" oncontextmenu="reactionsCtrl.onContextMenu($event)" ng-class="{ 'message-actions-reacted app-font-caption-bold': reactionsCtrl.messageViewModel.currentUserHasReactedWith === reaction,
             'app-font-caption-regular': reactionsCtrl.messageViewModel.currentUserHasReactedWith !== reaction}" aria-pressed="" aria-label="One Нравится реакция. Нажмите ВВОД или ПРОБЕЛ, чтобы добавить Нравится реакцию. Содержит контекстное меню .">
                                            <div dir="auto" class="reaction-image-container" aria-hidden="true">
                                                <img class="reaction-size reaction personal-expression-emoticon fluent-reaction-emoticon" ng-class="::reactionsCtrl.reactionClass" ng-src="https://statics.teams.cdn.office.net/evergreen-assets/personal-expressions/v2/assets/emoticons/yes/default/30_f.png?v=v70"
                                                    data-tid="messageReactionImage-like" title="" src="https://statics.teams.cdn.office.net/evergreen-assets/personal-expressions/v2/assets/emoticons/yes/default/30_f.png?v=v70">
                                                <span class="reaction-count reaction-count-size" data-tid="messageReactionCount-like">
       1
 </span>
                                            </div>
                                        </li>
                                        <!---->
                                        <!---->
                                    </ul>
                                    <!---->
                                    <!---->
                                </message-reactions>
                            </div>
                            <!---->
                        </div>
                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody85">
            <!--Regular message template-->
            <div id="m1671031697995" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions merge-bubble keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">а шаг как в форе?, ответ от пользователя Бобров Степан Алексеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Бобров Степан Алексеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime ng-hide" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 18:28:17">
         18:28
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>а шаг как в форе?</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671031697995', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody86">
            <!--Regular message template-->
            <div id="m1671031799397" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like self" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">выведите на экран полученный результат, ответ от пользователя Калинин Максим Игоревич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:eda3c4a8-fbf3-496d-99a0-af83f7769e9c" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-279" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object default-profile-image" ng-class="$ctrl.additionalCssClass" ng-src="blob:https://teams.microsoft.com/4786931a-51c4-479f-a8a7-a2919836b78f"
                                alt="Аватар пользователя Калинин Максим Игоревич." upn="kalinin_maks@t.top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="blob:https://teams.microsoft.com/4786931a-51c4-479f-a8a7-a2919836b78f" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="В сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym online" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:eda3c4a8-fbf3-496d-99a0-af83f7769e9c"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Калинин Максим Игоревич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 18:29:59">
         18:29
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p><span style="font-size:14px;font-weight:inherit;font-style:inherit"><span style="font-style:inherit;font-weight:inherit">выведите на экран полученный результат</span></span>
                                            </p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeLess" track-panel-type="4" track-data="{messageID: '1671031799397', leftRailDirective: 'school-app-left-rail'}"
                                    track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody87">
            <!--Regular message template-->
            <div id="m1671031980315" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">string = 'выведите на экран полученный результат' print(string[:12]) print(string[11:18]) print(st…, ответ от пользователя Петроченков Алексей Андреевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:4f1e392a-d25a-49ab-bbf5-4ced6b27efe8" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-280" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:4f1e392a-d25a-49ab-bbf5-4ced6b27efe8/profilepicturev2?displayname=Петроченков Алексей Андреевич&amp;size=HR64x64"
                                alt="Аватар пользователя Петроченков Алексей Андреевич." upn="Petro_wi51@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:4f1e392a-d25a-49ab-bbf5-4ced6b27efe8/profilepicturev2?displayname=Петроченков Алексей Андреевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:4f1e392a-d25a-49ab-bbf5-4ced6b27efe8"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Петроченков Алексей Андреевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 18:33:00">
         18:33
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content ts-see-more-btn-showing" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p><span style="font-size:14px;font-weight:inherit;font-style:inherit"><span style="font-style:inherit;font-weight:inherit">string</span><span style="font-style:inherit;font-weight:inherit"> = </span><span style="font-style:inherit;font-weight:inherit">'выведите на экран полученный результат'</span></span>
                                            </p>
                                            <p><br>
                                            </p>
                                            <p><span style="font-size:14px;font-weight:inherit;font-style:inherit"><span style="font-style:inherit;font-weight:inherit">print</span><span style="font-style:inherit;font-weight:inherit">(</span><span style="font-style:inherit;font-weight:inherit">string</span>
                                                <span
                                                    style="font-style:inherit;font-weight:inherit">[:</span><span style="font-style:inherit;font-weight:inherit">12</span><span style="font-style:inherit;font-weight:inherit">])</span></span>
                                            </p>
                                            <p><span style="font-size:14px;font-weight:inherit;font-style:inherit"><span style="font-style:inherit;font-weight:inherit">print</span><span style="font-style:inherit;font-weight:inherit">(</span><span style="font-style:inherit;font-weight:inherit">string</span>
                                                <span
                                                    style="font-style:inherit;font-weight:inherit">[</span><span style="font-style:inherit;font-weight:inherit">11</span><span style="font-style:inherit;font-weight:inherit">:</span><span style="font-style:inherit;font-weight:inherit">18</span><span style="font-style:inherit;font-weight:inherit">])</span></span>
                                            </p>
                                            <p><span style="font-size:14px;font-weight:inherit;font-style:inherit"><span style="font-style:inherit;font-weight:inherit">print</span><span style="font-style:inherit;font-weight:inherit">(</span><span style="font-style:inherit;font-weight:inherit">string</span>
                                                <span
                                                    style="font-style:inherit;font-weight:inherit">[</span><span style="font-style:inherit;font-weight:inherit">20</span><span style="font-style:inherit;font-weight:inherit">:</span><span style="font-style:inherit;font-weight:inherit">23</span><span style="font-style:inherit;font-weight:inherit">])</span></span>
                                            </p>
                                            <p><span style="font-size:14px;font-weight:inherit;font-style:inherit"><span style="font-style:inherit;font-weight:inherit">print</span><span style="font-style:inherit;font-weight:inherit">(</span><span style="font-style:inherit;font-weight:inherit">string</span>
                                                <span
                                                    style="font-style:inherit;font-weight:inherit">[</span><span style="font-style:inherit;font-weight:inherit">35</span><span style="font-style:inherit;font-weight:inherit">:])</span></span>
                                            </p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4" track-data="{messageID: '1671031980315', leftRailDirective: 'school-app-left-rail'}"
                                    track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody88">
            <!--Regular message template-->
            <div id="m1671031995364" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">string='выведите на экран полученый результат' a=string[3:12]&nbsp; print(a) a=string[5:9] print(a) a=str…, ответ от пользователя Кириллова Ульяна Станиславовна.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:2a34fd62-d738-454f-937d-b07f443f3147" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-281" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:2a34fd62-d738-454f-937d-b07f443f3147/profilepicturev2?displayname=Кириллова Ульяна Станиславовна&amp;size=HR64x64"
                                alt="Аватар пользователя Кириллова Ульяна Станиславовна." upn="Kiril_jc33@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:2a34fd62-d738-454f-937d-b07f443f3147/profilepicturev2?displayname=Кириллова Ульяна Станиславовна&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:2a34fd62-d738-454f-937d-b07f443f3147"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Кириллова Ульяна Станиславовна
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 18:33:15">
         18:33
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content ts-see-more-btn-showing" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>string='выведите на экран полученый результат'<br> a=string[3:12]&nbsp;
                                                <br> print(a)
                                                <br> a=string[5:9]
                                                <br> print(a)
                                                <br> a=string[7:10]&nbsp;
                                                <br> print(a)
                                                <br> a=string[2:8]
                                                <br> print(a)
                                            </p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4" track-data="{messageID: '1671031995364', leftRailDirective: 'school-app-left-rail'}"
                                    track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->

        <!---->
        <tombstone message-view-model="messageViewModel" ng-if="messageViewModel.isDeleted">
            <div id="m1671032037934" data-tid="tombstone-m1671032037934" class="media acc-thread-focusable tombstone-media" tabindex="-1" aria-label="Сообщение удалено." ng-class="{ 'message-action-error' : tmbCtrl.messageViewModel.hasMessageActionFailed,
              'self' : tmbCtrl.messageViewModel.isFromMe }">
                <div class="media-left">
                    <div class="wrapper">
                        <div class="media-object">
                            <svg viewBox="-6 -6 32 32" role="presentation" focusable="false" class="app-svg icons-delete"><g class="icons-default-fill"><path class="icons-filled" d="M10 1.25C11.4346 1.25 12.6126 2.34848 12.7388 3.75019L17 3.75C17.4142 3.75 17.75 4.08579 17.75 4.5C17.75 4.8797 17.4678 5.19349 17.1018 5.24315L17 5.25H16.417L15.1499 16.2292C15.0335 17.2384 14.179 18 13.1631 18H6.83688C5.821 18 4.9665 17.2384 4.85006 16.2292L3.582 5.25H3C2.6203 5.25 2.30651 4.96785 2.25685 4.60177L2.25 4.5C2.25 4.1203 2.53215 3.80651 2.89823 3.75685L3 3.75L7.26119 3.75019C7.38741 2.34848 8.56542 1.25 10 1.25ZM8.5 7.5C8.25454 7.5 8.05039 7.65477 8.00806 7.85886L8 7.9375V14.0625L8.00806 14.1411C8.05039 14.3452 8.25454 14.5 8.5 14.5C8.74546 14.5 8.94961 14.3452 8.99194 14.1411L9 14.0625V7.9375L8.99194 7.85886C8.94961 7.65477 8.74546 7.5 8.5 7.5ZM11.5 7.5C11.2545 7.5 11.0504 7.65477 11.0081 7.85886L11 7.9375V14.0625L11.0081 14.1411C11.0504 14.3452 11.2545 14.5 11.5 14.5C11.7455 14.5 11.9496 14.3452 11.9919 14.1411L12 14.0625V7.9375L11.9919 7.85886C11.9496 7.65477 11.7455 7.5 11.5 7.5ZM10 2.75C9.39524 2.75 8.89079 3.17947 8.77499 3.75005H11.225C11.1092 3.17947 10.6048 2.75 10 2.75Z"></path><path class="icons-unfilled" d="M11.5 4C11.5 3.17157 10.8284 2.5 10 2.5C9.17157 2.5 8.5 3.17157 8.5 4H7.5C7.5 2.61929 8.61929 1.5 10 1.5C11.3807 1.5 12.5 2.61929 12.5 4H17C17.2761 4 17.5 4.22386 17.5 4.5C17.5 4.77614 17.2761 5 17 5H16.446L15.1499 16.2292C15.0335 17.2384 14.179 18 13.1631 18H6.83688C5.821 18 4.9665 17.2384 4.85006 16.2292L3.553 5H3C2.75454 5 2.55039 4.82312 2.50806 4.58988L2.5 4.5C2.5 4.22386 2.72386 4 3 4H11.5ZM15.438 5H4.561L5.84347 16.1146C5.90169 16.6192 6.32894 17 6.83688 17H13.1631C13.6711 17 14.0983 16.6192 14.1565 16.1146L15.438 5ZM8.5 7.5C8.74546 7.5 8.94961 7.65477 8.99194 7.85886L9 7.9375V14.0625C9 14.3041 8.77614 14.5 8.5 14.5C8.25454 14.5 8.05039 14.3452 8.00806 14.1411L8 14.0625V7.9375C8 7.69588 8.22386 7.5 8.5 7.5ZM11.5 7.5C11.7455 7.5 11.9496 7.65477 11.9919 7.85886L12 7.9375V14.0625C12 14.3041 11.7761 14.5 11.5 14.5C11.2545 14.5 11.0504 14.3452 11.0081 14.1411L11 14.0625V7.9375C11 7.69588 11.2239 7.5 11.5 7.5Z"></path></g></svg>
                        </div>
                    </div>
                </div>
                <div class="tombstone-body message-body message-body-width">
                    <div class="tombstone-content">
                        <!---->

                        <div class="deleted-message" id="deleted-message-1671032037934" role="heading" aria-level="5" data-tid="deletedMessage">
                            <!---->
                            <!---->
                            <div ng-if="!tmbCtrl.showDataSpillageMessage()">
                                <span>
           Сообщение удалено.
           <!---->
         </span>
                            </div>
                            <!---->
                        </div>
                    </div>
                    <!---->
                </div>
            </div>
        </tombstone>
        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody90">
            <!--Regular message template-->
            <div id="m1671032081046" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">word = "выведите на экран полученный результат" &nbsp; print(word[:11]) print(word[12:17]) print(word[20…, ответ от пользователя Бобров Степан Алексеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-282" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178/profilepicturev2?displayname=Бобров Степан Алексеевич&amp;size=HR64x64"
                                alt="Аватар пользователя Бобров Степан Алексеевич." upn="Bobro_us85@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178/profilepicturev2?displayname=Бобров Степан Алексеевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Бобров Степан Алексеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 18:34:41">
         18:34
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content ts-see-more-btn-showing" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>word = "выведите на экран полученный результат"</p>
                                            <p><br> &nbsp;
                                            </p>
                                            <p>print(word[:11])</p>
                                            <p>print(word[12:17])</p>
                                            <p>print(word[20:23])</p>
                                            <p>print(word[35:38])</p>
                                            <p>&nbsp; &nbsp;</p>
                                            <p><br>
                                                <br>
                                                <br>
                                                <br>
                                                <br> &nbsp;
                                            </p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4" track-data="{messageID: '1671032081046', leftRailDirective: 'school-app-left-rail'}"
                                    track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody91">
            <!--Regular message template-->
            <div id="m1671032113698" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">str = 'выведите на экран полученный результат' a = str[35:38] print(a) b = str[0:11] print(b) c = st…, ответ от пользователя Гнездилов Алексей Дмитриевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:cbf301cb-934e-4a99-b0dc-224095c65013" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-283" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:cbf301cb-934e-4a99-b0dc-224095c65013/profilepicturev2?displayname=Гнездилов Алексей Дмитриевич&amp;size=HR64x64"
                                alt="Аватар пользователя Гнездилов Алексей Дмитриевич." upn="Gnezd_mg41@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:cbf301cb-934e-4a99-b0dc-224095c65013/profilepicturev2?displayname=Гнездилов Алексей Дмитриевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:cbf301cb-934e-4a99-b0dc-224095c65013"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Гнездилов Алексей Дмитриевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 18:35:13">
         18:35
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content ts-see-more-btn-showing" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>str = 'выведите на экран полученный результат'<br> a = str[35:38]<br> print(a)
                                                <br> b = str[0:11]<br> print(b)
                                                <br> c = str[11:17]<br> print(c)
                                                <br> d = str[20:23]</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4" track-data="{messageID: '1671032113698', leftRailDirective: 'school-app-left-rail'}"
                                    track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody92">
            <!--Regular message template-->
            <div id="m1671032126340" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">string = "выведите на экран полученный результат" print(string[:11]) print(string[11:17]) print(stri…, ответ от пользователя Бровкин Михаил Сергеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:474bd458-f97e-4fb2-b697-3a616a81d012" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-284" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:474bd458-f97e-4fb2-b697-3a616a81d012/profilepicturev2?displayname=Бровкин Михаил Сергеевич&amp;size=HR64x64"
                                alt="Аватар пользователя Бровкин Михаил Сергеевич." upn="Brovk_gi63@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:474bd458-f97e-4fb2-b697-3a616a81d012/profilepicturev2?displayname=Бровкин Михаил Сергеевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:474bd458-f97e-4fb2-b697-3a616a81d012"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Бровкин Михаил Сергеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 18:35:26">
         18:35
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content ts-see-more-btn-showing" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div><pre style="font-size:14px;font-style:inherit;font-weight:inherit;margin-bottom:1rem;margin-left:0;margin-right:0;margin-top:1rem"><span style="font-size:11.3pt;font-style:inherit;font-weight:inherit">string <span style="font-style:inherit;font-weight:inherit">= </span><span style="font-style:inherit;font-weight:inherit">"выведите на экран полученный результат"
</span></span>print(string[:11])
<span style="font-size:11.3pt;font-style:inherit;font-weight:inherit"><span style="font-style:inherit;font-weight:inherit">print</span><span style="font-style:inherit;font-weight:inherit">(</span>string<span style="font-style:inherit;font-weight:inherit">[</span><span style="font-style:inherit;font-weight:inherit">11</span><span style="font-style:inherit;font-weight:inherit">:</span><span style="font-style:inherit;font-weight:inherit">17</span><span style="font-style:inherit;font-weight:inherit">])
</span><span style="font-style:inherit;font-weight:inherit">print</span><span style="font-style:inherit;font-weight:inherit">(</span>string<span style="font-style:inherit;font-weight:inherit">[</span><span style="font-style:inherit;font-weight:inherit">20</span><span style="font-style:inherit;font-weight:inherit">:</span><span style="font-style:inherit;font-weight:inherit">23</span><span style="font-style:inherit;font-weight:inherit">])
</span><span style="font-style:inherit;font-weight:inherit">print</span><span style="font-style:inherit;font-weight:inherit">(</span>string<span style="font-style:inherit;font-weight:inherit">[</span><span style="font-style:inherit;font-weight:inherit">35</span><span style="font-style:inherit;font-weight:inherit">:])</span></span></pre></div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4" track-data="{messageID: '1671032126340', leftRailDirective: 'school-app-left-rail'}"
                                    track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody93">
            <!--Regular message template-->
            <div id="m1671032129344" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">print(word[len(word)-3:]), ответ от пользователя Бобров Степан Алексеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-285" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178/profilepicturev2?displayname=Бобров Степан Алексеевич&amp;size=HR64x64"
                                alt="Аватар пользователя Бобров Степан Алексеевич." upn="Bobro_us85@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178/profilepicturev2?displayname=Бобров Степан Алексеевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Бобров Степан Алексеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 18:35:29">
         18:35
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>print(word[len(word)-3:])</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671032129344', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody94">
            <!--Regular message template-->
            <div id="m1671032136623" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">string='выведите на экран полученый результат' a=string[:12]&nbsp; print(a) a=string[11:18] print(a) a=st…, ответ от пользователя Кириллова Ульяна Станиславовна.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:2a34fd62-d738-454f-937d-b07f443f3147" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-286" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:2a34fd62-d738-454f-937d-b07f443f3147/profilepicturev2?displayname=Кириллова Ульяна Станиславовна&amp;size=HR64x64"
                                alt="Аватар пользователя Кириллова Ульяна Станиславовна." upn="Kiril_jc33@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:2a34fd62-d738-454f-937d-b07f443f3147/profilepicturev2?displayname=Кириллова Ульяна Станиславовна&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:2a34fd62-d738-454f-937d-b07f443f3147"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Кириллова Ульяна Станиславовна
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 18:35:36">
         18:35
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content ts-see-more-btn-showing" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>string='выведите на экран полученый результат'<br> a=string[:12]&nbsp;
                                                <br> print(a)
                                                <br> a=string[11:18]
                                                <br> print(a)
                                                <br> a=string[20:23]&nbsp;
                                                <br> print(a)
                                                <br> a=string[35:]
                                                <br> print(a)
                                                <br> так?
                                            </p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4" track-data="{messageID: '1671032136623', leftRailDirective: 'school-app-left-rail'}"
                                    track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody95">
            <!--Regular message template-->
            <div id="m1671032142194" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">Я скопировал не так : (, ответ от пользователя Гнездилов Алексей Дмитриевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:cbf301cb-934e-4a99-b0dc-224095c65013" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-287" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:cbf301cb-934e-4a99-b0dc-224095c65013/profilepicturev2?displayname=Гнездилов Алексей Дмитриевич&amp;size=HR64x64"
                                alt="Аватар пользователя Гнездилов Алексей Дмитриевич." upn="Gnezd_mg41@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:cbf301cb-934e-4a99-b0dc-224095c65013/profilepicturev2?displayname=Гнездилов Алексей Дмитриевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:cbf301cb-934e-4a99-b0dc-224095c65013"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Гнездилов Алексей Дмитриевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 18:35:42">
         18:35
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>Я скопировал не так : (</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671032142194', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody96">
            <!--Regular message template-->
            <div id="m1671032170496" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">c = "Ввыведите на экран полученный результат" v = c[:12] print(v) a = c[21:24] print(a) b = c[36:] p…, ответ от пользователя Сандульский Семён.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:3e008d96-8266-4c84-9869-a4efc34dee35" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-288" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:3e008d96-8266-4c84-9869-a4efc34dee35/profilepicturev2?displayname=Сандульский Семён&amp;size=HR64x64"
                                alt="Аватар пользователя Сандульский Семён." upn="Sandu_gs22@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:3e008d96-8266-4c84-9869-a4efc34dee35/profilepicturev2?displayname=Сандульский Семён&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:3e008d96-8266-4c84-9869-a4efc34dee35"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Сандульский Семён
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 18:36:10">
         18:36
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content ts-see-more-btn-showing" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>c = "Ввыведите на экран полученный результат"<br> v = c[:12]<br> print(v)
                                                <br> a = c[21:24]<br> print(a)
                                                <br> b = c[36:]<br> print(b)
                                            </p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4" track-data="{messageID: '1671032170496', leftRailDirective: 'school-app-left-rail'}"
                                    track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody97">
            <!--Regular message template-->
            <div id="m1671032197933" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">string = "выведите на экран полученный результат" print (string[:12]) print (string[11:17]) print (s…, ответ от пользователя Шестелева Евгения Евгеньевна.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:df95f487-a504-4955-b8e8-21e6501ff8ff" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-257" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:df95f487-a504-4955-b8e8-21e6501ff8ff/profilepicturev2?displayname=Шестелева Евгения Евгеньевна&amp;size=HR64x64"
                                alt="Аватар пользователя Шестелева Евгения Евгеньевна." upn="Shest_vz91@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:df95f487-a504-4955-b8e8-21e6501ff8ff/profilepicturev2?displayname=Шестелева Евгения Евгеньевна&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Нет на месте" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym away" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:df95f487-a504-4955-b8e8-21e6501ff8ff"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Шестелева Евгения Евгеньевна
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 18:36:37">
         18:36
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content ts-see-more-btn-showing" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>string = "выведите на экран полученный результат"<br> print (string[:12])<br> print (string[11:17])<br> print (string[20:23])<br> print (string[35:])</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4" track-data="{messageID: '1671032197933', leftRailDirective: 'school-app-left-rail'}"
                                    track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody98">
            <!--Regular message template-->
            <div id="m1671032217775" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions edited-message show-top-row keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">word = 'Выведите на экран полученный результат' print(f'{word[:12]}') print(f'{word[12:17]}') print(…, ответ от пользователя Сафронов Артём Игоревич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:96cb4cbd-2b1a-4ffe-b527-cf60e29332dd" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-258" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:96cb4cbd-2b1a-4ffe-b527-cf60e29332dd/profilepicturev2?displayname=Сафронов Артём Игоревич&amp;size=HR64x64"
                                alt="Аватар пользователя Сафронов Артём Игоревич." upn="Safro_wj68@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:96cb4cbd-2b1a-4ffe-b527-cf60e29332dd/profilepicturev2?displayname=Сафронов Артём Игоревич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="В сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym online" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:96cb4cbd-2b1a-4ffe-b527-cf60e29332dd"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Сафронов Артём Игоревич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 18:36:57">
         18:36
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="Изменено 14 дек., 18:38:24" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="Изменено 14 дек., 18:38:24" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content ts-see-more-btn-showing" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>word = 'Выведите на экран полученный результат'</p>
                                            <p>print(f'{​​word[:12]}​​')</p>
                                            <p>print(f'{​​word[12:17]}​​')</p>
                                            <p>print(f'{​​word[20:23]}​​')</p>
                                            <p>print(f'{​​word[35:]}​​')</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4" track-data="{messageID: '1671032217775', leftRailDirective: 'school-app-left-rail'}"
                                    track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody99">
            <!--Regular message template-->
            <div id="m1671032250710" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">print(string[:11]) print(string[11:17]) print(string[20:23]) print(string[35:]), ответ от пользователя Портас Константин Сергеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:21bf49d8-b9fb-4c73-8a04-97cf59e07012" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-259" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:21bf49d8-b9fb-4c73-8a04-97cf59e07012/profilepicturev2?displayname=Портас Константин Сергеевич&amp;size=HR64x64"
                                alt="Аватар пользователя Портас Константин Сергеевич." upn="Porta_yx78@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:21bf49d8-b9fb-4c73-8a04-97cf59e07012/profilepicturev2?displayname=Портас Константин Сергеевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:21bf49d8-b9fb-4c73-8a04-97cf59e07012"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Портас Константин Сергеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 18:37:30">
         18:37
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>print(string[:11])<br> print(string[11:17])
                                                <br> print(string[20:23])
                                                <br> print(string[35:])
                                            </p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671032250710', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody100">
            <!--Regular message template-->
            <div id="m1671032269435" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">c = "Ввыведите на экран полученный результат" v = c[12:18] print(v) v = c[:12] print(v) a = c[21:24]…, ответ от пользователя Сандульский Семён.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:3e008d96-8266-4c84-9869-a4efc34dee35" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-260" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:3e008d96-8266-4c84-9869-a4efc34dee35/profilepicturev2?displayname=Сандульский Семён&amp;size=HR64x64"
                                alt="Аватар пользователя Сандульский Семён." upn="Sandu_gs22@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:3e008d96-8266-4c84-9869-a4efc34dee35/profilepicturev2?displayname=Сандульский Семён&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:3e008d96-8266-4c84-9869-a4efc34dee35"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Сандульский Семён
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 18:37:49">
         18:37
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content ts-see-more-btn-showing" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>c = "Ввыведите на экран полученный результат"<br> v = c[12:18]<br> print(v)
                                                <br> v = c[:12]<br> print(v)
                                                <br> a = c[21:24]<br> print(a)
                                                <br> b = c[36:]<br> print(b)
                                                <br> &nbsp;
                                            </p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4" track-data="{messageID: '1671032269435', leftRailDirective: 'school-app-left-rail'}"
                                    track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody101">
            <!--Regular message template-->
            <div id="m1671032288256" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">str = 'выведите на экран полученный результат' print("выведите на") print(" экран") print("луч") pri…, ответ от пользователя Гнездилов Алексей Дмитриевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:cbf301cb-934e-4a99-b0dc-224095c65013" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-261" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:cbf301cb-934e-4a99-b0dc-224095c65013/profilepicturev2?displayname=Гнездилов Алексей Дмитриевич&amp;size=HR64x64"
                                alt="Аватар пользователя Гнездилов Алексей Дмитриевич." upn="Gnezd_mg41@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:cbf301cb-934e-4a99-b0dc-224095c65013/profilepicturev2?displayname=Гнездилов Алексей Дмитриевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:cbf301cb-934e-4a99-b0dc-224095c65013"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Гнездилов Алексей Дмитриевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 18:38:08">
         18:38
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content ts-see-more-btn-showing" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>str = 'выведите на экран полученный результат'<br> print("выведите на")<br> print(" экран")<br> print("луч")
                                                <br> print("тат")
                                            </p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4" track-data="{messageID: '1671032288256', leftRailDirective: 'school-app-left-rail'}"
                                    track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody102">
            <!--Regular message template-->
            <div id="m1671032289434" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">я уже понел, ответ от пользователя Сандульский Семён.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:3e008d96-8266-4c84-9869-a4efc34dee35" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-262" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:3e008d96-8266-4c84-9869-a4efc34dee35/profilepicturev2?displayname=Сандульский Семён&amp;size=HR64x64"
                                alt="Аватар пользователя Сандульский Семён." upn="Sandu_gs22@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:3e008d96-8266-4c84-9869-a4efc34dee35/profilepicturev2?displayname=Сандульский Семён&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:3e008d96-8266-4c84-9869-a4efc34dee35"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Сандульский Семён
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 18:38:09">
         18:38
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>я уже понел</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671032289434', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody103">
            <!--Regular message template-->
            <div id="m1671032295205" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">B), ответ от пользователя Гнездилов Алексей Дмитриевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:cbf301cb-934e-4a99-b0dc-224095c65013" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-263" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:cbf301cb-934e-4a99-b0dc-224095c65013/profilepicturev2?displayname=Гнездилов Алексей Дмитриевич&amp;size=HR64x64"
                                alt="Аватар пользователя Гнездилов Алексей Дмитриевич." upn="Gnezd_mg41@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:cbf301cb-934e-4a99-b0dc-224095c65013/profilepicturev2?displayname=Гнездилов Алексей Дмитриевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:cbf301cb-934e-4a99-b0dc-224095c65013"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Гнездилов Алексей Дмитриевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 18:38:15">
         18:38
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>B)</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671032295205', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody104">
            <!--Regular message template-->
            <div id="m1671032301991" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions edited-message show-top-row keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">это гениально, ответ от пользователя Бобров Степан Алексеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-264" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178/profilepicturev2?displayname=Бобров Степан Алексеевич&amp;size=HR64x64"
                                alt="Аватар пользователя Бобров Степан Алексеевич." upn="Bobro_us85@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178/profilepicturev2?displayname=Бобров Степан Алексеевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Бобров Степан Алексеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 18:38:21">
         18:38
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="Изменено 14 дек., 18:38:27" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="Изменено 14 дек., 18:38:27" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>это гениально</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671032301991', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody105">
            <!--Regular message template-->
            <div id="m1671032364023" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">string = " выведите на экран полученный результат" #отрезка строки #имя_строки[начало_отрезка: конец…, ответ от пользователя Тюргашкин Максим Михайлович.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:dc1f0536-bff6-4126-95db-a318aacc229f" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-265" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:dc1f0536-bff6-4126-95db-a318aacc229f/profilepicturev2?displayname=Тюргашкин Максим Михайлович&amp;size=HR64x64"
                                alt="Аватар пользователя Тюргашкин Максим Михайлович." upn="Tyurg_pe69@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:dc1f0536-bff6-4126-95db-a318aacc229f/profilepicturev2?displayname=Тюргашкин Максим Михайлович&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:dc1f0536-bff6-4126-95db-a318aacc229f"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Тюргашкин Максим Михайлович
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 18:39:24">
         18:39
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content ts-see-more-btn-showing" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div><pre style="font-size:9,8pt;font-style:inherit;font-weight:inherit">string = <span style="font-style:inherit;font-weight:inherit">" выведите на экран полученный результат"
</span><span style="font-style:inherit;font-weight:inherit">#отрезка строки
</span><span style="font-style:inherit;font-weight:inherit">#имя_строки[начало_отрезка: конец_отрезка:]
</span>a = string[:<span style="font-style:inherit;font-weight:inherit">12</span>]
b = string[<span style="font-style:inherit;font-weight:inherit">12</span>:<span style="font-style:inherit;font-weight:inherit">18</span>]
c = string[<span style="font-style:inherit;font-weight:inherit">21</span>:<span style="font-style:inherit;font-weight:inherit">24</span>]
d = string[<span style="font-style:inherit;font-weight:inherit">36</span>:<span style="font-style:inherit;font-weight:inherit">60</span>]
<span style="font-style:inherit;font-weight:inherit">print</span>(a)
<span style="font-style:inherit;font-weight:inherit">print</span>(b)
<span style="font-style:inherit;font-weight:inherit">print</span>(c)
<span style="font-style:inherit;font-weight:inherit">print</span>(d)

</pre></div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4" track-data="{messageID: '1671032364023', leftRailDirective: 'school-app-left-rail'}"
                                    track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->

        <!---->
        <tombstone message-view-model="messageViewModel" ng-if="messageViewModel.isDeleted">
            <div id="m1671032403823" data-tid="tombstone-m1671032403823" class="media acc-thread-focusable tombstone-media" tabindex="-1" aria-label="Сообщение удалено." ng-class="{ 'message-action-error' : tmbCtrl.messageViewModel.hasMessageActionFailed,
              'self' : tmbCtrl.messageViewModel.isFromMe }">
                <div class="media-left">
                    <div class="wrapper">
                        <div class="media-object">
                            <svg viewBox="-6 -6 32 32" role="presentation" focusable="false" class="app-svg icons-delete"><g class="icons-default-fill"><path class="icons-filled" d="M10 1.25C11.4346 1.25 12.6126 2.34848 12.7388 3.75019L17 3.75C17.4142 3.75 17.75 4.08579 17.75 4.5C17.75 4.8797 17.4678 5.19349 17.1018 5.24315L17 5.25H16.417L15.1499 16.2292C15.0335 17.2384 14.179 18 13.1631 18H6.83688C5.821 18 4.9665 17.2384 4.85006 16.2292L3.582 5.25H3C2.6203 5.25 2.30651 4.96785 2.25685 4.60177L2.25 4.5C2.25 4.1203 2.53215 3.80651 2.89823 3.75685L3 3.75L7.26119 3.75019C7.38741 2.34848 8.56542 1.25 10 1.25ZM8.5 7.5C8.25454 7.5 8.05039 7.65477 8.00806 7.85886L8 7.9375V14.0625L8.00806 14.1411C8.05039 14.3452 8.25454 14.5 8.5 14.5C8.74546 14.5 8.94961 14.3452 8.99194 14.1411L9 14.0625V7.9375L8.99194 7.85886C8.94961 7.65477 8.74546 7.5 8.5 7.5ZM11.5 7.5C11.2545 7.5 11.0504 7.65477 11.0081 7.85886L11 7.9375V14.0625L11.0081 14.1411C11.0504 14.3452 11.2545 14.5 11.5 14.5C11.7455 14.5 11.9496 14.3452 11.9919 14.1411L12 14.0625V7.9375L11.9919 7.85886C11.9496 7.65477 11.7455 7.5 11.5 7.5ZM10 2.75C9.39524 2.75 8.89079 3.17947 8.77499 3.75005H11.225C11.1092 3.17947 10.6048 2.75 10 2.75Z"></path><path class="icons-unfilled" d="M11.5 4C11.5 3.17157 10.8284 2.5 10 2.5C9.17157 2.5 8.5 3.17157 8.5 4H7.5C7.5 2.61929 8.61929 1.5 10 1.5C11.3807 1.5 12.5 2.61929 12.5 4H17C17.2761 4 17.5 4.22386 17.5 4.5C17.5 4.77614 17.2761 5 17 5H16.446L15.1499 16.2292C15.0335 17.2384 14.179 18 13.1631 18H6.83688C5.821 18 4.9665 17.2384 4.85006 16.2292L3.553 5H3C2.75454 5 2.55039 4.82312 2.50806 4.58988L2.5 4.5C2.5 4.22386 2.72386 4 3 4H11.5ZM15.438 5H4.561L5.84347 16.1146C5.90169 16.6192 6.32894 17 6.83688 17H13.1631C13.6711 17 14.0983 16.6192 14.1565 16.1146L15.438 5ZM8.5 7.5C8.74546 7.5 8.94961 7.65477 8.99194 7.85886L9 7.9375V14.0625C9 14.3041 8.77614 14.5 8.5 14.5C8.25454 14.5 8.05039 14.3452 8.00806 14.1411L8 14.0625V7.9375C8 7.69588 8.22386 7.5 8.5 7.5ZM11.5 7.5C11.7455 7.5 11.9496 7.65477 11.9919 7.85886L12 7.9375V14.0625C12 14.3041 11.7761 14.5 11.5 14.5C11.2545 14.5 11.0504 14.3452 11.0081 14.1411L11 14.0625V7.9375C11 7.69588 11.2239 7.5 11.5 7.5Z"></path></g></svg>
                        </div>
                    </div>
                </div>
                <div class="tombstone-body message-body message-body-width">
                    <div class="tombstone-content">
                        <!---->

                        <div class="deleted-message" id="deleted-message-1671032403823" role="heading" aria-level="5" data-tid="deletedMessage">
                            <!---->
                            <!---->
                            <div ng-if="!tmbCtrl.showDataSpillageMessage()">
                                <span>
           Сообщение удалено.
           <!---->
         </span>
                            </div>
                            <!---->
                        </div>
                    </div>
                    <!---->
                </div>
            </div>
        </tombstone>
        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody107">
            <!--Regular message template-->
            <div id="m1671032453755" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">я думал так и нужно, ответ от пользователя Портас Константин Сергеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:21bf49d8-b9fb-4c73-8a04-97cf59e07012" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-266" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:21bf49d8-b9fb-4c73-8a04-97cf59e07012/profilepicturev2?displayname=Портас Константин Сергеевич&amp;size=HR64x64"
                                alt="Аватар пользователя Портас Константин Сергеевич." upn="Porta_yx78@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:21bf49d8-b9fb-4c73-8a04-97cf59e07012/profilepicturev2?displayname=Портас Константин Сергеевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:21bf49d8-b9fb-4c73-8a04-97cf59e07012"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Портас Константин Сергеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 18:40:53">
         18:40
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>я думал так и нужно</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671032453755', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody108">
            <!--Regular message template-->
            <div id="m1671032544042" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">text = 'выведите на экран полученный результат' a = text[:11] b = text[12:18] c = text[20:23] d = te…, ответ от пользователя Потапов Максим Владиславович.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:a13c31ad-8f13-4d53-8b3f-24855a709370" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-267" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:a13c31ad-8f13-4d53-8b3f-24855a709370/profilepicturev2?displayname=Потапов Максим Владиславович&amp;size=HR64x64"
                                alt="Аватар пользователя Потапов Максим Владиславович." upn="Potap_qu77@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:a13c31ad-8f13-4d53-8b3f-24855a709370/profilepicturev2?displayname=Потапов Максим Владиславович&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:a13c31ad-8f13-4d53-8b3f-24855a709370"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Потапов Максим Владиславович
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 18:42:24">
         18:42
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content ts-see-more-btn-showing" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>text = 'выведите на экран полученный результат'<br> a = text[:11]<br> b = text[12:18]<br> c = text[20:23]<br> d = text[35:]<br> print(f'{​​a}​​ \n {​​b}​​ \n {​​c}​​ \n {​​d}​​')</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4" track-data="{messageID: '1671032544042', leftRailDirective: 'school-app-left-rail'}"
                                    track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody109">
            <!--Regular message template-->
            <div id="m1671032717670" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">только в начале и в конце получается?, ответ от пользователя Портас Константин Сергеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:21bf49d8-b9fb-4c73-8a04-97cf59e07012" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-268" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:21bf49d8-b9fb-4c73-8a04-97cf59e07012/profilepicturev2?displayname=Портас Константин Сергеевич&amp;size=HR64x64"
                                alt="Аватар пользователя Портас Константин Сергеевич." upn="Porta_yx78@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:21bf49d8-b9fb-4c73-8a04-97cf59e07012/profilepicturev2?displayname=Портас Константин Сергеевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:21bf49d8-b9fb-4c73-8a04-97cf59e07012"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Портас Константин Сергеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 18:45:17">
         18:45
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>только в начале и в конце получается?</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671032717670', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody110">
            <!--Regular message template-->
            <div id="m1671032781901" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">ураааа, ответ от пользователя Сафронов Артём Игоревич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:96cb4cbd-2b1a-4ffe-b527-cf60e29332dd" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-269" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:96cb4cbd-2b1a-4ffe-b527-cf60e29332dd/profilepicturev2?displayname=Сафронов Артём Игоревич&amp;size=HR64x64"
                                alt="Аватар пользователя Сафронов Артём Игоревич." upn="Safro_wj68@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:96cb4cbd-2b1a-4ffe-b527-cf60e29332dd/profilepicturev2?displayname=Сафронов Артём Игоревич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="В сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym online" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:96cb4cbd-2b1a-4ffe-b527-cf60e29332dd"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Сафронов Артём Игоревич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 18:46:21">
         18:46
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>ураааа</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671032781901', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody111">
            <!--Regular message template-->
            <div id="m1671032863662" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">тогда давайте еще cpython юзать, ответ от пользователя Бобров Степан Алексеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-270" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178/profilepicturev2?displayname=Бобров Степан Алексеевич&amp;size=HR64x64"
                                alt="Аватар пользователя Бобров Степан Алексеевич." upn="Bobro_us85@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178/profilepicturev2?displayname=Бобров Степан Алексеевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Бобров Степан Алексеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 18:47:43">
         18:47
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>тогда давайте еще cpython юзать</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671032863662', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody112">
            <!--Regular message template-->
            <div id="m1671032938613" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">А rfind находит последнюю, ответ от пользователя Петроченков Алексей Андреевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:4f1e392a-d25a-49ab-bbf5-4ced6b27efe8" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-271" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:4f1e392a-d25a-49ab-bbf5-4ced6b27efe8/profilepicturev2?displayname=Петроченков Алексей Андреевич&amp;size=HR64x64"
                                alt="Аватар пользователя Петроченков Алексей Андреевич." upn="Petro_wi51@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:4f1e392a-d25a-49ab-bbf5-4ced6b27efe8/profilepicturev2?displayname=Петроченков Алексей Андреевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:4f1e392a-d25a-49ab-bbf5-4ced6b27efe8"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Петроченков Алексей Андреевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 18:48:58">
         18:48
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>А rfind находит последнюю</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671032938613', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody113">
            <!--Regular message template-->
            <div id="m1671032938857" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">в go есть find_all, ответ от пользователя Бобров Степан Алексеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-272" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178/profilepicturev2?displayname=Бобров Степан Алексеевич&amp;size=HR64x64"
                                alt="Аватар пользователя Бобров Степан Алексеевич." upn="Bobro_us85@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178/profilepicturev2?displayname=Бобров Степан Алексеевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Бобров Степан Алексеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 18:48:58">
         18:48
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>в go есть find_all</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671032938857', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->

        <!---->
        <tombstone message-view-model="messageViewModel" ng-if="messageViewModel.isDeleted">
            <div id="m1671033105224" data-tid="tombstone-m1671033105224" class="media acc-thread-focusable tombstone-media" tabindex="-1" aria-label="Сообщение удалено." ng-class="{ 'message-action-error' : tmbCtrl.messageViewModel.hasMessageActionFailed,
              'self' : tmbCtrl.messageViewModel.isFromMe }">
                <div class="media-left">
                    <div class="wrapper">
                        <div class="media-object">
                            <svg viewBox="-6 -6 32 32" role="presentation" focusable="false" class="app-svg icons-delete"><g class="icons-default-fill"><path class="icons-filled" d="M10 1.25C11.4346 1.25 12.6126 2.34848 12.7388 3.75019L17 3.75C17.4142 3.75 17.75 4.08579 17.75 4.5C17.75 4.8797 17.4678 5.19349 17.1018 5.24315L17 5.25H16.417L15.1499 16.2292C15.0335 17.2384 14.179 18 13.1631 18H6.83688C5.821 18 4.9665 17.2384 4.85006 16.2292L3.582 5.25H3C2.6203 5.25 2.30651 4.96785 2.25685 4.60177L2.25 4.5C2.25 4.1203 2.53215 3.80651 2.89823 3.75685L3 3.75L7.26119 3.75019C7.38741 2.34848 8.56542 1.25 10 1.25ZM8.5 7.5C8.25454 7.5 8.05039 7.65477 8.00806 7.85886L8 7.9375V14.0625L8.00806 14.1411C8.05039 14.3452 8.25454 14.5 8.5 14.5C8.74546 14.5 8.94961 14.3452 8.99194 14.1411L9 14.0625V7.9375L8.99194 7.85886C8.94961 7.65477 8.74546 7.5 8.5 7.5ZM11.5 7.5C11.2545 7.5 11.0504 7.65477 11.0081 7.85886L11 7.9375V14.0625L11.0081 14.1411C11.0504 14.3452 11.2545 14.5 11.5 14.5C11.7455 14.5 11.9496 14.3452 11.9919 14.1411L12 14.0625V7.9375L11.9919 7.85886C11.9496 7.65477 11.7455 7.5 11.5 7.5ZM10 2.75C9.39524 2.75 8.89079 3.17947 8.77499 3.75005H11.225C11.1092 3.17947 10.6048 2.75 10 2.75Z"></path><path class="icons-unfilled" d="M11.5 4C11.5 3.17157 10.8284 2.5 10 2.5C9.17157 2.5 8.5 3.17157 8.5 4H7.5C7.5 2.61929 8.61929 1.5 10 1.5C11.3807 1.5 12.5 2.61929 12.5 4H17C17.2761 4 17.5 4.22386 17.5 4.5C17.5 4.77614 17.2761 5 17 5H16.446L15.1499 16.2292C15.0335 17.2384 14.179 18 13.1631 18H6.83688C5.821 18 4.9665 17.2384 4.85006 16.2292L3.553 5H3C2.75454 5 2.55039 4.82312 2.50806 4.58988L2.5 4.5C2.5 4.22386 2.72386 4 3 4H11.5ZM15.438 5H4.561L5.84347 16.1146C5.90169 16.6192 6.32894 17 6.83688 17H13.1631C13.6711 17 14.0983 16.6192 14.1565 16.1146L15.438 5ZM8.5 7.5C8.74546 7.5 8.94961 7.65477 8.99194 7.85886L9 7.9375V14.0625C9 14.3041 8.77614 14.5 8.5 14.5C8.25454 14.5 8.05039 14.3452 8.00806 14.1411L8 14.0625V7.9375C8 7.69588 8.22386 7.5 8.5 7.5ZM11.5 7.5C11.7455 7.5 11.9496 7.65477 11.9919 7.85886L12 7.9375V14.0625C12 14.3041 11.7761 14.5 11.5 14.5C11.2545 14.5 11.0504 14.3452 11.0081 14.1411L11 14.0625V7.9375C11 7.69588 11.2239 7.5 11.5 7.5Z"></path></g></svg>
                        </div>
                    </div>
                </div>
                <div class="tombstone-body message-body message-body-width">
                    <div class="tombstone-content">
                        <!---->

                        <div class="deleted-message" id="deleted-message-1671033105224" role="heading" aria-level="5" data-tid="deletedMessage">
                            <!---->
                            <!---->
                            <div ng-if="!tmbCtrl.showDataSpillageMessage()">
                                <span>
           Сообщение удалено.
           <!---->
         </span>
                            </div>
                            <!---->
                        </div>
                    </div>
                    <!---->
                </div>
            </div>
        </tombstone>
        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody115">
            <!--Regular message template-->
            <div id="m1671033118930" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">mood, ответ от пользователя Гнездилов Алексей Дмитриевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:cbf301cb-934e-4a99-b0dc-224095c65013" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-273" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:cbf301cb-934e-4a99-b0dc-224095c65013/profilepicturev2?displayname=Гнездилов Алексей Дмитриевич&amp;size=HR64x64"
                                alt="Аватар пользователя Гнездилов Алексей Дмитриевич." upn="Gnezd_mg41@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:cbf301cb-934e-4a99-b0dc-224095c65013/profilepicturev2?displayname=Гнездилов Алексей Дмитриевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:cbf301cb-934e-4a99-b0dc-224095c65013"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Гнездилов Алексей Дмитриевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 18:51:58">
         18:51
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>mood</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671033118930', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody116">
            <!--Regular message template-->
            <div id="m1671033127800" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like self" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">Маша собирала яблоки в горах Кавказа., ответ от пользователя Калинин Максим Игоревич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:eda3c4a8-fbf3-496d-99a0-af83f7769e9c" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-274" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object default-profile-image" ng-class="$ctrl.additionalCssClass" ng-src="blob:https://teams.microsoft.com/4786931a-51c4-479f-a8a7-a2919836b78f"
                                alt="Аватар пользователя Калинин Максим Игоревич." upn="kalinin_maks@t.top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="blob:https://teams.microsoft.com/4786931a-51c4-479f-a8a7-a2919836b78f" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="В сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym online" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:eda3c4a8-fbf3-496d-99a0-af83f7769e9c"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Калинин Максим Игоревич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 18:52:07">
         18:52
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p><span style="font-size:14px;font-weight:inherit;font-style:inherit"><span style="font-style:inherit;font-weight:inherit">Маша собирала яблоки в горах Кавказа.</span></span>
                                            </p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeLess" track-panel-type="4" track-data="{messageID: '1671033127800', leftRailDirective: 'school-app-left-rail'}"
                                    track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody117">
            <!--Regular message template-->
            <div id="m1671033322618" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">str = 'Маша собирала яблоки в горах Кавказа.' while 1: &nbsp;&nbsp;a = input(" ") &nbsp;&nbsp;if str.find(a) != -1: &nbsp;&nbsp;&nbsp;&nbsp;…, ответ от пользователя Гнездилов Алексей Дмитриевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:cbf301cb-934e-4a99-b0dc-224095c65013" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-247" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:cbf301cb-934e-4a99-b0dc-224095c65013/profilepicturev2?displayname=Гнездилов Алексей Дмитриевич&amp;size=HR64x64"
                                alt="Аватар пользователя Гнездилов Алексей Дмитриевич." upn="Gnezd_mg41@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:cbf301cb-934e-4a99-b0dc-224095c65013/profilepicturev2?displayname=Гнездилов Алексей Дмитриевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:cbf301cb-934e-4a99-b0dc-224095c65013"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Гнездилов Алексей Дмитриевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 18:55:22">
         18:55
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content ts-see-more-btn-showing" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>str = 'Маша собирала яблоки в горах Кавказа.'<br> while 1:<br>
                                                <span><span>&nbsp;&nbsp;</span>a = input(" ")</span><br>
                                                <span><span>&nbsp;&nbsp;</span>if str.find(a) != -1:</span><br>
                                                <span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span>break</span>
                                            </p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4" track-data="{messageID: '1671033322618', leftRailDirective: 'school-app-left-rail'}"
                                    track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody118">
            <!--Regular message template-->
            <div id="m1671033398473" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">В find можно ещё 1 аргоумент добавить. Это он найдёт другое совпадение?, ответ от пользователя Петроченков Алексей Андреевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:4f1e392a-d25a-49ab-bbf5-4ced6b27efe8" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-248" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:4f1e392a-d25a-49ab-bbf5-4ced6b27efe8/profilepicturev2?displayname=Петроченков Алексей Андреевич&amp;size=HR64x64"
                                alt="Аватар пользователя Петроченков Алексей Андреевич." upn="Petro_wi51@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:4f1e392a-d25a-49ab-bbf5-4ced6b27efe8/profilepicturev2?displayname=Петроченков Алексей Андреевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:4f1e392a-d25a-49ab-bbf5-4ced6b27efe8"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Петроченков Алексей Андреевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 18:56:38">
         18:56
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>В find можно ещё 1 аргоумент добавить. Это он найдёт другое совпадение?</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671033398473', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody119">
            <!--Regular message template-->
            <div id="m1671033469948" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions merge-bubble keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">Оо. Спасибо, ответ от пользователя Петроченков Алексей Андреевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Петроченков Алексей Андреевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime ng-hide" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 18:57:49">
         18:57
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>Оо. Спасибо</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671033469948', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody120">
            <!--Regular message template-->
            <div id="m1671033477524" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions edited-message show-top-row keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">a = 'Маша собирала яблоки в горах Кавказа.' print(a) find = a.find(input("Что искать?")) while find …, ответ от пользователя Сандульский Семён.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:3e008d96-8266-4c84-9869-a4efc34dee35" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-249" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:3e008d96-8266-4c84-9869-a4efc34dee35/profilepicturev2?displayname=Сандульский Семён&amp;size=HR64x64"
                                alt="Аватар пользователя Сандульский Семён." upn="Sandu_gs22@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:3e008d96-8266-4c84-9869-a4efc34dee35/profilepicturev2?displayname=Сандульский Семён&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:3e008d96-8266-4c84-9869-a4efc34dee35"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Сандульский Семён
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 18:57:57">
         18:57
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="Изменено 14 дек., 18:58:11" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="Изменено 14 дек., 18:58:11" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content ts-see-more-btn-showing" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>a = 'Маша собирала яблоки в горах Кавказа.'<br> print(a)
                                                <br> find = a.find(input("Что искать?"))<br> while find == -1:<br> &nbsp;&nbsp;&nbsp; find = a.find(input("Что искать?"))<br> &nbsp;&nbsp;&nbsp;&nbsp;
                                                <br> &nbsp;
                                            </p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4" track-data="{messageID: '1671033477524', leftRailDirective: 'school-app-left-rail'}"
                                    track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody121">
            <!--Regular message template-->
            <div id="m1671033510213" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">str='Маша собирала яблоки в горах Кавказа' while True: &nbsp;&nbsp;&nbsp;&nbsp;word=input('Что искать? ') &nbsp;&nbsp;&nbsp;&nbsp;if str.fin…, ответ от пользователя Портас Константин Сергеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:21bf49d8-b9fb-4c73-8a04-97cf59e07012" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-250" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:21bf49d8-b9fb-4c73-8a04-97cf59e07012/profilepicturev2?displayname=Портас Константин Сергеевич&amp;size=HR64x64"
                                alt="Аватар пользователя Портас Константин Сергеевич." upn="Porta_yx78@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:21bf49d8-b9fb-4c73-8a04-97cf59e07012/profilepicturev2?displayname=Портас Константин Сергеевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:21bf49d8-b9fb-4c73-8a04-97cf59e07012"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Портас Константин Сергеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 18:58:30">
         18:58
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content ts-see-more-btn-showing" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>str='Маша собирала яблоки в горах Кавказа'<br> while True:<br>
                                                <span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span>word=input('Что искать? ')</span><br>
                                                <span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span>if str.find(word.strip())!=-1:</span><br>
                                                <span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>print('найдено!')</span><br>
                                                <span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>break</span>
                                            </p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4" track-data="{messageID: '1671033510213', leftRailDirective: 'school-app-left-rail'}"
                                    track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody122">
            <!--Regular message template-->
            <div id="m1671033534237" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions merge-bubble keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">ничего же если просто переписал, ответ от пользователя Портас Константин Сергеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Портас Константин Сергеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime ng-hide" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 18:58:54">
         18:58
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>ничего же если просто переписал</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671033534237', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->

        <!---->
        <tombstone message-view-model="messageViewModel" ng-if="messageViewModel.isDeleted">
            <div id="m1671033698996" data-tid="tombstone-m1671033698996" class="media acc-thread-focusable tombstone-media" tabindex="-1" aria-label="Сообщение удалено." ng-class="{ 'message-action-error' : tmbCtrl.messageViewModel.hasMessageActionFailed,
              'self' : tmbCtrl.messageViewModel.isFromMe }">
                <div class="media-left">
                    <div class="wrapper">
                        <div class="media-object">
                            <svg viewBox="-6 -6 32 32" role="presentation" focusable="false" class="app-svg icons-delete"><g class="icons-default-fill"><path class="icons-filled" d="M10 1.25C11.4346 1.25 12.6126 2.34848 12.7388 3.75019L17 3.75C17.4142 3.75 17.75 4.08579 17.75 4.5C17.75 4.8797 17.4678 5.19349 17.1018 5.24315L17 5.25H16.417L15.1499 16.2292C15.0335 17.2384 14.179 18 13.1631 18H6.83688C5.821 18 4.9665 17.2384 4.85006 16.2292L3.582 5.25H3C2.6203 5.25 2.30651 4.96785 2.25685 4.60177L2.25 4.5C2.25 4.1203 2.53215 3.80651 2.89823 3.75685L3 3.75L7.26119 3.75019C7.38741 2.34848 8.56542 1.25 10 1.25ZM8.5 7.5C8.25454 7.5 8.05039 7.65477 8.00806 7.85886L8 7.9375V14.0625L8.00806 14.1411C8.05039 14.3452 8.25454 14.5 8.5 14.5C8.74546 14.5 8.94961 14.3452 8.99194 14.1411L9 14.0625V7.9375L8.99194 7.85886C8.94961 7.65477 8.74546 7.5 8.5 7.5ZM11.5 7.5C11.2545 7.5 11.0504 7.65477 11.0081 7.85886L11 7.9375V14.0625L11.0081 14.1411C11.0504 14.3452 11.2545 14.5 11.5 14.5C11.7455 14.5 11.9496 14.3452 11.9919 14.1411L12 14.0625V7.9375L11.9919 7.85886C11.9496 7.65477 11.7455 7.5 11.5 7.5ZM10 2.75C9.39524 2.75 8.89079 3.17947 8.77499 3.75005H11.225C11.1092 3.17947 10.6048 2.75 10 2.75Z"></path><path class="icons-unfilled" d="M11.5 4C11.5 3.17157 10.8284 2.5 10 2.5C9.17157 2.5 8.5 3.17157 8.5 4H7.5C7.5 2.61929 8.61929 1.5 10 1.5C11.3807 1.5 12.5 2.61929 12.5 4H17C17.2761 4 17.5 4.22386 17.5 4.5C17.5 4.77614 17.2761 5 17 5H16.446L15.1499 16.2292C15.0335 17.2384 14.179 18 13.1631 18H6.83688C5.821 18 4.9665 17.2384 4.85006 16.2292L3.553 5H3C2.75454 5 2.55039 4.82312 2.50806 4.58988L2.5 4.5C2.5 4.22386 2.72386 4 3 4H11.5ZM15.438 5H4.561L5.84347 16.1146C5.90169 16.6192 6.32894 17 6.83688 17H13.1631C13.6711 17 14.0983 16.6192 14.1565 16.1146L15.438 5ZM8.5 7.5C8.74546 7.5 8.94961 7.65477 8.99194 7.85886L9 7.9375V14.0625C9 14.3041 8.77614 14.5 8.5 14.5C8.25454 14.5 8.05039 14.3452 8.00806 14.1411L8 14.0625V7.9375C8 7.69588 8.22386 7.5 8.5 7.5ZM11.5 7.5C11.7455 7.5 11.9496 7.65477 11.9919 7.85886L12 7.9375V14.0625C12 14.3041 11.7761 14.5 11.5 14.5C11.2545 14.5 11.0504 14.3452 11.0081 14.1411L11 14.0625V7.9375C11 7.69588 11.2239 7.5 11.5 7.5Z"></path></g></svg>
                        </div>
                    </div>
                </div>
                <div class="tombstone-body message-body message-body-width">
                    <div class="tombstone-content">
                        <!---->

                        <div class="deleted-message" id="deleted-message-1671033698996" role="heading" aria-level="5" data-tid="deletedMessage">
                            <!---->
                            <!---->
                            <div ng-if="!tmbCtrl.showDataSpillageMessage()">
                                <span>
           Сообщение удалено.
           <!---->
         </span>
                            </div>
                            <!---->
                        </div>
                    </div>
                    <!---->
                </div>
            </div>
        </tombstone>
        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody124">
            <!--Regular message template-->
            <div id="m1671033719365" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">string = 'Маша собирала яблоки в горах Кавказа.' sim = input('Введите символ для поиска: ') b = st…, ответ от пользователя Петроченков Алексей Андреевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:4f1e392a-d25a-49ab-bbf5-4ced6b27efe8" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-251" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:4f1e392a-d25a-49ab-bbf5-4ced6b27efe8/profilepicturev2?displayname=Петроченков Алексей Андреевич&amp;size=HR64x64"
                                alt="Аватар пользователя Петроченков Алексей Андреевич." upn="Petro_wi51@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:4f1e392a-d25a-49ab-bbf5-4ced6b27efe8/profilepicturev2?displayname=Петроченков Алексей Андреевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:4f1e392a-d25a-49ab-bbf5-4ced6b27efe8"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Петроченков Алексей Андреевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 19:01:59">
         19:01
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content ts-see-more-btn-showing" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p><span style="font-size:14px;font-weight:inherit;font-style:inherit"><span style="font-style:inherit;font-weight:inherit">string</span><span style="font-style:inherit;font-weight:inherit"> = </span><span style="font-style:inherit;font-weight:inherit">'Маша собирала яблоки в горах Кавказа.'</span></span>
                                            </p>
                                            <p><span style="font-size:14px;font-weight:inherit;font-style:inherit"><span style="font-style:inherit;font-weight:inherit">sim</span><span style="font-style:inherit;font-weight:inherit"> = </span><span style="font-style:inherit;font-weight:inherit">input</span>
                                                <span
                                                    style="font-style:inherit;font-weight:inherit">(</span><span style="font-style:inherit;font-weight:inherit">'Введите символ для поиска: '</span><span style="font-style:inherit;font-weight:inherit">)</span></span>
                                            </p>
                                            <p><br>
                                            </p>
                                            <p><span style="font-size:14px;font-weight:inherit;font-style:inherit"><span style="font-style:inherit;font-weight:inherit">b</span><span style="font-style:inherit;font-weight:inherit"> = </span><span style="font-style:inherit;font-weight:inherit">string</span>
                                                <span
                                                    style="font-style:inherit;font-weight:inherit">.</span><span style="font-style:inherit;font-weight:inherit">find</span><span style="font-style:inherit;font-weight:inherit">(</span><span style="font-style:inherit;font-weight:inherit">sim</span><span style="font-style:inherit;font-weight:inherit">)</span></span>
                                            </p>
                                            <p><span style="font-size:14px;font-weight:inherit;font-style:inherit"><span style="font-style:inherit;font-weight:inherit">if</span><span style="font-style:inherit;font-weight:inherit"> </span><span style="font-style:inherit;font-weight:inherit">b</span>
                                                <span
                                                    style="font-style:inherit;font-weight:inherit"> != -</span><span style="font-style:inherit;font-weight:inherit">1</span><span style="font-style:inherit;font-weight:inherit">:</span></span>
                                            </p>
                                            <p><span style="font-size:14px;font-weight:inherit;font-style:inherit"><span style="font-style:inherit;font-weight:inherit">&nbsp; &nbsp; </span><span style="font-style:inherit;font-weight:inherit">print</span>
                                                <span
                                                    style="font-style:inherit;font-weight:inherit">(</span><span style="font-style:inherit;font-weight:inherit">string</span><span style="font-style:inherit;font-weight:inherit">.</span><span style="font-style:inherit;font-weight:inherit">find</span>
                                                    <span
                                                        style="font-style:inherit;font-weight:inherit">(</span><span style="font-style:inherit;font-weight:inherit">sim</span><span style="font-style:inherit;font-weight:inherit">, </span><span style="font-style:inherit;font-weight:inherit">b</span>
                                                        <span
                                                            style="font-style:inherit;font-weight:inherit">+</span><span style="font-style:inherit;font-weight:inherit">1</span><span style="font-style:inherit;font-weight:inherit">))</span></span>
                                            </p>
                                            <p><span style="font-size:14px;font-weight:inherit;font-style:inherit"><span style="font-style:inherit;font-weight:inherit">else</span><span style="font-style:inherit;font-weight:inherit">:</span></span>
                                            </p>
                                            <p><span style="font-size:14px;font-weight:inherit;font-style:inherit"><span style="font-style:inherit;font-weight:inherit">&nbsp; &nbsp; </span><span style="font-style:inherit;font-weight:inherit">print</span>
                                                <span
                                                    style="font-style:inherit;font-weight:inherit">(</span><span style="font-style:inherit;font-weight:inherit">'Не найдено'</span><span style="font-style:inherit;font-weight:inherit">)</span></span>
                                            </p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4" track-data="{messageID: '1671033719365', leftRailDirective: 'school-app-left-rail'}"
                                    track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody125">
            <!--Regular message template-->
            <div id="m1671033739664" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">получается задачку с поиском нулей в факториале&nbsp;, ответ от пользователя Бобров Степан Алексеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-252" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178/profilepicturev2?displayname=Бобров Степан Алексеевич&amp;size=HR64x64"
                                alt="Аватар пользователя Бобров Степан Алексеевич." upn="Bobro_us85@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178/profilepicturev2?displayname=Бобров Степан Алексеевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Бобров Степан Алексеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 19:02:19">
         19:02
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>получается задачку с поиском нулей в факториале&nbsp;</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671033739664', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody126">
            <!--Regular message template-->
            <div id="m1671033757729" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions merge-bubble keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">можно еще быстрее сделать, ответ от пользователя Бобров Степан Алексеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Бобров Степан Алексеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime ng-hide" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 19:02:37">
         19:02
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>можно еще быстрее сделать</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671033757729', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody127">
            <!--Regular message template-->
            <div id="m1671033899586" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">У меня ошибку выдаёт, ответ от пользователя Гнездилов Алексей Дмитриевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:cbf301cb-934e-4a99-b0dc-224095c65013" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-253" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:cbf301cb-934e-4a99-b0dc-224095c65013/profilepicturev2?displayname=Гнездилов Алексей Дмитриевич&amp;size=HR64x64"
                                alt="Аватар пользователя Гнездилов Алексей Дмитриевич." upn="Gnezd_mg41@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:cbf301cb-934e-4a99-b0dc-224095c65013/profilepicturev2?displayname=Гнездилов Алексей Дмитриевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:cbf301cb-934e-4a99-b0dc-224095c65013"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Гнездилов Алексей Дмитриевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 19:04:59">
         19:04
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>У меня ошибку выдаёт</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671033899586', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody128">
            <!--Regular message template-->
            <div id="m1671033915720" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions merge-bubble keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">str = 'Маша собирала яблоки в горах Кавказа.' a = input(" ") b = str.find(a) str.replace(b, 'a') c =…, ответ от пользователя Гнездилов Алексей Дмитриевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Гнездилов Алексей Дмитриевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime ng-hide" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 19:05:15">
         19:05
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content ts-see-more-btn-showing" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>str = 'Маша собирала яблоки в горах Кавказа.'<br> a = input(" ")<br> b = str.find(a)<br> str.replace(b, 'a')<br> c = str.find(a)<br> print(c)
                                            </p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4" track-data="{messageID: '1671033915720', leftRailDirective: 'school-app-left-rail'}"
                                    track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody129">
            <!--Regular message template-->
            <div id="m1671033932257" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">"a", ответ от пользователя Бобров Степан Алексеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-254" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178/profilepicturev2?displayname=Бобров Степан Алексеевич&amp;size=HR64x64"
                                alt="Аватар пользователя Бобров Степан Алексеевич." upn="Bobro_us85@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178/profilepicturev2?displayname=Бобров Степан Алексеевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Бобров Степан Алексеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 19:05:32">
         19:05
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>"a"</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671033932257', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody130">
            <!--Regular message template-->
            <div id="m1671033934740" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions merge-bubble keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">a, ответ от пользователя Бобров Степан Алексеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Бобров Степан Алексеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime ng-hide" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 19:05:34">
         19:05
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>a</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671033934740', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody131">
            <!--Regular message template-->
            <div id="m1671033941876" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions merge-bubble keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">не 'a', ответ от пользователя Бобров Степан Алексеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Бобров Степан Алексеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime ng-hide" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 19:05:41">
         19:05
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>не 'a'</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671033941876', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody132">
            <!--Regular message template-->
            <div id="m1671033946351" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions merge-bubble keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">а a, ответ от пользователя Бобров Степан Алексеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Бобров Степан Алексеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime ng-hide" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 19:05:46">
         19:05
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>а a</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671033946351', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody133">
            <!--Regular message template-->
            <div id="m1671033969624" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">Ааааа, ответ от пользователя Гнездилов Алексей Дмитриевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:cbf301cb-934e-4a99-b0dc-224095c65013" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-255" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:cbf301cb-934e-4a99-b0dc-224095c65013/profilepicturev2?displayname=Гнездилов Алексей Дмитриевич&amp;size=HR64x64"
                                alt="Аватар пользователя Гнездилов Алексей Дмитриевич." upn="Gnezd_mg41@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:cbf301cb-934e-4a99-b0dc-224095c65013/profilepicturev2?displayname=Гнездилов Алексей Дмитриевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:cbf301cb-934e-4a99-b0dc-224095c65013"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Гнездилов Алексей Дмитриевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 19:06:09">
         19:06
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>Ааааа</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671033969624', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody134">
            <!--Regular message template-->
            <div id="m1671033973445" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions merge-bubble keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">Понял, ответ от пользователя Гнездилов Алексей Дмитриевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Гнездилов Алексей Дмитриевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime ng-hide" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 19:06:13">
         19:06
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>Понял</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671033973445', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody135">
            <!--Regular message template-->
            <div id="m1671034002612" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">str='Маша собирала яблоки в горах Кавказа' lit=input('Какую букву искать?') print(str.find(lit)), ответ от пользователя Портас Константин Сергеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:21bf49d8-b9fb-4c73-8a04-97cf59e07012" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-256" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:21bf49d8-b9fb-4c73-8a04-97cf59e07012/profilepicturev2?displayname=Портас Константин Сергеевич&amp;size=HR64x64"
                                alt="Аватар пользователя Портас Константин Сергеевич." upn="Porta_yx78@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:21bf49d8-b9fb-4c73-8a04-97cf59e07012/profilepicturev2?displayname=Портас Константин Сергеевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:21bf49d8-b9fb-4c73-8a04-97cf59e07012"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Портас Константин Сергеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 19:06:42">
         19:06
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>str='Маша собирала яблоки в горах Кавказа'<br> lit=input('Какую букву искать?')<br> print(str.find(lit))
                                            </p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671034002612', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody136">
            <!--Regular message template-->
            <div id="m1671034010095" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions merge-bubble keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">дальше этого не могу, ответ от пользователя Портас Константин Сергеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Портас Константин Сергеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime ng-hide" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 19:06:50">
         19:06
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>дальше этого не могу</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671034010095', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody137">
            <!--Regular message template-->
            <div id="m1671034025535" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like merge-bubble" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">не получается ничего, ответ от пользователя Портас Константин Сергеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Портас Константин Сергеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime ng-hide" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 19:07:05">
         19:07
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>не получается ничего</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671034025535', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody138">
            <!--Regular message template-->
            <div id="m1671034044366" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">я понял, ответ от пользователя Бровкин Михаил Сергеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:474bd458-f97e-4fb2-b697-3a616a81d012" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-234" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:474bd458-f97e-4fb2-b697-3a616a81d012/profilepicturev2?displayname=Бровкин Михаил Сергеевич&amp;size=HR64x64"
                                alt="Аватар пользователя Бровкин Михаил Сергеевич." upn="Brovk_gi63@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:474bd458-f97e-4fb2-b697-3a616a81d012/profilepicturev2?displayname=Бровкин Михаил Сергеевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:474bd458-f97e-4fb2-b697-3a616a81d012"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Бровкин Михаил Сергеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 19:07:24">
         19:07
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>я понял</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671034044366', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody139">
            <!--Regular message template-->
            <div id="m1671034258901" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">&nbsp;я что то не соображаю , можете объяснить что требуется в задаче?, ответ от пользователя Сандульский Семён.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:3e008d96-8266-4c84-9869-a4efc34dee35" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-235" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:3e008d96-8266-4c84-9869-a4efc34dee35/profilepicturev2?displayname=Сандульский Семён&amp;size=HR64x64"
                                alt="Аватар пользователя Сандульский Семён." upn="Sandu_gs22@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:3e008d96-8266-4c84-9869-a4efc34dee35/profilepicturev2?displayname=Сандульский Семён&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:3e008d96-8266-4c84-9869-a4efc34dee35"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Сандульский Семён
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 19:10:58">
         19:10
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>&nbsp;я что то не соображаю , можете объяснить что требуется в задаче?</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671034258901', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody140">
            <!--Regular message template-->
            <div id="m1671034289466" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions edited-message show-top-row keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">
                    string = "Маша собирала яблоки в горах Кавказа." word = input("Введите подстроку: ") find = string.…, ответ от пользователя Бровкин Михаил Сергеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:474bd458-f97e-4fb2-b697-3a616a81d012" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-236" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:474bd458-f97e-4fb2-b697-3a616a81d012/profilepicturev2?displayname=Бровкин Михаил Сергеевич&amp;size=HR64x64"
                                alt="Аватар пользователя Бровкин Михаил Сергеевич." upn="Brovk_gi63@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:474bd458-f97e-4fb2-b697-3a616a81d012/profilepicturev2?displayname=Бровкин Михаил Сергеевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:474bd458-f97e-4fb2-b697-3a616a81d012"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Бровкин Михаил Сергеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 19:11:29">
         19:11
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="Изменено 14 дек., 19:12:11" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="Изменено 14 дек., 19:12:11" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content ts-see-more-btn-showing" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <div>
                                                <pre><span style="font-size:11.3pt;font-style:inherit;font-weight:inherit">string <span style="font-style:inherit;font-weight:inherit">= </span><span style="font-style:inherit;font-weight:inherit">"Маша собирала яблоки в горах Кавказа."
</span>word <span style="font-style:inherit;font-weight:inherit">= </span><span style="font-style:inherit;font-weight:inherit">input</span><span style="font-style:inherit;font-weight:inherit">(</span><span style="font-style:inherit;font-weight:inherit">"Введите подстроку: "</span><span style="font-style:inherit;font-weight:inherit">)
</span>find <span style="font-style:inherit;font-weight:inherit">= </span>string<span style="font-style:inherit;font-weight:inherit">.</span><span style="font-style:inherit;font-weight:inherit">find</span><span style="font-style:inherit;font-weight:inherit">(</span>word<span style="font-style:inherit;font-weight:inherit">)
</span>
string <span style="font-style:inherit;font-weight:inherit">= </span>string<span style="font-style:inherit;font-weight:inherit">[</span>find <span style="font-style:inherit;font-weight:inherit">+ </span><span style="font-style:inherit;font-weight:inherit">1</span><span style="font-style:inherit;font-weight:inherit">:]
</span>
<span style="font-style:inherit;font-weight:inherit">print</span><span style="font-style:inherit;font-weight:inherit">(</span>string<span style="font-style:inherit;font-weight:inherit">.</span><span style="font-style:inherit;font-weight:inherit">find</span><span style="font-style:inherit;font-weight:inherit">(</span>word<span style="font-style:inherit;font-weight:inherit">) + </span>find+1<span style="font-style:inherit;font-weight:inherit">)</span></span></pre>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4" track-data="{messageID: '1671034289466', leftRailDirective: 'school-app-left-rail'}"
                                    track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody141">
            <!--Regular message template-->
            <div id="m1671034292379" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions merge-bubble keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">Вроде так, ответ от пользователя Бровкин Михаил Сергеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Бровкин Михаил Сергеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime ng-hide" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 19:11:32">
         19:11
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>Вроде так</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671034292379', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody142">
            <!--Regular message template-->
            <div id="m1671034319167" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">
                    string = 'Маша собирала яблоки в горах Кавказа.' sim = input('Введите символ для поиска: ') z = ''…, ответ от пользователя Петроченков Алексей Андреевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:4f1e392a-d25a-49ab-bbf5-4ced6b27efe8" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-237" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:4f1e392a-d25a-49ab-bbf5-4ced6b27efe8/profilepicturev2?displayname=Петроченков Алексей Андреевич&amp;size=HR64x64"
                                alt="Аватар пользователя Петроченков Алексей Андреевич." upn="Petro_wi51@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:4f1e392a-d25a-49ab-bbf5-4ced6b27efe8/profilepicturev2?displayname=Петроченков Алексей Андреевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:4f1e392a-d25a-49ab-bbf5-4ced6b27efe8"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Петроченков Алексей Андреевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 19:11:59">
         19:11
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content ts-see-more-btn-showing" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <blockquote>
                                                <p><span style="font-size:14px;font-weight:inherit;font-style:inherit"><span style="font-style:inherit;font-weight:inherit">string</span><span style="font-style:inherit;font-weight:inherit"> = </span>
                                                    <span
                                                        style="font-style:inherit;font-weight:inherit">'Маша собирала яблоки в горах Кавказа.'</span>
                                                        </span>
                                                </p>
                                                <p><span style="font-size:14px;font-weight:inherit;font-style:inherit"><span style="font-style:inherit;font-weight:inherit">sim</span><span style="font-style:inherit;font-weight:inherit"> = </span><span style="font-style:inherit;font-weight:inherit">input</span>
                                                    <span
                                                        style="font-style:inherit;font-weight:inherit">(</span><span style="font-style:inherit;font-weight:inherit">'Введите символ для поиска: '</span><span style="font-style:inherit;font-weight:inherit">)</span></span>
                                                </p>
                                                <br>
                                                <p><span style="font-size:14px;font-weight:inherit;font-style:inherit"><span style="font-style:inherit;font-weight:inherit">z</span><span style="font-style:inherit;font-weight:inherit"> = </span><span style="font-style:inherit;font-weight:inherit">''</span></span>
                                                </p>
                                                <p><span style="font-size:14px;font-weight:inherit;font-style:inherit"><span style="font-style:inherit;font-weight:inherit">l</span><span style="font-style:inherit;font-weight:inherit"> = </span><span style="font-style:inherit;font-weight:inherit">0</span></span>
                                                </p>
                                                <p><span style="font-size:14px;font-weight:inherit;font-style:inherit"><span style="font-style:inherit;font-weight:inherit">b</span><span style="font-style:inherit;font-weight:inherit"> = </span><span style="font-style:inherit;font-weight:inherit">string</span>
                                                    <span
                                                        style="font-style:inherit;font-weight:inherit">.</span><span style="font-style:inherit;font-weight:inherit">find</span><span style="font-style:inherit;font-weight:inherit">(</span><span style="font-style:inherit;font-weight:inherit">sim</span>
                                                        <span
                                                            style="font-style:inherit;font-weight:inherit">)</span>
                                                            </span>
                                                </p>
                                                <p><span style="font-size:14px;font-weight:inherit;font-style:inherit"><span style="font-style:inherit;font-weight:inherit">if</span><span style="font-style:inherit;font-weight:inherit"> </span><span style="font-style:inherit;font-weight:inherit">b</span>
                                                    <span
                                                        style="font-style:inherit;font-weight:inherit"> != -</span><span style="font-style:inherit;font-weight:inherit">1</span><span style="font-style:inherit;font-weight:inherit">:</span></span>
                                                </p>
                                                <p><span style="font-size:14px;font-weight:inherit;font-style:inherit"><span style="font-style:inherit;font-weight:inherit">&nbsp; &nbsp; </span><span style="font-style:inherit;font-weight:inherit">z</span>
                                                    <span
                                                        style="font-style:inherit;font-weight:inherit"> = </span><span style="font-style:inherit;font-weight:inherit">string</span><span style="font-style:inherit;font-weight:inherit">[</span><span style="font-style:inherit;font-weight:inherit">b</span>
                                                        <span
                                                            style="font-style:inherit;font-weight:inherit">+</span><span style="font-style:inherit;font-weight:inherit">1</span><span style="font-style:inherit;font-weight:inherit">:]</span></span>
                                                </p>
                                                <p><span style="font-size:14px;font-weight:inherit;font-style:inherit"><span style="font-style:inherit;font-weight:inherit">&nbsp; &nbsp; </span><span style="font-style:inherit;font-weight:inherit">l</span>
                                                    <span
                                                        style="font-style:inherit;font-weight:inherit"> = </span><span style="font-style:inherit;font-weight:inherit">len</span><span style="font-style:inherit;font-weight:inherit">(</span><span style="font-style:inherit;font-weight:inherit">string</span>
                                                        <span
                                                            style="font-style:inherit;font-weight:inherit">) - </span><span style="font-style:inherit;font-weight:inherit">len</span><span style="font-style:inherit;font-weight:inherit">(</span><span style="font-style:inherit;font-weight:inherit">z</span>
                                                            <span
                                                                style="font-style:inherit;font-weight:inherit">)</span>
                                                                </span>
                                                </p>
                                                <p><span style="font-size:14px;font-weight:inherit;font-style:inherit"><span style="font-style:inherit;font-weight:inherit">&nbsp; &nbsp; </span><span style="font-style:inherit;font-weight:inherit">print</span>
                                                    <span
                                                        style="font-style:inherit;font-weight:inherit">(</span><span style="font-style:inherit;font-weight:inherit">z</span><span style="font-style:inherit;font-weight:inherit">.</span><span style="font-style:inherit;font-weight:inherit">find</span>
                                                        <span
                                                            style="font-style:inherit;font-weight:inherit">(</span><span style="font-style:inherit;font-weight:inherit">sim</span><span style="font-style:inherit;font-weight:inherit">) + </span><span style="font-style:inherit;font-weight:inherit">l</span>
                                                            <span
                                                                style="font-style:inherit;font-weight:inherit">)</span>
                                                                </span>
                                                </p>
                                                <p><span style="font-size:14px;font-weight:inherit;font-style:inherit"><span style="font-style:inherit;font-weight:inherit">else</span><span style="font-style:inherit;font-weight:inherit">:</span></span>
                                                </p>
                                                <p><span style="font-size:14px;font-weight:inherit;font-style:inherit"><span style="font-style:inherit;font-weight:inherit">&nbsp; &nbsp; </span><span style="font-style:inherit;font-weight:inherit">print</span>
                                                    <span
                                                        style="font-style:inherit;font-weight:inherit">(</span><span style="font-style:inherit;font-weight:inherit">'Не найдено'</span><span style="font-style:inherit;font-weight:inherit">)</span></span>
                                                </p>
                                            </blockquote>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4" track-data="{messageID: '1671034319167', leftRailDirective: 'school-app-left-rail'}"
                                    track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody143">
            <!--Regular message template-->
            <div id="m1671034387580" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions merge-bubble keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">string = 'маша тырыпыры'.lower(), ответ от пользователя Петроченков Алексей Андреевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Петроченков Алексей Андреевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime ng-hide" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 19:13:07">
         19:13
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>string = 'маша тырыпыры'.lower()</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671034387580', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody144">
            <!--Regular message template-->
            <div id="m1671034525541" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">а мы будем проекты делать в конце?, ответ от пользователя Бобров Степан Алексеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-238" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178/profilepicturev2?displayname=Бобров Степан Алексеевич&amp;size=HR64x64"
                                alt="Аватар пользователя Бобров Степан Алексеевич." upn="Bobro_us85@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178/profilepicturev2?displayname=Бобров Степан Алексеевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Бобров Степан Алексеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 19:15:25">
         19:15
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>а мы будем проекты делать в конце?</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671034525541', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody145">
            <!--Regular message template-->
            <div id="m1671034551354" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">калькулятор с rtx, ответ от пользователя Петроченков Алексей Андреевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:4f1e392a-d25a-49ab-bbf5-4ced6b27efe8" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-239" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:4f1e392a-d25a-49ab-bbf5-4ced6b27efe8/profilepicturev2?displayname=Петроченков Алексей Андреевич&amp;size=HR64x64"
                                alt="Аватар пользователя Петроченков Алексей Андреевич." upn="Petro_wi51@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:4f1e392a-d25a-49ab-bbf5-4ced6b27efe8/profilepicturev2?displayname=Петроченков Алексей Андреевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:4f1e392a-d25a-49ab-bbf5-4ced6b27efe8"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Петроченков Алексей Андреевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 19:15:51">
         19:15
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>калькулятор с rtx</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671034551354', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody146">
            <!--Regular message template-->
            <div id="m1671034564117" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like has-reactions" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">stalker 3, ответ от пользователя Бобров Степан Алексеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-240" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178/profilepicturev2?displayname=Бобров Степан Алексеевич&amp;size=HR64x64"
                                alt="Аватар пользователя Бобров Степан Алексеевич." upn="Bobro_us85@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178/profilepicturev2?displayname=Бобров Степан Алексеевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message has-reactions" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Бобров Степан Алексеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 19:16:04">
         19:16
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>stalker 3</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671034564117', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->
                        <div class="message-expanded-reactions" ng-if="ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction &amp;&amp; ctrl.expandedReactionsConfigService.shouldSendExpandedReactions">
                            <!---->
                            <div ng-if="!ctrl.isInteropChat
        &amp;&amp; !ctrl.isHiddenByDlp
        &amp;&amp; (ctrl.messageViewModel.isDeferredLoad
        &amp;&amp; !ctrl.messageIsClientLie)" aria-label="Реакции на сообщения." class="message-reactions-view reduce-left-margin" ng-class="{'reduce-left-margin' : ctrl.messageViewModel.isReply &amp;&amp; ctrl.messageType !== 'conversation'}">
                                <message-reactions message-view-model="ctrl.messageViewModel" aria-label="Реакции на сообщения." should-hide-reaction-popover="ctrl.shouldHideReactionPopover" ma-deferred-load="" class="message-reactions-container">
                                    <ul data-tid="messageReactions" class="message-reactions">
                                        <!---->
                                        <!---->
                                        <li class="reaction-container person-card-list-hover app-font-caption-regular" person-card-list="" enable-people-list-v2="true" participant-list="reactionsCtrl.messageViewModel.reactionsUsers[reaction]" host-tenant-id="reactionsCtrl.hostTenantId"
                                            conversation-id="reactionsCtrl.isSharedChannel ? reactionsCtrl.conversationId : null" is-shared-channel="reactionsCtrl.isSharedChannel" is-person-img-displayed="true" is-expanded-reaction="reactionsCtrl.shouldSendExpandedReactions"
                                            reaction="reaction" reaction-name="::reactionsCtrl.getReactionName(reaction)" reaction-img-src="::reactionsCtrl.reactionsImageUrlMap[reaction]" no-sort="true" is-list-sorted="true" delay-in-ms="::reactionsCtrl.constants.personCard.delayInReaction"
                                            show-more-reaction-users="reactionsCtrl.showMoreUers(reaction)" show-as-context-menu="reactionsCtrl.shouldSendExpandedReactions" start-show-reactions="reactionsCtrl.startShowReactions(reaction)" end-show-reactions="reactionsCtrl.endShowReactions(reaction)"
                                            aria-haspopup="!reactionsCtrl.shouldSendExpandedReactions" tabindex="-1" ng-repeat="(reaction, count) in reactionsCtrl.messageViewModel.reactionsSummary" ng-if="((!reactionsCtrl.messageViewModel.isRightRail || $first) &amp;&amp; count)"
                                            role="button" ng-click="reactionsCtrl.onMessageReaction($event, reaction)" ng-keydown="reactionsCtrl.onReactionKeydown($event, reaction)" oncontextmenu="reactionsCtrl.onContextMenu($event)" ng-class="{ 'message-actions-reacted app-font-caption-bold': reactionsCtrl.messageViewModel.currentUserHasReactedWith === reaction,
             'app-font-caption-regular': reactionsCtrl.messageViewModel.currentUserHasReactedWith !== reaction}" aria-pressed="" aria-label="2 Нравится реакций. Нажмите ВВОД или ПРОБЕЛ, чтобы добавить Нравится реакций. Содержит контекстное меню .">
                                            <div dir="auto" class="reaction-image-container" aria-hidden="true">
                                                <img class="reaction-size reaction personal-expression-emoticon fluent-reaction-emoticon" ng-class="::reactionsCtrl.reactionClass" ng-src="https://statics.teams.cdn.office.net/evergreen-assets/personal-expressions/v2/assets/emoticons/yes/default/30_f.png?v=v70"
                                                    data-tid="messageReactionImage-like" title="" src="https://statics.teams.cdn.office.net/evergreen-assets/personal-expressions/v2/assets/emoticons/yes/default/30_f.png?v=v70">
                                                <span class="reaction-count reaction-count-size" data-tid="messageReactionCount-like">
       2
 </span>
                                            </div>
                                        </li>
                                        <!---->
                                        <!---->
                                    </ul>
                                    <!---->
                                    <!---->
                                </message-reactions>
                            </div>
                            <!---->
                        </div>
                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody147">
            <!--Regular message template-->
            <div id="m1671034580340" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions merge-bubble keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">ок, ответ от пользователя Бобров Степан Алексеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Бобров Степан Алексеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime ng-hide" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 19:16:20">
         19:16
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>ок</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671034580340', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody148">
            <!--Regular message template-->
            <div id="m1671034588747" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions merge-bubble keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">дело 5 минут, ответ от пользователя Бобров Степан Алексеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Бобров Степан Алексеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime ng-hide" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 19:16:28">
         19:16
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>дело 5 минут</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671034588747', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody149">
            <!--Regular message template-->
            <div id="m1671034641892" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">и +1, ответ от пользователя Бровкин Михаил Сергеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:474bd458-f97e-4fb2-b697-3a616a81d012" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-241" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:474bd458-f97e-4fb2-b697-3a616a81d012/profilepicturev2?displayname=Бровкин Михаил Сергеевич&amp;size=HR64x64"
                                alt="Аватар пользователя Бровкин Михаил Сергеевич." upn="Brovk_gi63@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:474bd458-f97e-4fb2-b697-3a616a81d012/profilepicturev2?displayname=Бровкин Михаил Сергеевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:474bd458-f97e-4fb2-b697-3a616a81d012"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Бровкин Михаил Сергеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 19:17:21">
         19:17
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>и +1</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671034641892', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody150">
            <!--Regular message template-->
            <div id="m1671034653765" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">a = 'Маша собирала яблоки в горах Кавказа.' a = list(a) b = input('simbol') b = list(b) с =(a.find(b…, ответ от пользователя Муравьев Дмитрий Дмитриевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:10638eaa-5a95-4b5a-b6b7-a8f353fd614e" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-242" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:10638eaa-5a95-4b5a-b6b7-a8f353fd614e/profilepicturev2?displayname=Муравьев Дмитрий Дмитриевич&amp;size=HR64x64"
                                alt="Аватар пользователя Муравьев Дмитрий Дмитриевич." upn="Murav_yk73@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:10638eaa-5a95-4b5a-b6b7-a8f353fd614e/profilepicturev2?displayname=Муравьев Дмитрий Дмитриевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Нет на месте" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym away" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:10638eaa-5a95-4b5a-b6b7-a8f353fd614e"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Муравьев Дмитрий Дмитриевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 19:17:33">
         19:17
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content ts-see-more-btn-showing" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>a = 'Маша собирала яблоки в горах Кавказа.'</p>
                                            <p>a = list(a)</p>
                                            <p>b = input('simbol')</p>
                                            <p>b = list(b)</p>
                                            <p>с =(a.find(b.strip()))</p>
                                            <p>print(b.find(a[c:]))</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4" track-data="{messageID: '1671034653765', leftRailDirective: 'school-app-left-rail'}"
                                    track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody151">
            <!--Regular message template-->
            <div id="m1671034681440" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions merge-bubble keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">можете сказать почему не работает, ответ от пользователя Муравьев Дмитрий Дмитриевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Муравьев Дмитрий Дмитриевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime ng-hide" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 19:18:01">
         19:18
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>можете сказать почему не работает</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671034681440', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody152">
            <!--Regular message template-->
            <div id="m1671034727894" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">string='Маша собирала яблоки в горах Кавказа' lit=input('Какую букву искать?') g=string.find(lit) st…, ответ от пользователя Портас Константин Сергеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:21bf49d8-b9fb-4c73-8a04-97cf59e07012" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-243" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:21bf49d8-b9fb-4c73-8a04-97cf59e07012/profilepicturev2?displayname=Портас Константин Сергеевич&amp;size=HR64x64"
                                alt="Аватар пользователя Портас Константин Сергеевич." upn="Porta_yx78@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:21bf49d8-b9fb-4c73-8a04-97cf59e07012/profilepicturev2?displayname=Портас Константин Сергеевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:21bf49d8-b9fb-4c73-8a04-97cf59e07012"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Портас Константин Сергеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 19:18:47">
         19:18
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content ts-see-more-btn-showing" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>string='Маша собирала яблоки в горах Кавказа'<br> lit=input('Какую букву искать?')<br> g=string.find(lit)
                                                <br> string=string[g+1:]
                                                <br> print(string.find(lit)+g+1)
                                            </p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4" track-data="{messageID: '1671034727894', leftRailDirective: 'school-app-left-rail'}"
                                    track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody153">
            <!--Regular message template-->
            <div id="m1671034848336" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">а где вы их берете?, ответ от пользователя Бобров Степан Алексеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-244" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178/profilepicturev2?displayname=Бобров Степан Алексеевич&amp;size=HR64x64"
                                alt="Аватар пользователя Бобров Степан Алексеевич." upn="Bobro_us85@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178/profilepicturev2?displayname=Бобров Степан Алексеевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Бобров Степан Алексеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 19:20:48">
         19:20
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>а где вы их берете?</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671034848336', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody154">
            <!--Regular message template-->
            <div id="m1671034955747" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions merge-bubble keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">у меня свитч с клавы отвалился, ответ от пользователя Бобров Степан Алексеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Бобров Степан Алексеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime ng-hide" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 19:22:35">
         19:22
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>у меня свитч с клавы отвалился</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671034955747', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody155">
            <!--Regular message template-->
            <div id="m1671034987349" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">чтото на богатом, ответ от пользователя Муравьев Дмитрий Дмитриевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:10638eaa-5a95-4b5a-b6b7-a8f353fd614e" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-245" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:10638eaa-5a95-4b5a-b6b7-a8f353fd614e/profilepicturev2?displayname=Муравьев Дмитрий Дмитриевич&amp;size=HR64x64"
                                alt="Аватар пользователя Муравьев Дмитрий Дмитриевич." upn="Murav_yk73@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:10638eaa-5a95-4b5a-b6b7-a8f353fd614e/profilepicturev2?displayname=Муравьев Дмитрий Дмитриевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Нет на месте" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym away" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:10638eaa-5a95-4b5a-b6b7-a8f353fd614e"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Муравьев Дмитрий Дмитриевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 19:23:07">
         19:23
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>чтото на богатом</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671034987349', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody156">
            <!--Regular message template-->
            <div id="m1671034999535" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">он не должен иметь такой функции, ответ от пользователя Бобров Степан Алексеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-246" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178/profilepicturev2?displayname=Бобров Степан Алексеевич&amp;size=HR64x64"
                                alt="Аватар пользователя Бобров Степан Алексеевич." upn="Bobro_us85@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178/profilepicturev2?displayname=Бобров Степан Алексеевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Бобров Степан Алексеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 19:23:19">
         19:23
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>он не должен иметь такой функции</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671034999535', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody157">
            <!--Regular message template-->
            <div id="m1671035067373" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like has-reactions" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">str = 'Маша собирала яблоки в горах Кавказа.' print('32') Monke tactics B), ответ от пользователя Гнездилов Алексей Дмитриевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:cbf301cb-934e-4a99-b0dc-224095c65013" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-227" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:cbf301cb-934e-4a99-b0dc-224095c65013/profilepicturev2?displayname=Гнездилов Алексей Дмитриевич&amp;size=HR64x64"
                                alt="Аватар пользователя Гнездилов Алексей Дмитриевич." upn="Gnezd_mg41@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:cbf301cb-934e-4a99-b0dc-224095c65013/profilepicturev2?displayname=Гнездилов Алексей Дмитриевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:cbf301cb-934e-4a99-b0dc-224095c65013"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message has-reactions" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Гнездилов Алексей Дмитриевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 19:24:27">
         19:24
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>str = 'Маша собирала яблоки в горах Кавказа.'<br>
                                            </p>
                                            <p>print('32')</p>
                                            <p>Monke tactics B)</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671035067373', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->
                        <div class="message-expanded-reactions" ng-if="ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction &amp;&amp; ctrl.expandedReactionsConfigService.shouldSendExpandedReactions">
                            <!---->
                            <div ng-if="!ctrl.isInteropChat
        &amp;&amp; !ctrl.isHiddenByDlp
        &amp;&amp; (ctrl.messageViewModel.isDeferredLoad
        &amp;&amp; !ctrl.messageIsClientLie)" aria-label="Реакции на сообщения." class="message-reactions-view reduce-left-margin" ng-class="{'reduce-left-margin' : ctrl.messageViewModel.isReply &amp;&amp; ctrl.messageType !== 'conversation'}">
                                <message-reactions message-view-model="ctrl.messageViewModel" aria-label="Реакции на сообщения." should-hide-reaction-popover="ctrl.shouldHideReactionPopover" ma-deferred-load="" class="message-reactions-container">
                                    <ul data-tid="messageReactions" class="message-reactions">
                                        <!---->
                                        <!---->
                                        <li class="reaction-container person-card-list-hover app-font-caption-regular" person-card-list="" enable-people-list-v2="true" participant-list="reactionsCtrl.messageViewModel.reactionsUsers[reaction]" host-tenant-id="reactionsCtrl.hostTenantId"
                                            conversation-id="reactionsCtrl.isSharedChannel ? reactionsCtrl.conversationId : null" is-shared-channel="reactionsCtrl.isSharedChannel" is-person-img-displayed="true" is-expanded-reaction="reactionsCtrl.shouldSendExpandedReactions"
                                            reaction="reaction" reaction-name="::reactionsCtrl.getReactionName(reaction)" reaction-img-src="::reactionsCtrl.reactionsImageUrlMap[reaction]" no-sort="true" is-list-sorted="true" delay-in-ms="::reactionsCtrl.constants.personCard.delayInReaction"
                                            show-more-reaction-users="reactionsCtrl.showMoreUers(reaction)" show-as-context-menu="reactionsCtrl.shouldSendExpandedReactions" start-show-reactions="reactionsCtrl.startShowReactions(reaction)" end-show-reactions="reactionsCtrl.endShowReactions(reaction)"
                                            aria-haspopup="!reactionsCtrl.shouldSendExpandedReactions" tabindex="-1" ng-repeat="(reaction, count) in reactionsCtrl.messageViewModel.reactionsSummary" ng-if="((!reactionsCtrl.messageViewModel.isRightRail || $first) &amp;&amp; count)"
                                            role="button" ng-click="reactionsCtrl.onMessageReaction($event, reaction)" ng-keydown="reactionsCtrl.onReactionKeydown($event, reaction)" oncontextmenu="reactionsCtrl.onContextMenu($event)" ng-class="{ 'message-actions-reacted app-font-caption-bold': reactionsCtrl.messageViewModel.currentUserHasReactedWith === reaction,
             'app-font-caption-regular': reactionsCtrl.messageViewModel.currentUserHasReactedWith !== reaction}" aria-pressed="" aria-label="2 Нравится реакций. Нажмите ВВОД или ПРОБЕЛ, чтобы добавить Нравится реакций. Содержит контекстное меню .">
                                            <div dir="auto" class="reaction-image-container" aria-hidden="true">
                                                <img class="reaction-size reaction personal-expression-emoticon fluent-reaction-emoticon" ng-class="::reactionsCtrl.reactionClass" ng-src="https://statics.teams.cdn.office.net/evergreen-assets/personal-expressions/v2/assets/emoticons/yes/default/30_f.png?v=v70"
                                                    data-tid="messageReactionImage-like" title="" src="https://statics.teams.cdn.office.net/evergreen-assets/personal-expressions/v2/assets/emoticons/yes/default/30_f.png?v=v70">
                                                <span class="reaction-count reaction-count-size" data-tid="messageReactionCount-like">
       2
 </span>
                                            </div>
                                        </li>
                                        <!---->
                                        <!---->
                                    </ul>
                                    <!---->
                                    <!---->
                                </message-reactions>
                            </div>
                            <!---->
                        </div>
                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody158">
            <!--Regular message template-->
            <div id="m1671035070977" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">string = 'Маша собирала яблоки в горах Кавказа.' sim = input('Введите символ для поиска: ') z = ''…, ответ от пользователя Петроченков Алексей Андреевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:4f1e392a-d25a-49ab-bbf5-4ced6b27efe8" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-228" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:4f1e392a-d25a-49ab-bbf5-4ced6b27efe8/profilepicturev2?displayname=Петроченков Алексей Андреевич&amp;size=HR64x64"
                                alt="Аватар пользователя Петроченков Алексей Андреевич." upn="Petro_wi51@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:4f1e392a-d25a-49ab-bbf5-4ced6b27efe8/profilepicturev2?displayname=Петроченков Алексей Андреевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:4f1e392a-d25a-49ab-bbf5-4ced6b27efe8"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Петроченков Алексей Андреевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 19:24:30">
         19:24
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content ts-see-more-btn-showing" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p><span style="font-size:14px;font-weight:inherit;font-style:inherit"><span style="font-style:inherit;font-weight:inherit">string</span><span style="font-style:inherit;font-weight:inherit"> = </span><span style="font-style:inherit;font-weight:inherit">'Маша собирала яблоки в горах Кавказа.'</span></span>
                                            </p>
                                            <p><span style="font-size:14px;font-weight:inherit;font-style:inherit"><span style="font-style:inherit;font-weight:inherit">sim</span><span style="font-style:inherit;font-weight:inherit"> = </span><span style="font-style:inherit;font-weight:inherit">input</span>
                                                <span
                                                    style="font-style:inherit;font-weight:inherit">(</span><span style="font-style:inherit;font-weight:inherit">'Введите символ для поиска: '</span><span style="font-style:inherit;font-weight:inherit">)</span></span>
                                            </p>
                                            <p><br>
                                            </p>
                                            <p><span style="font-size:14px;font-weight:inherit;font-style:inherit"><span style="font-style:inherit;font-weight:inherit">z</span><span style="font-style:inherit;font-weight:inherit"> = </span><span style="font-style:inherit;font-weight:inherit">''</span></span>
                                            </p>
                                            <p><span style="font-size:14px;font-weight:inherit;font-style:inherit"><span style="font-style:inherit;font-weight:inherit">l</span><span style="font-style:inherit;font-weight:inherit"> = </span><span style="font-style:inherit;font-weight:inherit">0</span></span>
                                            </p>
                                            <p><span style="font-size:14px;font-weight:inherit;font-style:inherit"><span style="font-style:inherit;font-weight:inherit">b</span><span style="font-style:inherit;font-weight:inherit"> = </span><span style="font-style:inherit;font-weight:inherit">string</span>
                                                <span
                                                    style="font-style:inherit;font-weight:inherit">.</span><span style="font-style:inherit;font-weight:inherit">find</span><span style="font-style:inherit;font-weight:inherit">(</span><span style="font-style:inherit;font-weight:inherit">sim</span><span style="font-style:inherit;font-weight:inherit">)</span></span>
                                            </p>
                                            <p><br>
                                            </p>
                                            <p><span style="font-size:14px;font-weight:inherit;font-style:inherit"><span style="font-style:inherit;font-weight:inherit">z</span><span style="font-style:inherit;font-weight:inherit"> = </span><span style="font-style:inherit;font-weight:inherit">string</span>
                                                <span
                                                    style="font-style:inherit;font-weight:inherit">[</span><span style="font-style:inherit;font-weight:inherit">b</span><span style="font-style:inherit;font-weight:inherit">+</span><span style="font-style:inherit;font-weight:inherit">1</span><span style="font-style:inherit;font-weight:inherit">:]</span></span>
                                            </p>
                                            <p><span style="font-size:14px;font-weight:inherit;font-style:inherit"><span style="font-style:inherit;font-weight:inherit">l</span><span style="font-style:inherit;font-weight:inherit"> = </span><span style="font-style:inherit;font-weight:inherit">len</span>
                                                <span
                                                    style="font-style:inherit;font-weight:inherit">(</span><span style="font-style:inherit;font-weight:inherit">string</span><span style="font-style:inherit;font-weight:inherit">) - </span><span style="font-style:inherit;font-weight:inherit">len</span>
                                                    <span
                                                        style="font-style:inherit;font-weight:inherit">(</span><span style="font-style:inherit;font-weight:inherit">z</span><span style="font-style:inherit;font-weight:inherit">)</span></span>
                                            </p>
                                            <p><span style="font-size:14px;font-weight:inherit;font-style:inherit"><span style="font-style:inherit;font-weight:inherit">print</span><span style="font-style:inherit;font-weight:inherit">(</span><span style="font-style:inherit;font-weight:inherit">z</span>
                                                <span
                                                    style="font-style:inherit;font-weight:inherit">.</span><span style="font-style:inherit;font-weight:inherit">find</span><span style="font-style:inherit;font-weight:inherit">(</span><span style="font-style:inherit;font-weight:inherit">sim</span><span style="font-style:inherit;font-weight:inherit">) + </span>
                                                    <span
                                                        style="font-style:inherit;font-weight:inherit">l</span><span style="font-style:inherit;font-weight:inherit">)</span></span>
                                            </p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4" track-data="{messageID: '1671035070977', leftRailDirective: 'school-app-left-rail'}"
                                    track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody159">
            <!--Regular message template-->
            <div id="m1671035124095" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions merge-bubble keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">А, ответ от пользователя Петроченков Алексей Андреевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Петроченков Алексей Андреевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime ng-hide" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 19:25:24">
         19:25
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>А</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671035124095', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody160">
            <!--Regular message template-->
            <div id="m1671035130952" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions merge-bubble keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">Тут к всего 2 символа, ответ от пользователя Петроченков Алексей Андреевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Петроченков Алексей Андреевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime ng-hide" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 19:25:30">
         19:25
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>Тут к всего 2 символа</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671035130952', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody161">
            <!--Regular message template-->
            <div id="m1671035220575" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">#3 string='Маша собирала яблоки в горах Кавказа' lit=input('Какую букву искать?') print(string.rfind…, ответ от пользователя Портас Константин Сергеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:21bf49d8-b9fb-4c73-8a04-97cf59e07012" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-229" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:21bf49d8-b9fb-4c73-8a04-97cf59e07012/profilepicturev2?displayname=Портас Константин Сергеевич&amp;size=HR64x64"
                                alt="Аватар пользователя Портас Константин Сергеевич." upn="Porta_yx78@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:21bf49d8-b9fb-4c73-8a04-97cf59e07012/profilepicturev2?displayname=Портас Константин Сергеевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:21bf49d8-b9fb-4c73-8a04-97cf59e07012"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Портас Константин Сергеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 19:27:00">
         19:27
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>#3<br> string='Маша собирала яблоки в горах Кавказа'<br> lit=input('Какую букву искать?')<br> print(string.rfind(lit))
                                            </p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671035220575', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody162">
            <!--Regular message template-->
            <div id="m1671035227384" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions merge-bubble keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">во, ответ от пользователя Портас Константин Сергеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Портас Константин Сергеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime ng-hide" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 19:27:07">
         19:27
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>во</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671035227384', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody163">
            <!--Regular message template-->
            <div id="m1671035237555" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions merge-bubble keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">нет, ответ от пользователя Портас Константин Сергеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Портас Константин Сергеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime ng-hide" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 19:27:17">
         19:27
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>нет</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671035237555', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody164">
            <!--Regular message template-->
            <div id="m1671035239420" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">rfind последнюю, ответ от пользователя Петроченков Алексей Андреевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:4f1e392a-d25a-49ab-bbf5-4ced6b27efe8" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-230" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:4f1e392a-d25a-49ab-bbf5-4ced6b27efe8/profilepicturev2?displayname=Петроченков Алексей Андреевич&amp;size=HR64x64"
                                alt="Аватар пользователя Петроченков Алексей Андреевич." upn="Petro_wi51@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:4f1e392a-d25a-49ab-bbf5-4ced6b27efe8/profilepicturev2?displayname=Петроченков Алексей Андреевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:4f1e392a-d25a-49ab-bbf5-4ced6b27efe8"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Петроченков Алексей Андреевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 19:27:19">
         19:27
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>rfind последнюю</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671035239420', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody165">
            <!--Regular message template-->
            <div id="m1671035251520" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">не в интернете, ответ от пользователя Портас Константин Сергеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:21bf49d8-b9fb-4c73-8a04-97cf59e07012" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-231" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:21bf49d8-b9fb-4c73-8a04-97cf59e07012/profilepicturev2?displayname=Портас Константин Сергеевич&amp;size=HR64x64"
                                alt="Аватар пользователя Портас Константин Сергеевич." upn="Porta_yx78@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:21bf49d8-b9fb-4c73-8a04-97cf59e07012/profilepicturev2?displayname=Портас Константин Сергеевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:21bf49d8-b9fb-4c73-8a04-97cf59e07012"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Портас Константин Сергеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 19:27:31">
         19:27
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>не в интернете</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671035251520', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody166">
            <!--Regular message template-->
            <div id="m1671035255898" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions merge-bubble keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">в чате писали, ответ от пользователя Портас Константин Сергеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Портас Константин Сергеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime ng-hide" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 19:27:35">
         19:27
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>в чате писали</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671035255898', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody167">
            <!--Regular message template-->
            <div id="m1671035265037" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions merge-bubble keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">хорошо, ответ от пользователя Портас Константин Сергеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Портас Константин Сергеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime ng-hide" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 19:27:45">
         19:27
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>хорошо</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671035265037', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody168">
            <!--Regular message template-->
            <div id="m1671035284280" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">а бы перевернул строку, ответ от пользователя Бобров Степан Алексеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-232" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178/profilepicturev2?displayname=Бобров Степан Алексеевич&amp;size=HR64x64"
                                alt="Аватар пользователя Бобров Степан Алексеевич." upn="Bobro_us85@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178/profilepicturev2?displayname=Бобров Степан Алексеевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Бобров Степан Алексеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 19:28:04">
         19:28
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>а бы перевернул строку</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671035284280', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody169">
            <!--Regular message template-->
            <div id="m1671035327390" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions merge-bubble keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">мне лень вск открывать, ответ от пользователя Бобров Степан Алексеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Бобров Степан Алексеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime ng-hide" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 19:28:47">
         19:28
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>мне лень вск открывать</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671035327390', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody170">
            <!--Regular message template-->
            <div id="m1671035331828" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions merge-bubble keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">а бы сделал, ответ от пользователя Бобров Степан Алексеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Бобров Степан Алексеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime ng-hide" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 19:28:51">
         19:28
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>а бы сделал</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671035331828', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody171">
            <!--Regular message template-->
            <div id="m1671035334837" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions merge-bubble keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">я, ответ от пользователя Бобров Степан Алексеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Бобров Степан Алексеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime ng-hide" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 19:28:54">
         19:28
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>я</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671035334837', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody172">
            <!--Regular message template-->
            <div id="m1671035359457" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions merge-bubble keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">даааааааа, ответ от пользователя Бобров Степан Алексеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Бобров Степан Алексеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime ng-hide" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 19:29:19">
         19:29
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>даааааааа</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671035359457', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody173">
            <!--Regular message template-->
            <div id="m1671035368608" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions merge-bubble keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">я тут вспомнил, ответ от пользователя Бобров Степан Алексеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Бобров Степан Алексеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime ng-hide" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 19:29:28">
         19:29
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>я тут вспомнил</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671035368608', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody174">
            <!--Regular message template-->
            <div id="m1671035376925" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions merge-bubble keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">утюг не выключил, ответ от пользователя Бобров Степан Алексеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Бобров Степан Алексеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime ng-hide" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 19:29:36">
         19:29
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>утюг не выключил</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671035376925', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody175">
            <!--Regular message template-->
            <div id="m1671035381463" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions merge-bubble keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">скоро вернусь, ответ от пользователя Бобров Степан Алексеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Бобров Степан Алексеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime ng-hide" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 19:29:41">
         19:29
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>скоро вернусь</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671035381463', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody176">
            <!--Regular message template-->
            <div id="m1671035551992" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions edited-message show-top-row merge-bubble keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">word = "Маша собирала яблоки в горах Кавказа" word[::-1] a = input() &nbsp; print(len(word)-word.find(a)), ответ от пользователя Бобров Степан Алексеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Бобров Степан Алексеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime ng-hide" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 19:32:31">
         19:32
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="Изменено 14 дек., 19:33:18" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="Изменено 14 дек., 19:33:18" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content ts-see-more-btn-showing" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>word = "Маша собирала яблоки в горах Кавказа"<br> word[::-1]
                                                <br> a = input()</p>
                                            <p>&nbsp;</p>
                                            <p>print(len(word)-word.find(a))</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4" track-data="{messageID: '1671035551992', leftRailDirective: 'school-app-left-rail'}"
                                    track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody177">
            <!--Regular message template-->
            <div id="m1671035583309" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">цикл?, ответ от пользователя Портас Константин Сергеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:21bf49d8-b9fb-4c73-8a04-97cf59e07012" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-212" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:21bf49d8-b9fb-4c73-8a04-97cf59e07012/profilepicturev2?displayname=Портас Константин Сергеевич&amp;size=HR64x64"
                                alt="Аватар пользователя Портас Константин Сергеевич." upn="Porta_yx78@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:21bf49d8-b9fb-4c73-8a04-97cf59e07012/profilepicturev2?displayname=Портас Константин Сергеевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:21bf49d8-b9fb-4c73-8a04-97cf59e07012"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Портас Константин Сергеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 19:33:03">
         19:33
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>цикл?</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671035583309', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody178">
            <!--Regular message template-->
            <div id="m1671035601784" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">str = 'Маша собирала яблоки в горах Кавказа.' list(str) a = input("&lt;&lt;&lt; ") b = len(str) while 1: &nbsp;&nbsp;с …, ответ от пользователя Гнездилов Алексей Дмитриевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:cbf301cb-934e-4a99-b0dc-224095c65013" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-213" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:cbf301cb-934e-4a99-b0dc-224095c65013/profilepicturev2?displayname=Гнездилов Алексей Дмитриевич&amp;size=HR64x64"
                                alt="Аватар пользователя Гнездилов Алексей Дмитриевич." upn="Gnezd_mg41@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:cbf301cb-934e-4a99-b0dc-224095c65013/profilepicturev2?displayname=Гнездилов Алексей Дмитриевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:cbf301cb-934e-4a99-b0dc-224095c65013"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Гнездилов Алексей Дмитриевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 19:33:21">
         19:33
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content ts-see-more-btn-showing" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>str = 'Маша собирала яблоки в горах Кавказа.'<br> list(str)
                                                <br> a = input("&lt;&lt;&lt; ")<br> b = len(str)<br> while 1:<br>
                                                <span><span>&nbsp;&nbsp;</span>с = b - len(str)</span><br>
                                                <span><span>&nbsp;&nbsp;</span>if a == str[с]:</span><br>
                                                <span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span>print(b)</span><br>
                                                <span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span>break</span><br>
                                                <span><span>&nbsp;&nbsp;</span>b -= 1</span>
                                            </p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4" track-data="{messageID: '1671035601784', leftRailDirective: 'school-app-left-rail'}"
                                    track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody179">
            <!--Regular message template-->
            <div id="m1671035605068" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">string = 'Маша собирала яблоки в горах Кавказа.'.lower() sim = input('Введите символ для поиска: ').…, ответ от пользователя Петроченков Алексей Андреевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:4f1e392a-d25a-49ab-bbf5-4ced6b27efe8" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-214" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:4f1e392a-d25a-49ab-bbf5-4ced6b27efe8/profilepicturev2?displayname=Петроченков Алексей Андреевич&amp;size=HR64x64"
                                alt="Аватар пользователя Петроченков Алексей Андреевич." upn="Petro_wi51@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:4f1e392a-d25a-49ab-bbf5-4ced6b27efe8/profilepicturev2?displayname=Петроченков Алексей Андреевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:4f1e392a-d25a-49ab-bbf5-4ced6b27efe8"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Петроченков Алексей Андреевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 19:33:25">
         19:33
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content ts-see-more-btn-showing" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p><span style="font-size:14px;font-weight:inherit;font-style:inherit"><span style="font-style:inherit;font-weight:inherit">string</span><span style="font-style:inherit;font-weight:inherit"> = </span><span style="font-style:inherit;font-weight:inherit">'Маша собирала яблоки в горах Кавказа.'</span>
                                                <span
                                                    style="font-style:inherit;font-weight:inherit">.</span><span style="font-style:inherit;font-weight:inherit">lower</span><span style="font-style:inherit;font-weight:inherit">()</span></span>
                                            </p>
                                            <p><span style="font-size:14px;font-weight:inherit;font-style:inherit"><span style="font-style:inherit;font-weight:inherit">sim</span><span style="font-style:inherit;font-weight:inherit"> = </span><span style="font-style:inherit;font-weight:inherit">input</span>
                                                <span
                                                    style="font-style:inherit;font-weight:inherit">(</span><span style="font-style:inherit;font-weight:inherit">'Введите символ для поиска: '</span><span style="font-style:inherit;font-weight:inherit">).</span><span style="font-style:inherit;font-weight:inherit">strip</span>
                                                    <span
                                                        style="font-style:inherit;font-weight:inherit">().</span><span style="font-style:inherit;font-weight:inherit">lower</span><span style="font-style:inherit;font-weight:inherit">()</span></span>
                                            </p>
                                            <p><br>
                                            </p>
                                            <p><span style="font-size:14px;font-weight:inherit;font-style:inherit"><span style="font-style:inherit;font-weight:inherit">while</span><span style="font-style:inherit;font-weight:inherit"> </span><span style="font-style:inherit;font-weight:inherit">True</span>
                                                <span
                                                    style="font-style:inherit;font-weight:inherit">:</span>
                                                    </span>
                                            </p>
                                            <p><span style="font-size:14px;font-weight:inherit;font-style:inherit"><span style="font-style:inherit;font-weight:inherit">&nbsp; &nbsp; </span><span style="font-style:inherit;font-weight:inherit">num</span>
                                                <span
                                                    style="font-style:inherit;font-weight:inherit"> = </span><span style="font-style:inherit;font-weight:inherit">string</span><span style="font-style:inherit;font-weight:inherit">.</span><span style="font-style:inherit;font-weight:inherit">find</span>
                                                    <span
                                                        style="font-style:inherit;font-weight:inherit">(</span><span style="font-style:inherit;font-weight:inherit">sim</span><span style="font-style:inherit;font-weight:inherit">)</span></span>
                                            </p>
                                            <p><span style="font-size:14px;font-weight:inherit;font-style:inherit"><span style="font-style:inherit;font-weight:inherit">&nbsp; &nbsp; </span><span style="font-style:inherit;font-weight:inherit">z</span>
                                                <span
                                                    style="font-style:inherit;font-weight:inherit"> = </span><span style="font-style:inherit;font-weight:inherit">string</span><span style="font-style:inherit;font-weight:inherit">[</span><span style="font-style:inherit;font-weight:inherit">num</span>
                                                    <span
                                                        style="font-style:inherit;font-weight:inherit">+</span><span style="font-style:inherit;font-weight:inherit">1</span><span style="font-style:inherit;font-weight:inherit">:]</span></span>
                                            </p>
                                            <p><span style="font-size:14px;font-weight:inherit;font-style:inherit"><span style="font-style:inherit;font-weight:inherit">&nbsp; &nbsp; </span><span style="font-style:inherit;font-weight:inherit">if</span>
                                                <span
                                                    style="font-style:inherit;font-weight:inherit"> </span><span style="font-style:inherit;font-weight:inherit">z</span><span style="font-style:inherit;font-weight:inherit"> == -</span><span style="font-style:inherit;font-weight:inherit">1</span><span style="font-style:inherit;font-weight:inherit">:</span></span>
                                            </p>
                                            <p><span style="font-size:14px;font-weight:inherit;font-style:inherit"><span style="font-style:inherit;font-weight:inherit">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="font-style:inherit;font-weight:inherit">break</span></span>
                                            </p>
                                            <p><span style="font-size:14px;font-weight:inherit;font-style:inherit"><span style="font-style:inherit;font-weight:inherit">&nbsp; &nbsp; </span><span style="font-style:inherit;font-weight:inherit">string</span>
                                                <span
                                                    style="font-style:inherit;font-weight:inherit"> = </span><span style="font-style:inherit;font-weight:inherit">z</span></span>
                                            </p>
                                            <p><br>
                                            </p>
                                            <p><span style="font-size:14px;font-weight:inherit;font-style:inherit"><span style="font-style:inherit;font-weight:inherit">print</span><span style="font-style:inherit;font-weight:inherit">(</span><span style="font-style:inherit;font-weight:inherit">string</span>
                                                <span
                                                    style="font-style:inherit;font-weight:inherit">.</span><span style="font-style:inherit;font-weight:inherit">find</span><span style="font-style:inherit;font-weight:inherit">(</span><span style="font-style:inherit;font-weight:inherit">string</span>
                                                    <span
                                                        style="font-style:inherit;font-weight:inherit">) + </span><span style="font-style:inherit;font-weight:inherit">num</span><span style="font-style:inherit;font-weight:inherit"> + </span><span style="font-style:inherit;font-weight:inherit">1</span>
                                                        <span
                                                            style="font-style:inherit;font-weight:inherit">)</span>
                                                            </span>
                                            </p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4" track-data="{messageID: '1671035605068', leftRailDirective: 'school-app-left-rail'}"
                                    track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody180">
            <!--Regular message template-->
            <div id="m1671035608502" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">B), ответ от пользователя Гнездилов Алексей Дмитриевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:cbf301cb-934e-4a99-b0dc-224095c65013" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-215" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:cbf301cb-934e-4a99-b0dc-224095c65013/profilepicturev2?displayname=Гнездилов Алексей Дмитриевич&amp;size=HR64x64"
                                alt="Аватар пользователя Гнездилов Алексей Дмитриевич." upn="Gnezd_mg41@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:cbf301cb-934e-4a99-b0dc-224095c65013/profilepicturev2?displayname=Гнездилов Алексей Дмитриевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:cbf301cb-934e-4a99-b0dc-224095c65013"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Гнездилов Алексей Дмитриевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 19:33:28">
         19:33
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>B)</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671035608502', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody181">
            <!--Regular message template-->
            <div id="m1671035610168" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">Только оно не работает, ответ от пользователя Петроченков Алексей Андреевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:4f1e392a-d25a-49ab-bbf5-4ced6b27efe8" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-216" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:4f1e392a-d25a-49ab-bbf5-4ced6b27efe8/profilepicturev2?displayname=Петроченков Алексей Андреевич&amp;size=HR64x64"
                                alt="Аватар пользователя Петроченков Алексей Андреевич." upn="Petro_wi51@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:4f1e392a-d25a-49ab-bbf5-4ced6b27efe8/profilepicturev2?displayname=Петроченков Алексей Андреевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:4f1e392a-d25a-49ab-bbf5-4ced6b27efe8"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Петроченков Алексей Андреевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 19:33:30">
         19:33
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>Только оно не работает</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671035610168', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody182">
            <!--Regular message template-->
            <div id="m1671035621335" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions merge-bubble keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">Но идея та, ответ от пользователя Петроченков Алексей Андреевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Петроченков Алексей Андреевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime ng-hide" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 19:33:41">
         19:33
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>Но идея та</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671035621335', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody183">
            <!--Regular message template-->
            <div id="m1671035645409" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">Кот шалит, ответ от пользователя Гнездилов Алексей Дмитриевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:cbf301cb-934e-4a99-b0dc-224095c65013" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-217" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:cbf301cb-934e-4a99-b0dc-224095c65013/profilepicturev2?displayname=Гнездилов Алексей Дмитриевич&amp;size=HR64x64"
                                alt="Аватар пользователя Гнездилов Алексей Дмитриевич." upn="Gnezd_mg41@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:cbf301cb-934e-4a99-b0dc-224095c65013/profilepicturev2?displayname=Гнездилов Алексей Дмитриевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:cbf301cb-934e-4a99-b0dc-224095c65013"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Гнездилов Алексей Дмитриевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 19:34:05">
         19:34
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>Кот шалит</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671035645409', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody184">
            <!--Regular message template-->
            <div id="m1671035671414" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions merge-bubble keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">А у меня работает, ответ от пользователя Гнездилов Алексей Дмитриевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Гнездилов Алексей Дмитриевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime ng-hide" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 19:34:31">
         19:34
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>А у меня работает</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671035671414', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody185">
            <!--Regular message template-->
            <div id="m1671035714142" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">Расскажите побыстрее о [::-1], ответ от пользователя Бобров Степан Алексеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-218" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178/profilepicturev2?displayname=Бобров Степан Алексеевич&amp;size=HR64x64"
                                alt="Аватар пользователя Бобров Степан Алексеевич." upn="Bobro_us85@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178/profilepicturev2?displayname=Бобров Степан Алексеевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Бобров Степан Алексеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 19:35:14">
         19:35
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>Расскажите побыстрее о [::-1]</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671035714142', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody186">
            <!--Regular message template-->
            <div id="m1671035839409" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions merge-bubble keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">а можно просто фор с обратным шагом?, ответ от пользователя Бобров Степан Алексеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Бобров Степан Алексеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime ng-hide" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 19:37:19">
         19:37
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>а можно просто фор с обратным шагом?</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671035839409', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody187">
            <!--Regular message template-->
            <div id="m1671035844580" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions merge-bubble keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">перебором, ответ от пользователя Бобров Степан Алексеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Бобров Степан Алексеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime ng-hide" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 19:37:24">
         19:37
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>перебором</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671035844580', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody188">
            <!--Regular message template-->
            <div id="m1671035910725" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">Рыдаю , ответ от пользователя Гнездилов Алексей Дмитриевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:cbf301cb-934e-4a99-b0dc-224095c65013" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-219" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:cbf301cb-934e-4a99-b0dc-224095c65013/profilepicturev2?displayname=Гнездилов Алексей Дмитриевич&amp;size=HR64x64"
                                alt="Аватар пользователя Гнездилов Алексей Дмитриевич." upn="Gnezd_mg41@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:cbf301cb-934e-4a99-b0dc-224095c65013/profilepicturev2?displayname=Гнездилов Алексей Дмитриевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:cbf301cb-934e-4a99-b0dc-224095c65013"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Гнездилов Алексей Дмитриевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 19:38:30">
         19:38
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore"
                                class="expanded">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p><span title="Рыдаю" type="(loudlycrying)" class="animated-emoticon-20-loudlycrying" contenteditable="false" style="width:20px; height:20px"><img itemscope="" itemtype="http://schema.skype.com/Emoji" itemid="loudlycrying" src="https://statics.teams.cdn.office.net/evergreen-assets/personal-expressions/v2/assets/emoticons/loudlycrying/default/20_f.png?v=4" title="Рыдаю" alt="😭" style="width:20px; height:20px"><span class="zoetrope" style="background-image: url('https://statics.teams.cdn.office.net/evergreen-assets/personal-expressions/v2/assets/emoticons/loudlycrying/default/20_anim_f.png?v=v22'); animation: emoticon-anim 3.0416666666666665s steps(73) 5; height: 1460px; background-size: 20px 1460px;"></span></span>
                                            </p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671035910725', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody189">
            <!--Regular message template-->
            <div id="m1671036268818" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions edited-message show-top-row keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">rfind - поиск с права на лево, find - поиск с лева на право, ответ от пользователя Портас Константин Сергеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:21bf49d8-b9fb-4c73-8a04-97cf59e07012" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-220" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:21bf49d8-b9fb-4c73-8a04-97cf59e07012/profilepicturev2?displayname=Портас Константин Сергеевич&amp;size=HR64x64"
                                alt="Аватар пользователя Портас Константин Сергеевич." upn="Porta_yx78@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:21bf49d8-b9fb-4c73-8a04-97cf59e07012/profilepicturev2?displayname=Портас Константин Сергеевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:21bf49d8-b9fb-4c73-8a04-97cf59e07012"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Портас Константин Сергеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 19:44:28">
         19:44
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="Изменено 14 дек., 19:44:47" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="Изменено 14 дек., 19:44:47" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>rfind - поиск с права на лево, find - поиск с лева на право</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671036268818', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody190">
            <!--Regular message template-->
            <div id="m1671036333877" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">Когда мы будем функции проходить?, ответ от пользователя Петроченков Алексей Андреевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:4f1e392a-d25a-49ab-bbf5-4ced6b27efe8" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-221" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:4f1e392a-d25a-49ab-bbf5-4ced6b27efe8/profilepicturev2?displayname=Петроченков Алексей Андреевич&amp;size=HR64x64"
                                alt="Аватар пользователя Петроченков Алексей Андреевич." upn="Petro_wi51@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:4f1e392a-d25a-49ab-bbf5-4ced6b27efe8/profilepicturev2?displayname=Петроченков Алексей Андреевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:4f1e392a-d25a-49ab-bbf5-4ced6b27efe8"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Петроченков Алексей Андреевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 19:45:33">
         19:45
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>Когда мы будем функции проходить?</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671036333877', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->

        <!---->
        <tombstone message-view-model="messageViewModel" ng-if="messageViewModel.isDeleted">
            <div id="m1671036342655" data-tid="tombstone-m1671036342655" class="media acc-thread-focusable tombstone-media" tabindex="-1" aria-label="Сообщение удалено." ng-class="{ 'message-action-error' : tmbCtrl.messageViewModel.hasMessageActionFailed,
              'self' : tmbCtrl.messageViewModel.isFromMe }">
                <div class="media-left">
                    <div class="wrapper">
                        <div class="media-object">
                            <svg viewBox="-6 -6 32 32" role="presentation" focusable="false" class="app-svg icons-delete"><g class="icons-default-fill"><path class="icons-filled" d="M10 1.25C11.4346 1.25 12.6126 2.34848 12.7388 3.75019L17 3.75C17.4142 3.75 17.75 4.08579 17.75 4.5C17.75 4.8797 17.4678 5.19349 17.1018 5.24315L17 5.25H16.417L15.1499 16.2292C15.0335 17.2384 14.179 18 13.1631 18H6.83688C5.821 18 4.9665 17.2384 4.85006 16.2292L3.582 5.25H3C2.6203 5.25 2.30651 4.96785 2.25685 4.60177L2.25 4.5C2.25 4.1203 2.53215 3.80651 2.89823 3.75685L3 3.75L7.26119 3.75019C7.38741 2.34848 8.56542 1.25 10 1.25ZM8.5 7.5C8.25454 7.5 8.05039 7.65477 8.00806 7.85886L8 7.9375V14.0625L8.00806 14.1411C8.05039 14.3452 8.25454 14.5 8.5 14.5C8.74546 14.5 8.94961 14.3452 8.99194 14.1411L9 14.0625V7.9375L8.99194 7.85886C8.94961 7.65477 8.74546 7.5 8.5 7.5ZM11.5 7.5C11.2545 7.5 11.0504 7.65477 11.0081 7.85886L11 7.9375V14.0625L11.0081 14.1411C11.0504 14.3452 11.2545 14.5 11.5 14.5C11.7455 14.5 11.9496 14.3452 11.9919 14.1411L12 14.0625V7.9375L11.9919 7.85886C11.9496 7.65477 11.7455 7.5 11.5 7.5ZM10 2.75C9.39524 2.75 8.89079 3.17947 8.77499 3.75005H11.225C11.1092 3.17947 10.6048 2.75 10 2.75Z"></path><path class="icons-unfilled" d="M11.5 4C11.5 3.17157 10.8284 2.5 10 2.5C9.17157 2.5 8.5 3.17157 8.5 4H7.5C7.5 2.61929 8.61929 1.5 10 1.5C11.3807 1.5 12.5 2.61929 12.5 4H17C17.2761 4 17.5 4.22386 17.5 4.5C17.5 4.77614 17.2761 5 17 5H16.446L15.1499 16.2292C15.0335 17.2384 14.179 18 13.1631 18H6.83688C5.821 18 4.9665 17.2384 4.85006 16.2292L3.553 5H3C2.75454 5 2.55039 4.82312 2.50806 4.58988L2.5 4.5C2.5 4.22386 2.72386 4 3 4H11.5ZM15.438 5H4.561L5.84347 16.1146C5.90169 16.6192 6.32894 17 6.83688 17H13.1631C13.6711 17 14.0983 16.6192 14.1565 16.1146L15.438 5ZM8.5 7.5C8.74546 7.5 8.94961 7.65477 8.99194 7.85886L9 7.9375V14.0625C9 14.3041 8.77614 14.5 8.5 14.5C8.25454 14.5 8.05039 14.3452 8.00806 14.1411L8 14.0625V7.9375C8 7.69588 8.22386 7.5 8.5 7.5ZM11.5 7.5C11.7455 7.5 11.9496 7.65477 11.9919 7.85886L12 7.9375V14.0625C12 14.3041 11.7761 14.5 11.5 14.5C11.2545 14.5 11.0504 14.3452 11.0081 14.1411L11 14.0625V7.9375C11 7.69588 11.2239 7.5 11.5 7.5Z"></path></g></svg>
                        </div>
                    </div>
                </div>
                <div class="tombstone-body message-body message-body-width">
                    <div class="tombstone-content">
                        <!---->

                        <div class="deleted-message" id="deleted-message-1671036342655" role="heading" aria-level="5" data-tid="deletedMessage">
                            <!---->
                            <!---->
                            <div ng-if="!tmbCtrl.showDataSpillageMessage()">
                                <span>
           Сообщение удалено.
           <!---->
         </span>
                            </div>
                            <!---->
                        </div>
                    </div>
                    <!---->
                </div>
            </div>
        </tombstone>
        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody192">
            <!--Regular message template-->
            <div id="m1671036344803" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">пон, ответ от пользователя Петроченков Алексей Андреевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:4f1e392a-d25a-49ab-bbf5-4ced6b27efe8" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-222" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:4f1e392a-d25a-49ab-bbf5-4ced6b27efe8/profilepicturev2?displayname=Петроченков Алексей Андреевич&amp;size=HR64x64"
                                alt="Аватар пользователя Петроченков Алексей Андреевич." upn="Petro_wi51@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:4f1e392a-d25a-49ab-bbf5-4ced6b27efe8/profilepicturev2?displayname=Петроченков Алексей Андреевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:4f1e392a-d25a-49ab-bbf5-4ced6b27efe8"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Петроченков Алексей Андреевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 19:45:44">
         19:45
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>пон</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671036344803', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody193">
            <!--Regular message template-->
            <div id="m1671036493215" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">unity for как c++, ответ от пользователя Сандульский Семён.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:3e008d96-8266-4c84-9869-a4efc34dee35" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-223" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:3e008d96-8266-4c84-9869-a4efc34dee35/profilepicturev2?displayname=Сандульский Семён&amp;size=HR64x64"
                                alt="Аватар пользователя Сандульский Семён." upn="Sandu_gs22@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:3e008d96-8266-4c84-9869-a4efc34dee35/profilepicturev2?displayname=Сандульский Семён&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:3e008d96-8266-4c84-9869-a4efc34dee35"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Сандульский Семён
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 19:48:13">
         19:48
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>unity for как c++</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671036493215', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody194">
            <!--Regular message template-->
            <div id="m1671036515236" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">у с, ответ от пользователя Бобров Степан Алексеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-224" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178/profilepicturev2?displayname=Бобров Степан Алексеевич&amp;size=HR64x64"
                                alt="Аватар пользователя Бобров Степан Алексеевич." upn="Bobro_us85@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178/profilepicturev2?displayname=Бобров Степан Алексеевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Бобров Степан Алексеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 19:48:35">
         19:48
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>у с</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671036515236', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody195">
            <!--Regular message template-->
            <div id="m1671036525350" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">си, ответ от пользователя Петроченков Алексей Андреевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:4f1e392a-d25a-49ab-bbf5-4ced6b27efe8" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-225" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:4f1e392a-d25a-49ab-bbf5-4ced6b27efe8/profilepicturev2?displayname=Петроченков Алексей Андреевич&amp;size=HR64x64"
                                alt="Аватар пользователя Петроченков Алексей Андреевич." upn="Petro_wi51@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:4f1e392a-d25a-49ab-bbf5-4ced6b27efe8/profilepicturev2?displayname=Петроченков Алексей Андреевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:4f1e392a-d25a-49ab-bbf5-4ced6b27efe8"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Петроченков Алексей Андреевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 19:48:45">
         19:48
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>си</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671036525350', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody196">
            <!--Regular message template-->
            <div id="m1671036531353" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">у "с", ответ от пользователя Бобров Степан Алексеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-226" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178/profilepicturev2?displayname=Бобров Степан Алексеевич&amp;size=HR64x64"
                                alt="Аватар пользователя Бобров Степан Алексеевич." upn="Bobro_us85@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178/profilepicturev2?displayname=Бобров Степан Алексеевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Бобров Степан Алексеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 19:48:51">
         19:48
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>у "с"</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671036531353', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody197">
            <!--Regular message template-->
            <div id="m1671036533654" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like merge-bubble" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">си, ответ от пользователя Бобров Степан Алексеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Бобров Степан Алексеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime ng-hide" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 19:48:53">
         19:48
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>си</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671036533654', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody198">
            <!--Regular message template-->
            <div id="m1671036537450" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">Можно посмотреть? Гнездилов Алексей Дмитриевич str = 'Маша собирала яблоки в горах Кавказа.' list(…, ответ от пользователя Гнездилов Алексей Дмитриевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:cbf301cb-934e-4a99-b0dc-224095c65013" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-195" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:cbf301cb-934e-4a99-b0dc-224095c65013/profilepicturev2?displayname=Гнездилов Алексей Дмитриевич&amp;size=HR64x64"
                                alt="Аватар пользователя Гнездилов Алексей Дмитриевич." upn="Gnezd_mg41@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:cbf301cb-934e-4a99-b0dc-224095c65013/profilepicturev2?displayname=Гнездилов Алексей Дмитриевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:cbf301cb-934e-4a99-b0dc-224095c65013"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Гнездилов Алексей Дмитриевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 19:48:57">
         19:48
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content ts-see-more-btn-showing" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>Можно посмотреть?</p>
                                            <blockquote itemscope="" itemtype="http://schema.skype.com/Reply" itemid="1671035601784">
                                                <strong itemprop="mri" itemid="8:orgid:cbf301cb-934e-4a99-b0dc-224095c65013">Гнездилов Алексей Дмитриевич</strong><span itemprop="time" itemid="1671035601784"></span>
                                                <p itemprop="preview">str = 'Маша собирала яблоки в горах Кавказа.' list(str) a = input("&lt;&lt;&lt; ") b = len(str) while 1: с = b - len(str) if a == str[с]: print(b) break b -= 1</p>
                                            </blockquote>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4" track-data="{messageID: '1671036537450', leftRailDirective: 'school-app-left-rail'}"
                                    track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody199">
            <!--Regular message template-->
            <div id="m1671036549535" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions edited-message show-top-row keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">
                    c c++ c# , ответ от пользователя Петроченков Алексей Андреевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:4f1e392a-d25a-49ab-bbf5-4ced6b27efe8" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-196" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:4f1e392a-d25a-49ab-bbf5-4ced6b27efe8/profilepicturev2?displayname=Петроченков Алексей Андреевич&amp;size=HR64x64"
                                alt="Аватар пользователя Петроченков Алексей Андреевич." upn="Petro_wi51@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:4f1e392a-d25a-49ab-bbf5-4ced6b27efe8/profilepicturev2?displayname=Петроченков Алексей Андреевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:4f1e392a-d25a-49ab-bbf5-4ced6b27efe8"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Петроченков Алексей Андреевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 19:49:09">
         19:49
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="Изменено 14 дек., 19:49:29" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="Изменено 14 дек., 19:49:29" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <div>
                                                <p>c c++ c#</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671036549535', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody200">
            <!--Regular message template-->
            <div id="m1671036583835" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">работа с памятью, ответ от пользователя Бобров Степан Алексеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-197" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178/profilepicturev2?displayname=Бобров Степан Алексеевич&amp;size=HR64x64"
                                alt="Аватар пользователя Бобров Степан Алексеевич." upn="Bobro_us85@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178/profilepicturev2?displayname=Бобров Степан Алексеевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Бобров Степан Алексеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 19:49:43">
         19:49
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>работа с памятью</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671036583835', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody201">
            <!--Regular message template-->
            <div id="m1671036591345" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions merge-bubble keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">7 кругов ада, ответ от пользователя Бобров Степан Алексеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Бобров Степан Алексеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime ng-hide" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 19:49:51">
         19:49
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>7 кругов ада</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671036591345', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody202">
            <!--Regular message template-->
            <div id="m1671036600619" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions merge-bubble keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">возможно 8, ответ от пользователя Бобров Степан Алексеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Бобров Степан Алексеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime ng-hide" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 19:50:00">
         19:50
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>возможно 8</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671036600619', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody203">
            <!--Regular message template-->
            <div id="m1671036622063" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">
                    Бобров Степан Алексеевич возможно 8 99999999999999999999999999999999999999999999999999999999999999…, ответ от пользователя Сафронов Артём Игоревич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:96cb4cbd-2b1a-4ffe-b527-cf60e29332dd" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-198" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:96cb4cbd-2b1a-4ffe-b527-cf60e29332dd/profilepicturev2?displayname=Сафронов Артём Игоревич&amp;size=HR64x64"
                                alt="Аватар пользователя Сафронов Артём Игоревич." upn="Safro_wj68@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:96cb4cbd-2b1a-4ffe-b527-cf60e29332dd/profilepicturev2?displayname=Сафронов Артём Игоревич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="В сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym online" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:96cb4cbd-2b1a-4ffe-b527-cf60e29332dd"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Сафронов Артём Игоревич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 19:50:22">
         19:50
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <blockquote itemscope="" itemtype="http://schema.skype.com/Reply" itemid="1671036600619">
                                                <strong itemprop="mri" itemid="8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178">Бобров Степан Алексеевич</strong><span itemprop="time" itemid="1671036600619"></span>
                                                <p itemprop="preview">возможно 8</p>
                                            </blockquote>
                                            <p>9999999999999999999999999999999999999999999999999999999999999999999</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671036622063', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody204">
            <!--Regular message template-->
            <div id="m1671036709504" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">nasm fasm, ответ от пользователя Бобров Степан Алексеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-199" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178/profilepicturev2?displayname=Бобров Степан Алексеевич&amp;size=HR64x64"
                                alt="Аватар пользователя Бобров Степан Алексеевич." upn="Bobro_us85@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178/profilepicturev2?displayname=Бобров Степан Алексеевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Бобров Степан Алексеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 19:51:49">
         19:51
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>nasm fasm</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671036709504', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody205">
            <!--Regular message template-->
            <div id="m1671036712991" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">у меня завтра пробник по русскому . так что до свидание . спасибо за урок , ответ от пользователя Тюргашкин Максим Михайлович.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:dc1f0536-bff6-4126-95db-a318aacc229f" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-200" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:dc1f0536-bff6-4126-95db-a318aacc229f/profilepicturev2?displayname=Тюргашкин Максим Михайлович&amp;size=HR64x64"
                                alt="Аватар пользователя Тюргашкин Максим Михайлович." upn="Tyurg_pe69@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:dc1f0536-bff6-4126-95db-a318aacc229f/profilepicturev2?displayname=Тюргашкин Максим Михайлович&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:dc1f0536-bff6-4126-95db-a318aacc229f"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Тюргашкин Максим Михайлович
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 19:51:52">
         19:51
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>у меня завтра пробник по русскому . так что до свидание . спасибо за урок </p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671036712991', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody206">
            <!--Regular message template-->
            <div id="m1671036726174" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">
                    Тюргашкин Максим Михайлович у меня завтра пробник по русскому . так что до свидание . спасибо за ур…, ответ от пользователя Бровкин Михаил Сергеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:474bd458-f97e-4fb2-b697-3a616a81d012" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-201" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:474bd458-f97e-4fb2-b697-3a616a81d012/profilepicturev2?displayname=Бровкин Михаил Сергеевич&amp;size=HR64x64"
                                alt="Аватар пользователя Бровкин Михаил Сергеевич." upn="Brovk_gi63@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:474bd458-f97e-4fb2-b697-3a616a81d012/profilepicturev2?displayname=Бровкин Михаил Сергеевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:474bd458-f97e-4fb2-b697-3a616a81d012"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Бровкин Михаил Сергеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 19:52:06">
         19:52
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <blockquote itemscope="" itemtype="http://schema.skype.com/Reply" itemid="1671036712991">
                                                <strong itemprop="mri" itemid="8:orgid:dc1f0536-bff6-4126-95db-a318aacc229f">Тюргашкин Максим Михайлович</strong><span itemprop="time" itemid="1671036712991"></span>
                                                <p itemprop="preview">у меня завтра пробник по русскому . так что до свидание . спасибо за урок</p>
                                            </blockquote>
                                            <p>у меня по матеше)</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671036726174', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody207">
            <!--Regular message template-->
            <div id="m1671036729684" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">&nbsp; , изображение, &nbsp;, ответ от пользователя Сафронов Артём Игоревич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:96cb4cbd-2b1a-4ffe-b527-cf60e29332dd" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-202" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:96cb4cbd-2b1a-4ffe-b527-cf60e29332dd/profilepicturev2?displayname=Сафронов Артём Игоревич&amp;size=HR64x64"
                                alt="Аватар пользователя Сафронов Артём Игоревич." upn="Safro_wj68@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:96cb4cbd-2b1a-4ffe-b527-cf60e29332dd/profilepicturev2?displayname=Сафронов Артём Игоревич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="В сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym online" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:96cb4cbd-2b1a-4ffe-b527-cf60e29332dd"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Сафронов Артём Игоревич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 19:52:09">
         19:52
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore"
                                class="expanded">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>&nbsp;</p>
                                            <p><span class="ts-image ts-image-container" contenteditable="false" style="display: inline-block; position: relative; max-width: 100%; width: 90.85648148148148px; vertical-align: bottom; line-height: 0; overflow: hidden;"><span class="ts-image" ng-click="onClick(0)" decorate-click-for-acc-selfonly="" ts-right-click="onRightClick(0, $event)" track-outcome="{​​{​​::$root.trackConstants.trackOutcome.inspect}​​}​​" track-scenario="{​​{​​::$root.trackConstants.trackScenario.messageOpenImage}​​}​​" track-scenario-type="{​​{​​::$root.trackConstants.trackScenarioType.readMsgs}​​}​​" track-name="{​​{​​::$root.trackConstants.trackModuleName.inlineImageLightbox}​​}​​" track-type="{​​{​​::$root.trackConstants.trackType.lightbox}​​}​​" track-summary="Image" style="display: inline-block; padding-bottom: 278%; width: 90.85648148148148px;"><a href="https://eu-prod.asyncgw.teams.microsoft.com/v1/objects/0-weu-d3-229d7c603f643e342932081089103188/views/imgo" media-preview-enabler="" tabindex="-1" ng-click="$event.stopPropagation();" aria-label="изображение" target="_blank" rel="noreferrer noopener"><img class="ts-image" target-src="https://eu-prod.asyncgw.teams.microsoft.com/v1/objects/0-weu-d3-229d7c603f643e342932081089103188/views/imgo" width="90.85648148148148" height="250" itemscope="png" alt="изображение" aria-label="изображение" itemtype="http://schema.skype.com/AMSImage" id="x_0-weu-d3-229d7c603f643e342932081089103188" itemid="0-weu-d3-229d7c603f643e342932081089103188" lazy-load="true" data-tid="messageBodyImageSrc" style="width: auto; height: auto" src="blob:https://teams.microsoft.com/3ab57b32-10d5-4d98-bf21-f4f7aec4cc39"></a></span></span>
                                            </p>
                                            <p>&nbsp;</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671036729684', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody208">
            <!--Regular message template-->
            <div id="m1671036734584" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">до свидания, ответ от пользователя Сандульский Семён.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:3e008d96-8266-4c84-9869-a4efc34dee35" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-203" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:3e008d96-8266-4c84-9869-a4efc34dee35/profilepicturev2?displayname=Сандульский Семён&amp;size=HR64x64"
                                alt="Аватар пользователя Сандульский Семён." upn="Sandu_gs22@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:3e008d96-8266-4c84-9869-a4efc34dee35/profilepicturev2?displayname=Сандульский Семён&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:3e008d96-8266-4c84-9869-a4efc34dee35"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Сандульский Семён
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 19:52:14">
         19:52
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>до свидания</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671036734584', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody209">
            <!--Regular message template-->
            <div id="m1671036734976" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">и это только начало, ответ от пользователя Сафронов Артём Игоревич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:96cb4cbd-2b1a-4ffe-b527-cf60e29332dd" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-204" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:96cb4cbd-2b1a-4ffe-b527-cf60e29332dd/profilepicturev2?displayname=Сафронов Артём Игоревич&amp;size=HR64x64"
                                alt="Аватар пользователя Сафронов Артём Игоревич." upn="Safro_wj68@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:96cb4cbd-2b1a-4ffe-b527-cf60e29332dd/profilepicturev2?displayname=Сафронов Артём Игоревич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="В сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym online" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:96cb4cbd-2b1a-4ffe-b527-cf60e29332dd"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Сафронов Артём Игоревич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 19:52:14">
         19:52
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>и это только начало</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671036734976', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody210">
            <!--Regular message template-->
            <div id="m1671036917135" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">до свидания, ответ от пользователя Семенова Екатерина Александровна.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:5e9e57bb-6f0c-438b-bf3a-3417be184470" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-205" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:5e9e57bb-6f0c-438b-bf3a-3417be184470/profilepicturev2?displayname=Семенова Екатерина Александровна&amp;size=HR64x64"
                                alt="Аватар пользователя Семенова Екатерина Александровна." upn="Semen_jx73@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:5e9e57bb-6f0c-438b-bf3a-3417be184470/profilepicturev2?displayname=Семенова Екатерина Александровна&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:5e9e57bb-6f0c-438b-bf3a-3417be184470"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Семенова Екатерина Александровна
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 19:55:17">
         19:55
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>до свидания</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671036917135', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody211">
            <!--Regular message template-->
            <div id="m1671036923470" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">ну это больше возможностей, ответ от пользователя Петроченков Алексей Андреевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:4f1e392a-d25a-49ab-bbf5-4ced6b27efe8" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-206" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:4f1e392a-d25a-49ab-bbf5-4ced6b27efe8/profilepicturev2?displayname=Петроченков Алексей Андреевич&amp;size=HR64x64"
                                alt="Аватар пользователя Петроченков Алексей Андреевич." upn="Petro_wi51@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:4f1e392a-d25a-49ab-bbf5-4ced6b27efe8/profilepicturev2?displayname=Петроченков Алексей Андреевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:4f1e392a-d25a-49ab-bbf5-4ced6b27efe8"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Петроченков Алексей Андреевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 19:55:23">
         19:55
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>ну это больше возможностей</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671036923470', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody212">
            <!--Regular message template-->
            <div id="m1671036923975" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">там можно выстрелить себе в ногу, ответ от пользователя Бобров Степан Алексеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-207" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178/profilepicturev2?displayname=Бобров Степан Алексеевич&amp;size=HR64x64"
                                alt="Аватар пользователя Бобров Степан Алексеевич." upn="Bobro_us85@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178/profilepicturev2?displayname=Бобров Степан Алексеевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Бобров Степан Алексеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 19:55:23">
         19:55
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>там можно выстрелить себе в ногу</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671036923975', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody213">
            <!--Regular message template-->
            <div id="m1671036930060" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">досвидание, ответ от пользователя Саничев Артур Вячеславович.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:1c78ec7f-a250-4dd7-933d-db57f0e82473" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-208" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:1c78ec7f-a250-4dd7-933d-db57f0e82473/profilepicturev2?displayname=Саничев Артур Вячеславович&amp;size=HR64x64"
                                alt="Аватар пользователя Саничев Артур Вячеславович." upn="Sanic_fx75@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:1c78ec7f-a250-4dd7-933d-db57f0e82473/profilepicturev2?displayname=Саничев Артур Вячеславович&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:1c78ec7f-a250-4dd7-933d-db57f0e82473"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Саничев Артур Вячеславович
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 19:55:30">
         19:55
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>досвидание</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671036930060', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody214">
            <!--Regular message template-->
            <div id="m1671036947830" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">до свидания, ответ от пользователя Кириллова Ульяна Станиславовна.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:2a34fd62-d738-454f-937d-b07f443f3147" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-209" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:2a34fd62-d738-454f-937d-b07f443f3147/profilepicturev2?displayname=Кириллова Ульяна Станиславовна&amp;size=HR64x64"
                                alt="Аватар пользователя Кириллова Ульяна Станиславовна." upn="Kiril_jc33@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:2a34fd62-d738-454f-937d-b07f443f3147/profilepicturev2?displayname=Кириллова Ульяна Станиславовна&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:2a34fd62-d738-454f-937d-b07f443f3147"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Кириллова Ульяна Станиславовна
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 19:55:47">
         19:55
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>до свидания</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671036947830', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody215">
            <!--Regular message template-->
            <div id="m1671036951639" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">а потом появился раст, ответ от пользователя Бобров Степан Алексеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-210" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178/profilepicturev2?displayname=Бобров Степан Алексеевич&amp;size=HR64x64"
                                alt="Аватар пользователя Бобров Степан Алексеевич." upn="Bobro_us85@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178/profilepicturev2?displayname=Бобров Степан Алексеевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Бобров Степан Алексеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 19:55:51">
         19:55
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>а потом появился раст</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671036951639', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody216">
            <!--Regular message template-->
            <div id="m1671036964570" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">До свидания, ответ от пользователя Гнездилов Алексей Дмитриевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:cbf301cb-934e-4a99-b0dc-224095c65013" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-211" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:cbf301cb-934e-4a99-b0dc-224095c65013/profilepicturev2?displayname=Гнездилов Алексей Дмитриевич&amp;size=HR64x64"
                                alt="Аватар пользователя Гнездилов Алексей Дмитриевич." upn="Gnezd_mg41@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:cbf301cb-934e-4a99-b0dc-224095c65013/profilepicturev2?displayname=Гнездилов Алексей Дмитриевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:cbf301cb-934e-4a99-b0dc-224095c65013"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Гнездилов Алексей Дмитриевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 19:56:04">
         19:56
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>До свидания</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671036964570', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody217">
            <!--Regular message template-->
            <div id="m1671036970782" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like merge-bubble" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">А нет не до свидания, ответ от пользователя Гнездилов Алексей Дмитриевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Гнездилов Алексей Дмитриевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime ng-hide" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 19:56:10">
         19:56
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>А нет не до свидания</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671036970782', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody218">
            <!--Regular message template-->
            <div id="m1671036978023" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions merge-bubble keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">Это был пранк, ответ от пользователя Гнездилов Алексей Дмитриевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Гнездилов Алексей Дмитриевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime ng-hide" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 19:56:18">
         19:56
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>Это был пранк</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671036978023', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody219">
            <!--Regular message template-->
            <div id="m1671037035817" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">поэтому лучше не писать код, ответ от пользователя Бобров Степан Алексеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-177" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178/profilepicturev2?displayname=Бобров Степан Алексеевич&amp;size=HR64x64"
                                alt="Аватар пользователя Бобров Степан Алексеевич." upn="Bobro_us85@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178/profilepicturev2?displayname=Бобров Степан Алексеевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Бобров Степан Алексеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 19:57:15">
         19:57
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>поэтому лучше не писать код</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671037035817', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody220">
            <!--Regular message template-->
            <div id="m1671037036226" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">До свидания, ответ от пользователя Петроченков Алексей Андреевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:4f1e392a-d25a-49ab-bbf5-4ced6b27efe8" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-178" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:4f1e392a-d25a-49ab-bbf5-4ced6b27efe8/profilepicturev2?displayname=Петроченков Алексей Андреевич&amp;size=HR64x64"
                                alt="Аватар пользователя Петроченков Алексей Андреевич." upn="Petro_wi51@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:4f1e392a-d25a-49ab-bbf5-4ced6b27efe8/profilepicturev2?displayname=Петроченков Алексей Андреевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:4f1e392a-d25a-49ab-bbf5-4ced6b27efe8"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Петроченков Алексей Андреевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 19:57:16">
         19:57
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>До свидания</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671037036226', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody221">
            <!--Regular message template-->
            <div id="m1671037045347" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">скрейч наш выбор, ответ от пользователя Бобров Степан Алексеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-179" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178/profilepicturev2?displayname=Бобров Степан Алексеевич&amp;size=HR64x64"
                                alt="Аватар пользователя Бобров Степан Алексеевич." upn="Bobro_us85@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178/profilepicturev2?displayname=Бобров Степан Алексеевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Бобров Степан Алексеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 19:57:25">
         19:57
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>скрейч наш выбор</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671037045347', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody222">
            <!--Regular message template-->
            <div id="m1671037069601" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">нифига, ответ от пользователя Портас Константин Сергеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:21bf49d8-b9fb-4c73-8a04-97cf59e07012" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-180" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:21bf49d8-b9fb-4c73-8a04-97cf59e07012/profilepicturev2?displayname=Портас Константин Сергеевич&amp;size=HR64x64"
                                alt="Аватар пользователя Портас Константин Сергеевич." upn="Porta_yx78@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:21bf49d8-b9fb-4c73-8a04-97cf59e07012/profilepicturev2?displayname=Портас Константин Сергеевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:21bf49d8-b9fb-4c73-8a04-97cf59e07012"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Портас Константин Сергеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 19:57:49">
         19:57
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>нифига</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671037069601', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody223">
            <!--Calling message template-->
            <div id="m1671037083532" data-tid="threadBodyMedia" class="media thread-body is-call-message acc-thread-focusable thread-body-call-end" ng-hide="::(ctrl.isCallRecordingMessage &amp;&amp; !ctrl.isRecordingFlagEnabled) || (ctrl.isCallTranscriptMessage &amp;&amp; !ctrl.messageViewModel.isTranscriptEnabled)"
                ng-class="{ 'thread-body-call-end': (ctrl.isCallEndedMessage || ctrl.isCallRecordingStoppedAndSavingMessage), 'thread-body-call-recording': ctrl.isRecordingFlagEnabled &amp;&amp; (ctrl.messageViewModel.recordings.length > 0 || ctrl.isCallRecordingMessage)}"
                tabindex="-1" simple-focus="ctrl.onFocus($event)" simple-blur="ctrl.onBlur($event)">

                <!--Chat head-->
                <div class="media-left">
                    <div class="wrapper">
                        <!---->
                        <!---->
                        <div ng-if="ctrl.isCallRecordingStoppedAndSavingMessage"><svg viewBox="-6 -6 32 32" role="presentation" focusable="false" class="app-svg icons-call-recording-stop"><g class="icons-default-fill"><path class="icons-default-fill" d="M10 3C6.13401 3 3 6.13401 3 10C3 13.866 6.13401 17 10 17C13.866 17 17 13.866 17 10C17 6.13401 13.866 3 10 3ZM2 10C2 5.58172 5.58172 2 10 2C14.4183 2 18 5.58172 18 10C18 14.4183 14.4183 18 10 18C5.58172 18 2 14.4183 2 10ZM7 8C7 7.44772 7.44772 7 8 7H12C12.5523 7 13 7.44772 13 8V12C13 12.5523 12.5523 13 12 13H8C7.44772 13 7 12.5523 7 12V8Z"></path></g></svg></div>
                        <!---->
                        <!---->
                    </div>
                </div>

                <div class="ts-message-thread-body" data-tid="messageThreadBody">
                    <div class="message-body message-body-width">
                        <!---->
                        <calling-thread-body ng-if="!ctrl.isCallRecordingMessage &amp;&amp; !ctrl.isCallTranscriptMessage" message-vm="::ctrl.messageViewModel" defered-pre-render-ready="ctrl.deferedPreRenderReady" conversation-id="19:x48VY3ngTSvbeDyfkVZlEz4fHRXcZCQcCJFeukTUbNA1@thread.tacv2"
                            render-state="ctrl.renderState" host-tenant-id="ctrl.hostTenantId" is-shared-channel="ctrl.isSharedChannel">
                            <div class="ts-calling-thread-body">
                                <div class="content">
                                    <div class="top padded-content">
                                        <div class="left larger" ng-class="{
   'call-ended': ctrl.messageVm.isCallEndedMessage
   }" ng-bind-html="ctrl.callTitleHtml" ng-attr-data-tid="{{ctrl.messageVm.isCallEndedMessage &amp;&amp; 'call-ended-' + ctrl.messageVm.callId || 'in-progress-' + ctrl.messageVm.callId}}" data-tid="in-progress-0af7ada6-8b5d-410b-80c8-4bc4ed8ea908">Запись остановлена. Идет ее сохранение...</div>
                                        <!---->
                                        <!---->
                                    </div>
                                    <!---->
                                </div>
                                <!---->
                            </div>
                        </calling-thread-body>
                        <!---->
                        <!---->
                        <!---->
                    </div>
                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody224">
            <!--Regular message template-->
            <div id="m1671037089633" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">До свидания 2: возвращение, ответ от пользователя Гнездилов Алексей Дмитриевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:cbf301cb-934e-4a99-b0dc-224095c65013" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-181" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:cbf301cb-934e-4a99-b0dc-224095c65013/profilepicturev2?displayname=Гнездилов Алексей Дмитриевич&amp;size=HR64x64"
                                alt="Аватар пользователя Гнездилов Алексей Дмитриевич." upn="Gnezd_mg41@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:cbf301cb-934e-4a99-b0dc-224095c65013/profilepicturev2?displayname=Гнездилов Алексей Дмитриевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:cbf301cb-934e-4a99-b0dc-224095c65013"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Гнездилов Алексей Дмитриевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 19:58:09">
         19:58
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>До свидания 2: возвращение</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671037089633', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody225">
            <!--Calling message template-->
            <div id="m1671037091052" data-tid="threadBodyMedia" class="media thread-body is-call-message acc-thread-focusable" ng-hide="::(ctrl.isCallRecordingMessage &amp;&amp; !ctrl.isRecordingFlagEnabled) || (ctrl.isCallTranscriptMessage &amp;&amp; !ctrl.messageViewModel.isTranscriptEnabled)"
                ng-class="{ 'thread-body-call-end': (ctrl.isCallEndedMessage || ctrl.isCallRecordingStoppedAndSavingMessage), 'thread-body-call-recording': ctrl.isRecordingFlagEnabled &amp;&amp; (ctrl.messageViewModel.recordings.length > 0 || ctrl.isCallRecordingMessage)}"
                tabindex="-1" simple-focus="ctrl.onFocus($event)" simple-blur="ctrl.onBlur($event)">

                <!--Chat head-->
                <div class="media-left">
                    <div class="wrapper">
                        <!---->
                        <div ng-if="ctrl.isCallRecordingStartedMessage"><svg viewBox="-6 -6 32 32" role="presentation" focusable="false" class="app-svg icons-call-recording-start"><g class="icons-default-fill"><path class="icons-default-fill" d="M10 14.5C12.4853 14.5 14.5 12.4853 14.5 10C14.5 7.51472 12.4853 5.5 10 5.5C7.51472 5.5 5.5 7.51472 5.5 10C5.5 12.4853 7.51472 14.5 10 14.5ZM10 2C5.58172 2 2 5.58172 2 10C2 14.4183 5.58172 18 10 18C14.4183 18 18 14.4183 18 10C18 5.58172 14.4183 2 10 2ZM3 10C3 6.13401 6.13401 3 10 3C13.866 3 17 6.13401 17 10C17 13.866 13.866 17 10 17C6.13401 17 3 13.866 3 10Z"></path></g></svg></div>
                        <!---->
                        <!---->
                        <!---->
                    </div>
                </div>

                <div class="ts-message-thread-body" data-tid="messageThreadBody">
                    <div class="message-body message-body-width">
                        <!---->
                        <calling-thread-body ng-if="!ctrl.isCallRecordingMessage &amp;&amp; !ctrl.isCallTranscriptMessage" message-vm="::ctrl.messageViewModel" defered-pre-render-ready="ctrl.deferedPreRenderReady" conversation-id="19:x48VY3ngTSvbeDyfkVZlEz4fHRXcZCQcCJFeukTUbNA1@thread.tacv2"
                            render-state="ctrl.renderState" host-tenant-id="ctrl.hostTenantId" is-shared-channel="ctrl.isSharedChannel">
                            <div class="ts-calling-thread-body">
                                <div class="content">
                                    <div class="top padded-content">
                                        <div class="left larger" ng-class="{
   'call-ended': ctrl.messageVm.isCallEndedMessage
   }" ng-bind-html="ctrl.callTitleHtml" ng-attr-data-tid="{{ctrl.messageVm.isCallEndedMessage &amp;&amp; 'call-ended-' + ctrl.messageVm.callId || 'in-progress-' + ctrl.messageVm.callId}}" data-tid="in-progress-0af7ada6-8b5d-410b-80c8-4bc4ed8ea908">Запись начата</div>
                                        <!---->
                                        <!---->
                                    </div>
                                    <!---->
                                </div>
                                <!---->
                            </div>
                        </calling-thread-body>
                        <!---->
                        <!---->
                        <!---->
                    </div>
                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody226">
            <!--Regular message template-->
            <div id="m1671037151779" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">а почему запись опять началась?, ответ от пользователя Бобров Степан Алексеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-182" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178/profilepicturev2?displayname=Бобров Степан Алексеевич&amp;size=HR64x64"
                                alt="Аватар пользователя Бобров Степан Алексеевич." upn="Bobro_us85@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178/profilepicturev2?displayname=Бобров Степан Алексеевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Бобров Степан Алексеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 19:59:11">
         19:59
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>а почему запись опять началась?</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671037151779', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody227">
            <!--Calling message template-->
            <div id="m1671037163197" data-tid="threadBodyMedia" class="media thread-body is-call-message acc-thread-focusable thread-body-call-end" ng-hide="::(ctrl.isCallRecordingMessage &amp;&amp; !ctrl.isRecordingFlagEnabled) || (ctrl.isCallTranscriptMessage &amp;&amp; !ctrl.messageViewModel.isTranscriptEnabled)"
                ng-class="{ 'thread-body-call-end': (ctrl.isCallEndedMessage || ctrl.isCallRecordingStoppedAndSavingMessage), 'thread-body-call-recording': ctrl.isRecordingFlagEnabled &amp;&amp; (ctrl.messageViewModel.recordings.length > 0 || ctrl.isCallRecordingMessage)}"
                tabindex="-1" simple-focus="ctrl.onFocus($event)" simple-blur="ctrl.onBlur($event)">

                <!--Chat head-->
                <div class="media-left">
                    <div class="wrapper">
                        <!---->
                        <!---->
                        <div ng-if="ctrl.isCallRecordingStoppedAndSavingMessage"><svg viewBox="-6 -6 32 32" role="presentation" focusable="false" class="app-svg icons-call-recording-stop"><g class="icons-default-fill"><path class="icons-default-fill" d="M10 3C6.13401 3 3 6.13401 3 10C3 13.866 6.13401 17 10 17C13.866 17 17 13.866 17 10C17 6.13401 13.866 3 10 3ZM2 10C2 5.58172 5.58172 2 10 2C14.4183 2 18 5.58172 18 10C18 14.4183 14.4183 18 10 18C5.58172 18 2 14.4183 2 10ZM7 8C7 7.44772 7.44772 7 8 7H12C12.5523 7 13 7.44772 13 8V12C13 12.5523 12.5523 13 12 13H8C7.44772 13 7 12.5523 7 12V8Z"></path></g></svg></div>
                        <!---->
                        <!---->
                    </div>
                </div>

                <div class="ts-message-thread-body" data-tid="messageThreadBody">
                    <div class="message-body message-body-width">
                        <!---->
                        <calling-thread-body ng-if="!ctrl.isCallRecordingMessage &amp;&amp; !ctrl.isCallTranscriptMessage" message-vm="::ctrl.messageViewModel" defered-pre-render-ready="ctrl.deferedPreRenderReady" conversation-id="19:x48VY3ngTSvbeDyfkVZlEz4fHRXcZCQcCJFeukTUbNA1@thread.tacv2"
                            render-state="ctrl.renderState" host-tenant-id="ctrl.hostTenantId" is-shared-channel="ctrl.isSharedChannel">
                            <div class="ts-calling-thread-body">
                                <div class="content">
                                    <div class="top padded-content">
                                        <div class="left larger" ng-class="{
   'call-ended': ctrl.messageVm.isCallEndedMessage
   }" ng-bind-html="ctrl.callTitleHtml" ng-attr-data-tid="{{ctrl.messageVm.isCallEndedMessage &amp;&amp; 'call-ended-' + ctrl.messageVm.callId || 'in-progress-' + ctrl.messageVm.callId}}" data-tid="in-progress-0af7ada6-8b5d-410b-80c8-4bc4ed8ea908">Запись остановлена. Идет ее сохранение...</div>
                                        <!---->
                                        <!---->
                                    </div>
                                    <!---->
                                </div>
                                <!---->
                            </div>
                        </calling-thread-body>
                        <!---->
                        <!---->
                        <!---->
                    </div>
                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody228">
            <!--Calling message template-->
            <div id="m1671037180029" data-tid="threadBodyMedia" class="media thread-body is-call-message acc-thread-focusable thread-body-call-recording" ng-hide="::(ctrl.isCallRecordingMessage &amp;&amp; !ctrl.isRecordingFlagEnabled) || (ctrl.isCallTranscriptMessage &amp;&amp; !ctrl.messageViewModel.isTranscriptEnabled)"
                ng-class="{ 'thread-body-call-end': (ctrl.isCallEndedMessage || ctrl.isCallRecordingStoppedAndSavingMessage), 'thread-body-call-recording': ctrl.isRecordingFlagEnabled &amp;&amp; (ctrl.messageViewModel.recordings.length > 0 || ctrl.isCallRecordingMessage)}"
                tabindex="-1" simple-focus="ctrl.onFocus($event)" simple-blur="ctrl.onBlur($event)">

                <!--Chat head-->
                <div class="media-left">
                    <div class="wrapper">
                        <!---->
                        <!---->
                        <!---->
                        <div ng-if="!(ctrl.isCallRecordingStoppedAndSavingMessage || ctrl.isCallRecordingStartedMessage)"><svg role="presentation" viewBox="-6 -6 32 32" class="app-svg icons-call-meetup-line"><g class="icons-default-fill"><path class="icons-unfilled" d="M4.5 4C3.11929 4 2 5.11929 2 6.5V13.5C2 14.8807 3.11929 16 4.5 16H11.5C12.8807 16 14 14.8807 14 13.5V12.5L16.4 14.3C17.0592 14.7944 18 14.324 18 13.5V6.49998C18 5.67594 17.0592 5.20556 16.4 5.69998L14 7.49998V6.5C14 5.11929 12.8807 4 11.5 4H4.5ZM14 8.74998L17 6.49998V13.5L14 11.25V8.74998ZM13 6.5V13.5C13 14.3284 12.3284 15 11.5 15H4.5C3.67157 15 3 14.3284 3 13.5V6.5C3 5.67157 3.67157 5 4.5 5H11.5C12.3284 5 13 5.67157 13 6.5Z"></path><path class="icons-filled" d="M13 6.5C13 5.11929 11.8807 4 10.5 4H4.5C3.11929 4 2 5.11929 2 6.5V13.5C2 14.8807 3.11929 16 4.5 16H10.5C11.8807 16 13 14.8807 13 13.5V6.5ZM14 7.93082V12.0815L16.7642 14.4319C17.2512 14.8461 18 14.4999 18 13.8606V6.19315C18 5.55685 17.2575 5.20962 16.7692 5.61756L14 7.93082Z"></path></g></svg></div>
                        <!---->
                    </div>
                </div>

                <div class="ts-message-thread-body" data-tid="messageThreadBody">
                    <div class="message-body message-body-width">
                        <!---->
                        <!---->
                        <calling-recording-message ng-if="::ctrl.isCallRecordingMessage" message-vm="::ctrl.messageViewModel.recordings[0] || ctrl.messageViewModel">
                            <!---->
                            <div ng-class="{ 'recording-expiration': ctrl.hasRecordingExpirationBanner,'recording-expiration-hidden': !ctrl.hasRecordingExpirationBanner}" ng-if="!ctrl.isLoading" class="recording-expiration">
                                <div class="ts-calling-recording-message inset-border inset-border-themed successful action-menu-enabled" ng-class="[ctrl.recordingStateCssClass, {'acc-thread-focusable': ctrl.standaloneMessage, 'action-menu-enabled': ctrl.isActionMenuEnabled}]" id="recording-1671037180029"
                                    ng-attr-aria-label="{{::ctrl.standaloneMessage &amp;&amp; ctrl.recordingMessageLabel || undefined}}" ng-attr-tabindex="{{::ctrl.standaloneMessage &amp;&amp; -1 || undefined}}">
                                    <div class="recording-button inset-border inset-border-themed recording-button-has-expiration-banner" ng-class="{ 'recording-button-has-expiration-banner' : ctrl.hasRecordingExpirationBanner}" ng-click="::ctrl.showVideo()" ng-attr-aria-disabled="{{ctrl.ariaDisabled}}"
                                        role="button" tabindex="-1" aria-disabled="false">
                                        <div class="recording-thumbnail recording-thumbnail-has-expiration-banner" ng-class="{ 'recording-thumbnail-has-expiration-banner' : ctrl.hasRecordingExpirationBanner}" title="Воспроизвести видео" aria-hidden="true">
                                            <!----><img class="thumbnail-image ts-image" ng-if="ctrl.isThumbnailImgAvailable" target-src="https://eu-prod.asyncgw.teams.microsoft.com/v1/objects/0-neu-d7-526bb6b66dea411b42a08607a0302fe5/views/thumbnail" lazy-load="false"
                                                set-error-handler="" on-loading-src-error="onLoadingErrorHandler()" src="https://eu-prod.asyncgw.teams.microsoft.com/v1/objects/0-neu-d7-526bb6b66dea411b42a08607a0302fe5/views/thumbnail">
                                            <!---->
                                            <!---->
                                            <ng-include ng-class="{'show-icon': !ctrl.isThumbnailImgAvailable, 'show-in-hc': !ctrl.thumbnailImgHidden}" class="thumbnail-icon show-in-hc" src="ctrl.getThumbnailIcon()"><svg role="presentation" class="app-svg icons-call-resume" viewBox="-6 -6 32 32"><path class="icons-default-fill" d="M17.2204 8.68703C18.2558 9.25661 18.2558 10.7434 17.2204 11.313L7.2234 16.812C6.22371 17.362 5 16.6393 5 15.4991L5 4.50093C5 3.36068 6.22371 2.63805 7.2234 3.18795L17.2204 8.68703ZM16.7381 10.4377C17.0833 10.2478 17.0833 9.7522 16.7381 9.56234L6.74113 4.06327C6.4079 3.87997 6 4.12084 6 4.50093L6 15.4991C6 15.8792 6.4079 16.12 6.74114 15.9367L16.7381 10.4377Z"></path></svg></ng-include>
                                            <!----><span class="duration show-protection" ng-if="!ctrl.hasRecordingSkippedStreamUpload()" ng-class="{'show-protection': ctrl.enableRecordingThumbnail}">1 мин 16 с</span>
                                            <!---->
                                        </div>
                                        <label for="recording-1671037180029" class="recording-content">
   <span class="title" title="Собрание">
     Собрание
   </span>
   <span class="subtitle">
       <!----><span class="recorder" ng-if="!ctrl.hasRecordingSkippedStreamUpload()" title="Кем записано: Калинин Максим Игоревич"> Кем записано: Калинин Максим Игоревич </span><!---->
       <span class="error-message" title="Запись неожиданно прервалась">Запись неожиданно прервалась</span>
   </span>
   <span id="ts-recording-failure-indicator1671037180029" class="soft-error" ng-focus="ctrl.showFailureTooltip($event)" ng-mouseenter="ctrl.showFailureTooltip($event)" ng-blur="ctrl.hideFailureTooltip()" ng-mouseleave="ctrl.hideFailureTooltip()" aria-label="Запись неожиданно прервалась">
           <!----><ng-include src="'svg/icons-input-invalid.html'"><svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-input-invalid"><path class="icons-default-fill" d="M10,2 C14.418278,2 18,5.581722 18,10 C18,14.418278 14.418278,18 10,18 C5.581722,18 2,14.418278 2,10 C2,5.581722 5.581722,2 10,2 Z M10,3 C6.13400675,3 3,6.13400675 3,10 C3,13.8659932 6.13400675,17 10,17 C13.8659932,17 17,13.8659932 17,10 C17,6.13400675 13.8659932,3 10,3 Z M10,12.5 C10.4142136,12.5 10.75,12.8357864 10.75,13.25 C10.75,13.6642136 10.4142136,14 10,14 C9.58578644,14 9.25,13.6642136 9.25,13.25 C9.25,12.8357864 9.58578644,12.5 10,12.5 Z M10,6 C10.2454599,6 10.4496084,6.17687516 10.4919443,6.41012437 L10.5,6.5 L10.5,11 C10.5,11.2761424 10.2761424,11.5 10,11.5 C9.75454011,11.5 9.55039163,11.3231248 9.50805567,11.0898756 L9.5,11 L9.5,6.5 C9.5,6.22385763 9.72385763,6 10,6 Z"></path></svg></ng-include>
   </span>
   <!---->
   <!---->
 </label>
                                    </div>
                                    <button id="ts-calling-recording-menu-button-1671037180029" class="ts-action-button focus-round-border" ng-click="ctrl.showActionMenu($event)" tabindex="-1" title="Другие параметры">
 <div class="ts-recording-action-button icons-more app-icons-fill-hover" aria-hidden="true">
   <!----><ng-include src="'svg/icons-more.html'"><svg viewBox="-6 -6 32 32" class="app-svg icons-more app-bar-extra-icons-fill-colors" focusable="false" role="presentation"><g class="icons-default-fill"><g class="icons-unfilled"><path d="M6.25 10C6.25 10.6904 5.69036 11.25 5 11.25C4.30964 11.25 3.75 10.6904 3.75 10C3.75 9.30964 4.30964 8.75 5 8.75C5.69036 8.75 6.25 9.30964 6.25 10Z"></path><path d="M11.25 10C11.25 10.6904 10.6904 11.25 10 11.25C9.30964 11.25 8.75 10.6904 8.75 10C8.75 9.30964 9.30964 8.75 10 8.75C10.6904 8.75 11.25 9.30964 11.25 10Z"></path><path d="M15 11.25C15.6904 11.25 16.25 10.6904 16.25 10C16.25 9.30964 15.6904 8.75 15 8.75C14.3096 8.75 13.75 9.30964 13.75 10C13.75 10.6904 14.3096 11.25 15 11.25Z"></path></g><g class="icons-filled"><path d="M6.75 10C6.75 10.9665 5.9665 11.75 5 11.75C4.0335 11.75 3.25 10.9665 3.25 10C3.25 9.0335 4.0335 8.25 5 8.25C5.9665 8.25 6.75 9.0335 6.75 10Z"></path><path d="M11.75 10C11.75 10.9665 10.9665 11.75 10 11.75C9.0335 11.75 8.25 10.9665 8.25 10C8.25 9.0335 9.0335 8.25 10 8.25C10.9665 8.25 11.75 9.0335 11.75 10Z"></path><path d="M15 11.75C15.9665 11.75 16.75 10.9665 16.75 10C16.75 9.0335 15.9665 8.25 15 8.25C14.0335 8.25 13.25 9.0335 13.25 10C13.25 10.9665 14.0335 11.75 15 11.75Z"></path></g></g></svg></ng-include>
 </div>
</button>
                                </div>
                                <notification-banner notification-banner-store="ctrl.notificationBannerStore" tab="true" data-tid="recording-expiration-notification-banner" acc-role-dom="recording-expiration-notification-banner">
                                    <div class="app-notification-banner banner-show tab-notification-banner recording-expiration-banner warning-error-banner link-banner" role="region" ng-class="[{ 'banner-show': banner }, { 'tab-notification-banner': tab }, bannerCss ]">
                                        <!---->
                                        <div class="app-notification-container" ng-if="banner" analytics-panel="" analytics-panel-view="{ panel: {type: 0 }}" ng-attr-track-data="{{telemetryOptions.dataBag}}">
                                            <div class="banner-padding" ng-class="{'banner-padding-with-dismiss' : showDismissButton &amp;&amp; !bannerIcon,
                                        'banner-padding-with-icon': bannerIcon &amp;&amp; promoBanner}">
                                                <!---->
                                                <!---->
                                                <!---->
                                                <!----><span ng-if="bannerMessage" class="app-notification-text" id="banner-text" ng-attr-role="{{::bannerRole}}" ng-attr-aria-live="{{::bannerAriaLive}}" ng-attr-title="{{::bannerTitle}}" data-tid="banner-text"
                                                    compile-html="bannerMessage"><span>Срок действия этой записи истекает. Просмотрите или измените срок действия </span><a href="https://itstepru.sharepoint.com/sites/312/Shared%20Documents/General/Recordings/PYTHON%208-20221214_195743-%D0%97%D0%B0%D0%BF%D0%B8%D1%81%D1%8C%20%D1%81%D0%BE%D0%B1%D1%80%D0%B0%D0%BD%D0%B8%D1%8F.mp4?web=1"
                                                    target="_blank" title="https://itstepru.sharepoint.com/sites/312/shared%20documents/general/recordings/python%208-20221214_195743-%d0%97%d0%b0%d0%bf%d0%b8%d1%81%d1%8c%20%d1%81%d0%be%d0%b1%d1%80%d0%b0%d0%bd%d0%b8%d1%8f.mp4?web=1"
                                                    rel="noreferrer noopener">здесь</a><span>.  </span><a href="https://go.microsoft.com/fwlink/?linkid=2170061&amp;clcid=0x409" target="_blank" title="https://go.microsoft.com/fwlink/?linkid=2170061&amp;clcid=0x409"
                                                    rel="noreferrer noopener">Подробнее</a></span>
                                                <!---->
                                                <!---->
                                            </div>
                                            <!---->
                                            <!---->
                                        </div>
                                        <!---->
                                    </div>
                                </notification-banner>
                            </div>
                            <!---->
                        </calling-recording-message>
                        <!---->
                        <!---->
                    </div>
                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody229">
            <!--Regular message template-->
            <div id="m1671037191579" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">ахахах, ответ от пользователя Бобров Степан Алексеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-183" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178/profilepicturev2?displayname=Бобров Степан Алексеевич&amp;size=HR64x64"
                                alt="Аватар пользователя Бобров Степан Алексеевич." upn="Bobro_us85@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178/profilepicturev2?displayname=Бобров Степан Алексеевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Бобров Степан Алексеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 19:59:51">
         19:59
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>ахахах</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671037191579', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody230">
            <!--Calling message template-->
            <div id="m1671037275103" data-tid="threadBodyMedia" class="media thread-body is-call-message acc-thread-focusable thread-body-call-recording" ng-hide="::(ctrl.isCallRecordingMessage &amp;&amp; !ctrl.isRecordingFlagEnabled) || (ctrl.isCallTranscriptMessage &amp;&amp; !ctrl.messageViewModel.isTranscriptEnabled)"
                ng-class="{ 'thread-body-call-end': (ctrl.isCallEndedMessage || ctrl.isCallRecordingStoppedAndSavingMessage), 'thread-body-call-recording': ctrl.isRecordingFlagEnabled &amp;&amp; (ctrl.messageViewModel.recordings.length > 0 || ctrl.isCallRecordingMessage)}"
                tabindex="-1" simple-focus="ctrl.onFocus($event)" simple-blur="ctrl.onBlur($event)">

                <!--Chat head-->
                <div class="media-left">
                    <div class="wrapper">
                        <!---->
                        <!---->
                        <!---->
                        <div ng-if="!(ctrl.isCallRecordingStoppedAndSavingMessage || ctrl.isCallRecordingStartedMessage)"><svg role="presentation" viewBox="-6 -6 32 32" class="app-svg icons-call-meetup-line"><g class="icons-default-fill"><path class="icons-unfilled" d="M4.5 4C3.11929 4 2 5.11929 2 6.5V13.5C2 14.8807 3.11929 16 4.5 16H11.5C12.8807 16 14 14.8807 14 13.5V12.5L16.4 14.3C17.0592 14.7944 18 14.324 18 13.5V6.49998C18 5.67594 17.0592 5.20556 16.4 5.69998L14 7.49998V6.5C14 5.11929 12.8807 4 11.5 4H4.5ZM14 8.74998L17 6.49998V13.5L14 11.25V8.74998ZM13 6.5V13.5C13 14.3284 12.3284 15 11.5 15H4.5C3.67157 15 3 14.3284 3 13.5V6.5C3 5.67157 3.67157 5 4.5 5H11.5C12.3284 5 13 5.67157 13 6.5Z"></path><path class="icons-filled" d="M13 6.5C13 5.11929 11.8807 4 10.5 4H4.5C3.11929 4 2 5.11929 2 6.5V13.5C2 14.8807 3.11929 16 4.5 16H10.5C11.8807 16 13 14.8807 13 13.5V6.5ZM14 7.93082V12.0815L16.7642 14.4319C17.2512 14.8461 18 14.4999 18 13.8606V6.19315C18 5.55685 17.2575 5.20962 16.7692 5.61756L14 7.93082Z"></path></g></svg></div>
                        <!---->
                    </div>
                </div>

                <div class="ts-message-thread-body" data-tid="messageThreadBody">
                    <div class="message-body message-body-width">
                        <!---->
                        <!---->
                        <calling-recording-message ng-if="::ctrl.isCallRecordingMessage" message-vm="::ctrl.messageViewModel.recordings[0] || ctrl.messageViewModel">
                            <!---->
                            <div ng-class="{ 'recording-expiration': ctrl.hasRecordingExpirationBanner,'recording-expiration-hidden': !ctrl.hasRecordingExpirationBanner}" ng-if="!ctrl.isLoading" class="recording-expiration">
                                <div class="ts-calling-recording-message inset-border inset-border-themed successful action-menu-enabled" ng-class="[ctrl.recordingStateCssClass, {'acc-thread-focusable': ctrl.standaloneMessage, 'action-menu-enabled': ctrl.isActionMenuEnabled}]" id="recording-1671037275103"
                                    ng-attr-aria-label="{{::ctrl.standaloneMessage &amp;&amp; ctrl.recordingMessageLabel || undefined}}" ng-attr-tabindex="{{::ctrl.standaloneMessage &amp;&amp; -1 || undefined}}">
                                    <div class="recording-button inset-border inset-border-themed recording-button-has-expiration-banner" ng-class="{ 'recording-button-has-expiration-banner' : ctrl.hasRecordingExpirationBanner}" ng-click="::ctrl.showVideo()" ng-attr-aria-disabled="{{ctrl.ariaDisabled}}"
                                        role="button" tabindex="-1" aria-disabled="false">
                                        <div class="recording-thumbnail recording-thumbnail-has-expiration-banner" ng-class="{ 'recording-thumbnail-has-expiration-banner' : ctrl.hasRecordingExpirationBanner}" title="Воспроизвести видео" aria-hidden="true">
                                            <!----><img class="thumbnail-image ts-image" ng-if="ctrl.isThumbnailImgAvailable" target-src="https://eu-prod.asyncgw.teams.microsoft.com/v1/objects/0-weu-d11-ee7becf03cd67ff11e9f55a63126203e/views/thumbnail" lazy-load="false"
                                                set-error-handler="" on-loading-src-error="onLoadingErrorHandler()" src="https://eu-prod.asyncgw.teams.microsoft.com/v1/objects/0-weu-d11-ee7becf03cd67ff11e9f55a63126203e/views/thumbnail">
                                            <!---->
                                            <!---->
                                            <ng-include ng-class="{'show-icon': !ctrl.isThumbnailImgAvailable, 'show-in-hc': !ctrl.thumbnailImgHidden}" class="thumbnail-icon show-in-hc" src="ctrl.getThumbnailIcon()"><svg role="presentation" class="app-svg icons-call-resume" viewBox="-6 -6 32 32"><path class="icons-default-fill" d="M17.2204 8.68703C18.2558 9.25661 18.2558 10.7434 17.2204 11.313L7.2234 16.812C6.22371 17.362 5 16.6393 5 15.4991L5 4.50093C5 3.36068 6.22371 2.63805 7.2234 3.18795L17.2204 8.68703ZM16.7381 10.4377C17.0833 10.2478 17.0833 9.7522 16.7381 9.56234L6.74113 4.06327C6.4079 3.87997 6 4.12084 6 4.50093L6 15.4991C6 15.8792 6.4079 16.12 6.74114 15.9367L16.7381 10.4377Z"></path></svg></ng-include>
                                            <!----><span class="duration show-protection" ng-if="!ctrl.hasRecordingSkippedStreamUpload()" ng-class="{'show-protection': ctrl.enableRecordingThumbnail}">2 ч 52 мин</span>
                                            <!---->
                                        </div>
                                        <label for="recording-1671037275103" class="recording-content">
   <span class="title" title="Собрание">
     Собрание
   </span>
   <span class="subtitle">
       <!----><span class="recorder" ng-if="!ctrl.hasRecordingSkippedStreamUpload()" title="Кем записано: Калинин Максим Игоревич"> Кем записано: Калинин Максим Игоревич </span><!---->
       <span class="error-message" title="Запись неожиданно прервалась">Запись неожиданно прервалась</span>
   </span>
   <span id="ts-recording-failure-indicator1671037275103" class="soft-error" ng-focus="ctrl.showFailureTooltip($event)" ng-mouseenter="ctrl.showFailureTooltip($event)" ng-blur="ctrl.hideFailureTooltip()" ng-mouseleave="ctrl.hideFailureTooltip()" aria-label="Запись неожиданно прервалась">
           <!----><ng-include src="'svg/icons-input-invalid.html'"><svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-input-invalid"><path class="icons-default-fill" d="M10,2 C14.418278,2 18,5.581722 18,10 C18,14.418278 14.418278,18 10,18 C5.581722,18 2,14.418278 2,10 C2,5.581722 5.581722,2 10,2 Z M10,3 C6.13400675,3 3,6.13400675 3,10 C3,13.8659932 6.13400675,17 10,17 C13.8659932,17 17,13.8659932 17,10 C17,6.13400675 13.8659932,3 10,3 Z M10,12.5 C10.4142136,12.5 10.75,12.8357864 10.75,13.25 C10.75,13.6642136 10.4142136,14 10,14 C9.58578644,14 9.25,13.6642136 9.25,13.25 C9.25,12.8357864 9.58578644,12.5 10,12.5 Z M10,6 C10.2454599,6 10.4496084,6.17687516 10.4919443,6.41012437 L10.5,6.5 L10.5,11 C10.5,11.2761424 10.2761424,11.5 10,11.5 C9.75454011,11.5 9.55039163,11.3231248 9.50805567,11.0898756 L9.5,11 L9.5,6.5 C9.5,6.22385763 9.72385763,6 10,6 Z"></path></svg></ng-include>
   </span>
   <!---->
   <!---->
 </label>
                                    </div>
                                    <button id="ts-calling-recording-menu-button-1671037275103" class="ts-action-button focus-round-border" ng-click="ctrl.showActionMenu($event)" tabindex="-1" title="Другие параметры">
 <div class="ts-recording-action-button icons-more app-icons-fill-hover" aria-hidden="true">
   <!----><ng-include src="'svg/icons-more.html'"><svg viewBox="-6 -6 32 32" class="app-svg icons-more app-bar-extra-icons-fill-colors" focusable="false" role="presentation"><g class="icons-default-fill"><g class="icons-unfilled"><path d="M6.25 10C6.25 10.6904 5.69036 11.25 5 11.25C4.30964 11.25 3.75 10.6904 3.75 10C3.75 9.30964 4.30964 8.75 5 8.75C5.69036 8.75 6.25 9.30964 6.25 10Z"></path><path d="M11.25 10C11.25 10.6904 10.6904 11.25 10 11.25C9.30964 11.25 8.75 10.6904 8.75 10C8.75 9.30964 9.30964 8.75 10 8.75C10.6904 8.75 11.25 9.30964 11.25 10Z"></path><path d="M15 11.25C15.6904 11.25 16.25 10.6904 16.25 10C16.25 9.30964 15.6904 8.75 15 8.75C14.3096 8.75 13.75 9.30964 13.75 10C13.75 10.6904 14.3096 11.25 15 11.25Z"></path></g><g class="icons-filled"><path d="M6.75 10C6.75 10.9665 5.9665 11.75 5 11.75C4.0335 11.75 3.25 10.9665 3.25 10C3.25 9.0335 4.0335 8.25 5 8.25C5.9665 8.25 6.75 9.0335 6.75 10Z"></path><path d="M11.75 10C11.75 10.9665 10.9665 11.75 10 11.75C9.0335 11.75 8.25 10.9665 8.25 10C8.25 9.0335 9.0335 8.25 10 8.25C10.9665 8.25 11.75 9.0335 11.75 10Z"></path><path d="M15 11.75C15.9665 11.75 16.75 10.9665 16.75 10C16.75 9.0335 15.9665 8.25 15 8.25C14.0335 8.25 13.25 9.0335 13.25 10C13.25 10.9665 14.0335 11.75 15 11.75Z"></path></g></g></svg></ng-include>
 </div>
</button>
                                </div>
                                <notification-banner notification-banner-store="ctrl.notificationBannerStore" tab="true" data-tid="recording-expiration-notification-banner" acc-role-dom="recording-expiration-notification-banner">
                                    <div class="app-notification-banner banner-show tab-notification-banner recording-expiration-banner warning-error-banner link-banner" role="region" ng-class="[{ 'banner-show': banner }, { 'tab-notification-banner': tab }, bannerCss ]">
                                        <!---->
                                        <div class="app-notification-container" ng-if="banner" analytics-panel="" analytics-panel-view="{ panel: {type: 0 }}" ng-attr-track-data="{{telemetryOptions.dataBag}}">
                                            <div class="banner-padding" ng-class="{'banner-padding-with-dismiss' : showDismissButton &amp;&amp; !bannerIcon,
                                        'banner-padding-with-icon': bannerIcon &amp;&amp; promoBanner}">
                                                <!---->
                                                <!---->
                                                <!---->
                                                <!----><span ng-if="bannerMessage" class="app-notification-text" id="banner-text" ng-attr-role="{{::bannerRole}}" ng-attr-aria-live="{{::bannerAriaLive}}" ng-attr-title="{{::bannerTitle}}" data-tid="banner-text"
                                                    compile-html="bannerMessage"><span>Срок действия этой записи истекает. Просмотрите или измените срок действия </span><a href="https://itstepru.sharepoint.com/sites/312/Shared%20Documents/General/Recordings/PYTHON%208-20221214_170533-%D0%97%D0%B0%D0%BF%D0%B8%D1%81%D1%8C%20%D1%81%D0%BE%D0%B1%D1%80%D0%B0%D0%BD%D0%B8%D1%8F.mp4?web=1"
                                                    target="_blank" title="https://itstepru.sharepoint.com/sites/312/shared%20documents/general/recordings/python%208-20221214_170533-%d0%97%d0%b0%d0%bf%d0%b8%d1%81%d1%8c%20%d1%81%d0%be%d0%b1%d1%80%d0%b0%d0%bd%d0%b8%d1%8f.mp4?web=1"
                                                    rel="noreferrer noopener">здесь</a><span>.  </span><a href="https://go.microsoft.com/fwlink/?linkid=2170061&amp;clcid=0x409" target="_blank" title="https://go.microsoft.com/fwlink/?linkid=2170061&amp;clcid=0x409"
                                                    rel="noreferrer noopener">Подробнее</a></span>
                                                <!---->
                                                <!---->
                                            </div>
                                            <!---->
                                            <!---->
                                        </div>
                                        <!---->
                                    </div>
                                </notification-banner>
                            </div>
                            <!---->
                        </calling-recording-message>
                        <!---->
                        <!---->
                    </div>
                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody231">
            <!--Regular message template-->
            <div id="m1671037338401" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">адаптировал, ответ от пользователя Бобров Степан Алексеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-184" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178/profilepicturev2?displayname=Бобров Степан Алексеевич&amp;size=HR64x64"
                                alt="Аватар пользователя Бобров Степан Алексеевич." upn="Bobro_us85@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178/profilepicturev2?displayname=Бобров Степан Алексеевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Бобров Степан Алексеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 20:02:18">
         20:02
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>адаптировал</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671037338401', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody232">
            <!--Regular message template-->
            <div id="m1671037380623" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">до свидания, ответ от пользователя Муравьев Дмитрий Дмитриевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:10638eaa-5a95-4b5a-b6b7-a8f353fd614e" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-185" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:10638eaa-5a95-4b5a-b6b7-a8f353fd614e/profilepicturev2?displayname=Муравьев Дмитрий Дмитриевич&amp;size=HR64x64"
                                alt="Аватар пользователя Муравьев Дмитрий Дмитриевич." upn="Murav_yk73@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:10638eaa-5a95-4b5a-b6b7-a8f353fd614e/profilepicturev2?displayname=Муравьев Дмитрий Дмитриевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Нет на месте" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym away" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:10638eaa-5a95-4b5a-b6b7-a8f353fd614e"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Муравьев Дмитрий Дмитриевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 20:03:00">
         20:03
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>до свидания</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671037380623', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody233">
            <!--Regular message template-->
            <div id="m1671037383209" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">До свидания в третий раз, ответ от пользователя Гнездилов Алексей Дмитриевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:cbf301cb-934e-4a99-b0dc-224095c65013" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-186" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:cbf301cb-934e-4a99-b0dc-224095c65013/profilepicturev2?displayname=Гнездилов Алексей Дмитриевич&amp;size=HR64x64"
                                alt="Аватар пользователя Гнездилов Алексей Дмитриевич." upn="Gnezd_mg41@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:cbf301cb-934e-4a99-b0dc-224095c65013/profilepicturev2?displayname=Гнездилов Алексей Дмитриевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:cbf301cb-934e-4a99-b0dc-224095c65013"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Гнездилов Алексей Дмитриевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 20:03:03">
         20:03
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>До свидания в третий раз</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671037383209', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody234">
            <!--Regular message template-->
            <div id="m1671037383814" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">до свидания, ответ от пользователя Портас Константин Сергеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:21bf49d8-b9fb-4c73-8a04-97cf59e07012" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-187" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:21bf49d8-b9fb-4c73-8a04-97cf59e07012/profilepicturev2?displayname=Портас Константин Сергеевич&amp;size=HR64x64"
                                alt="Аватар пользователя Портас Константин Сергеевич." upn="Porta_yx78@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:21bf49d8-b9fb-4c73-8a04-97cf59e07012/profilepicturev2?displayname=Портас Константин Сергеевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:21bf49d8-b9fb-4c73-8a04-97cf59e07012"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Портас Константин Сергеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 20:03:03">
         20:03
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>до свидания</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671037383814', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="false" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="true" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody235">
            <!--Regular message template-->
            <div id="m1671037387977" data-tid="threadBodyMedia" class="media thread-body acc-thread-focusable has-hover-actions keep-size-after-like" ng-class="{ 'highlight-message': ctrl.messageViewModel.isHighlighted,
            'pinned-message': ctrl.messageViewModel.pinState &amp;&amp; ctrl.messageViewModel.pinState.isPinned &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'important-message': ctrl.messageViewModel.isHighImportance &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'urgent-message': ctrl.messageViewModel.isUrgentImportance(ctrl.isMeetingConversation) &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'edited-message show-top-row':  ctrl.messageViewModel.editTime &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'dlp-message': ctrl.messageViewModel.isDlpBlockedMessage || ctrl.messageViewModel.isDlpFlaggedMessage || ctrl.messageViewModel.dlpPolicyViolation &amp;&amp; ctrl.messageViewModel.dlpPolicyViolation.userAction,
            'dlp-blocked-message': ctrl.messageViewModel.isDlpBlockedMessage || (ctrl.messageViewModel.isDlpFlaggedMessage &amp;&amp; ctrl.isSelf),
            'at-mentions-included': ctrl.messageViewModel.containsSelfMention &amp;&amp; !ctrl.messageViewModel.editFormVisible,
            'merge-bubble' : ctrl.messageViewModel.mergeMessageBubble,
            'has-likes': ctrl.messageViewModel.likedByUsers.length,
            'keep-size-after-like': ctrl.messageReactionsEnabled,
            'bookmarked' : ctrl.messageViewModel.userHasStarred,
            'self': ctrl.isSelf,
            'soft-error': ctrl.messageViewModel.failedAtSfBGateway,
            'bubble-merge-sending show-top-row': ctrl.showBubbleMergeSending,
            'conversation-error show-top-row message-error' : ctrl.messageViewModel.isInError,
            'message-action-error show-top-row message-error' : ctrl.messageViewModel.hasMessageActionFailed,
            'bubble-merge-translating show-top-row': ctrl.messageViewModel.isTranslationToggled || ctrl.messageViewModel._translationState !== 0,
            'has-reactions': ctrl.messageReactionsEnabled &amp;&amp;  ctrl.messageViewModel.messageHasReaction,
            'contains-tag-mention': ctrl.messageViewModel.containsTagMention &amp;&amp; !ctrl.messageViewModel.editFormVisible }" tabindex="-1" data-prevent-refocus="true" ng-attr-calling-screen-focus="{{::ctrl.callingScreenFocus}}" simple-focus="ctrl.onFocus($event)"
                simple-blur="ctrl.onBlur($event)">
                <!---->
                <!---->
                <div data-tid="screen-reader-label" class="screen-reader-text" ng-if="::ctrl.messageViewModel.isReply" role="heading" aria-level="5">покапока, ответ от пользователя Бобров Степан Алексеевич.</div>
                <!---->
                <!--Chat head-->
                <div class="media-left" ng-class="{ 'hide-media-left' : ctrl.messageViewModel.editFormVisible }">
                    <!-- Person icon -->

                    <!---->
                    <div class="wrapper" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
      !ctrl.messageViewModel.mergeMessageBubble &amp;&amp; ctrl.deferedRenderReady :
      !ctrl.messageViewModel.mergeMessageBubble">
                        <profile-picture person-card="" pc-mri="::ctrl.messageViewModel.from.mri" pc-host-tenant-id="ctrl.hostTenantId" pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="::ctrl.messageViewModel.from.displayName"
                            pc-is-sfb="ctrl.isInteropChat" data-tid="personCardTrigger-8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178" css-class="media-object" principal-name="ctrl.messageViewModel.from.userPrincipalName" display-name="ctrl.messageViewModel.from.displayName"
                            source="thread-body-regular" is-external-user="::ctrl.isChatWithExternalUser" mri="::ctrl.messageViewModel.from.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null"
                            is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-188" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки" data-is-focusable="true">
                            <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="media-object" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178/profilepicturev2?displayname=Бобров Степан Алексеевич&amp;size=HR64x64"
                                alt="Аватар пользователя Бобров Степан Алексеевич." upn="Bobro_us85@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178/profilepicturev2?displayname=Бобров Степан Алексеевич&amp;size=HR64x64" style="object-fit: cover;">
                            <!---->

                            <!---->

                            <!---->
                        </profile-picture>

                        <!---->
                        <skype-status class="thread-body-status" ng-if="ctrl.isProfilePictureDeferralCstEnabled &amp;&amp; ctrl.isMessagingInCdlWorkerEnabled ?
                 !ctrl.messageViewModel.from.isAnonymousUser :
                 !ctrl.messageViewModel.from.isAnonymousUser &amp;&amp; ctrl.deferedRenderReady" deferred-load="" mri="::ctrl.messageViewModel.from.mri" source="">
                            <!----><span ng-if="$ctrl.showStatus()" class="ts-skype-status visible" title="Не в сети" ng-class="::$ctrl.visibleClass">
<span aria-hidden="true">
<span class="status-icon ts-sym offline" role="img" ng-class="$ctrl.statusClass" data-tid="presence-8:orgid:7b8b0b0b-28a6-4980-8615-2a15f2d2a178"></span>
                            <span class="status-mask"></span>
                            <!---->
                            </span>
                            </span>
                            <!---->
                        </skype-status>
                        <!---->

                    </div>
                    <!---->

                </div>

                <div class="ts-message-thread-body align-item-left" data-tid="messageThreadBody" ng-class="{'has-attachments': ctrl.messageViewModel.hasAttachments} ">
                    <!--EditMessage-->
                    <!---->
                    <!--EditMessage-->
                    <!---->
                    <div id="messageBody" class="message-body message-body-width" ng-if="!ctrl.messageViewModel.editFormVisible" simple-mouseenter="ctrl.messageReactionsEnabled &amp;&amp; ctrl.showMessageActions($event, this)" ng-mouseleave="!ctrl.isInteropChat &amp;&amp; ctrl.messageReactionsEnabled &amp;&amp; ctrl.hoverOutMessageBodyHandler($event)">
                        <!---->
                        <div class="message-body-top-row padded-content unread-message" ng-if="!ctrl.isHiddenByDlp" ng-class="{ 'unread-message': ctrl.messageViewModel.isNewMessage,
                  'has-reactions': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.messageHasReaction}">
                            <div class="top-row-text-container" ng-class="{'single-line-truncation': ctrl.messageReactionsEnabled &amp;&amp; ctrl.messageViewModel.isRightRail}">
                                <!--Name-->
                                <div class="ts-msg-name app-small-font" data-tid="threadBodyDisplayName" dir="auto">
                                    Бобров Степан Алексеевич
                                </div>
                                <div class="timestamp-column" data-tid="sending-state-1">
                                    <!--Sending text-->
                                    <span class="ts-created ts-sending-text ng-hide" ng-show="ctrl.showSendingText" data-tid="messageSendingText" translate-once="messages_sending">Отправка...</span>

                                    <!--Timestamps-->
                                    <span class="ts-created message-datetime" ng-show="ctrl.showTimestamp" data-tid="messageTimeStamp" title="14 дек., 20:03:07">
         20:03
       </span>
                                </div>

                                <!--Cross Post indicator-->
                                <!---->

                                <!--Edit indicator-->
                                <span class="edit-indicator" ng-show="!ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="edited">Изменено</span>

                                <!--Action.Execute Message Extension Card Update Indicator-->
                                <span class="update-indicator ng-hide" ng-show="ctrl.messageViewModel.messageExtensionAdaptiveCardV2Update" title="" data-tid="editIndicator" translate-once="updated">Обновлено</span>

                                <!-- translation info -->
                                <!----><span class="message-translation-message-container" ng-if="ctrl.isTranslationEnabled &amp;&amp; ctrl.deferedRenderReady" ng-switch="" on="ctrl.messageViewModel._translationState">

<!-- MessageTranslationState.Done -->
<!----><!----><!---->

<!-- MessageTranslationState.InProcess -->
<!---->

<!-- Default to error case -->
<!---->
</span>
                                <!---->


                                <!--Error indicator-->
                                <div class="error-indicator">
                                    <svg viewBox="-6 -6 32 32" role="presentation" class="app-svg icons-error-small"><path class="icons-red-fill" fill-rule="evenodd" clip-rule="evenodd" d="M8.68404 2.85216C9.25393 1.816 10.7428 1.81599 11.3127 2.85216L17.8714 14.7771C18.4212 15.7768 17.698 17 16.5571 17H3.43964C2.29873 17 1.57549 15.7768 2.12531 14.7771L8.68404 2.85216ZM9.99835 6.75C10.4126 6.75 10.7484 7.08579 10.7484 7.5V11.5C10.7484 11.9142 10.4126 12.25 9.99835 12.25C9.58414 12.25 9.24835 11.9142 9.24835 11.5V7.5C9.24835 7.08579 9.58414 6.75 9.99835 6.75ZM10.7484 13.75C10.7484 14.1642 10.4126 14.5 9.99835 14.5C9.58414 14.5 9.24835 14.1642 9.24835 13.75C9.24835 13.3358 9.58414 13 9.99835 13C10.4126 13 10.7484 13.3358 10.7484 13.75Z"></path></svg>
                                    <span class="error-text" ng-bind-html="ctrl.getMessageError()"></span>
                                </div>
                            </div>

                            <!--Show message reactions in top row -->
                            <!---->

                            <!----><button class="hidden-button-virtual-pc-cursor" ng-if="ctrl.messageReactionsEnabled &amp;&amp; !ctrl.isHiddenByDlp &amp;&amp; !ctrl.isInteropChat" role="button" aria-label="Панель инструментов с двумя кнопками. Нажмите клавишу ВВОД, чтобы войти в панель"
                                ng-click="ctrl.openTooltipInScanMode($event, this)" data-prevent-refocus="true"></button>
                            <!---->
                        </div>
                        <!---->

                        <!--announcement header banner-->
                        <!---->

                        <!--Important message text-->
                        <!---->

                        <!--Urgent message text-->
                        <!---->


                        <!---->


                        <!---->

                        <!---->
                        <div ng-if="!ctrl.isHiddenByDlp">

                            <see-more message-view-model="ctrl.messageViewModel" is-enabled="::ctrl.seeMoreEnabled" host-tenant-id="ctrl.hostTenantId" host-conversation-id="ctrl.isSharedChannel ? ctrl.thread.conversationId : null" is-shared-channel="ctrl.isSharedChannel" data-tid="seeMore">
                                <div data-tid="messageBodyContainer" class="message-body-container padded-content" decorate-click-for-acc-selfonly="" track-click-silent="true" ng-click="handleClick($event)" ng-class="::ctrl.cssClassForInputExtensions">
                                    <div data-tid="messageBodyContent" class="message-body-content clearfix html" ng-class="{'html': ctrl.messageViewModel.isRichTextHtml,
               'text-to-html': ctrl.messageViewModel.isPlainTextConvertedToHtml}" compile="ctrl.messageViewModel.body" compile-scope-properties="ctrl.scopeProperties" dir="auto">
                                        <div>
                                            <p>покапока</p>
                                        </div>
                                    </div>
                                </div>
                                <button class="ts-sym ts-see-more-button hide ts-see-more-fold" ng-class="{'ts-see-more-fold': !ctrl.messageViewModel.isSeeMoreExpanded}" ng-click="toggleSeeMore()" data-tid="seeMoreButton" tabindex="-1" track-default="toggleSeeMore" track-panel-type="4"
                                    track-data="{messageID: '1671037387977', leftRailDirective: 'school-app-left-rail'}" track-summary="See more/ See less">
<span translate-once="messages_seeMoreText">Посмотреть еще</span>
<span translate-once="messages_seeLessText">Показать меньше</span>
</button></see-more>
                            <!-- Each filecheclet.html contains 2x ng-ifs.  This change collapses them into one.  -->
                            <!---->
                            <!---->

                        </div>
                        <!---->

                        <!---->

                    </div>
                    <!---->

                    <!---->
                    <action-marker ng-if="ctrl.deferedRenderReady &amp;&amp; !ctrl.isHiddenByDlp" message-vm="ctrl.messageViewModel">
                        <!---->
                    </action-marker>
                    <!---->

                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->
    <div class="conversation-common conversation-reply conversation-not-collapsed" ng-class="{ 'merge-bubble-last-mention' : messageViewModel.mergeMessageBubble &amp;&amp; $last &amp;&amp; messageViewModel.containsSelfMention,
   'no-reply-style': !msgCtrl.thread.shouldShowReplyButton &amp;&amp; $last}" ng-repeat="messageViewModel in msgCtrl.thread.expandedReplies.items" scroll-item-tracker="" scroll-item-id="messageViewModel.objectId" scroll-item-event-name="messageListScroll"
        is-above-view-callback="msgCtrl.messageIsAboveViewport(isAboveView)" is-in-view-callback="msgCtrl.messageIsInView(isInView, id)" scroll-container="::msgCtrl.scrollContainer" check-above-viewport="true" delay-scroll-tracker-init="false">
        <!---->
        <thread-body ng-if="!messageViewModel.isDeleted" message-view-model="messageViewModel" message-type="reply" show-border="false" see-more-enabled="true" show-subject="false" thread="msgCtrl.thread" render-state="msgCtrl.renderState" scenario-id="b45c4aee-c035-4050-9aac-6c9fdd508e90"
            defered-pre-render-ready="msgCtrl.thread.deferredPreRenderReady" defered-render-ready="msgCtrl.thread.deferredRenderReady" data-tid="messageThreadBody236">
            <!--Calling message template-->
            <div id="m1671037411260" data-tid="threadBodyMedia" class="media thread-body is-call-message acc-thread-focusable thread-body-call-end" ng-hide="::(ctrl.isCallRecordingMessage &amp;&amp; !ctrl.isRecordingFlagEnabled) || (ctrl.isCallTranscriptMessage &amp;&amp; !ctrl.messageViewModel.isTranscriptEnabled)"
                ng-class="{ 'thread-body-call-end': (ctrl.isCallEndedMessage || ctrl.isCallRecordingStoppedAndSavingMessage), 'thread-body-call-recording': ctrl.isRecordingFlagEnabled &amp;&amp; (ctrl.messageViewModel.recordings.length > 0 || ctrl.isCallRecordingMessage)}"
                tabindex="-1" simple-focus="ctrl.onFocus($event)" simple-blur="ctrl.onBlur($event)">

                <!--Chat head-->
                <div class="media-left">
                    <div class="wrapper">
                        <!---->
                        <!---->
                        <!---->
                        <div ng-if="!(ctrl.isCallRecordingStoppedAndSavingMessage || ctrl.isCallRecordingStartedMessage)"><svg role="presentation" viewBox="-6 -6 32 32" class="app-svg icons-call-meetup-line"><g class="icons-default-fill"><path class="icons-unfilled" d="M4.5 4C3.11929 4 2 5.11929 2 6.5V13.5C2 14.8807 3.11929 16 4.5 16H11.5C12.8807 16 14 14.8807 14 13.5V12.5L16.4 14.3C17.0592 14.7944 18 14.324 18 13.5V6.49998C18 5.67594 17.0592 5.20556 16.4 5.69998L14 7.49998V6.5C14 5.11929 12.8807 4 11.5 4H4.5ZM14 8.74998L17 6.49998V13.5L14 11.25V8.74998ZM13 6.5V13.5C13 14.3284 12.3284 15 11.5 15H4.5C3.67157 15 3 14.3284 3 13.5V6.5C3 5.67157 3.67157 5 4.5 5H11.5C12.3284 5 13 5.67157 13 6.5Z"></path><path class="icons-filled" d="M13 6.5C13 5.11929 11.8807 4 10.5 4H4.5C3.11929 4 2 5.11929 2 6.5V13.5C2 14.8807 3.11929 16 4.5 16H10.5C11.8807 16 13 14.8807 13 13.5V6.5ZM14 7.93082V12.0815L16.7642 14.4319C17.2512 14.8461 18 14.4999 18 13.8606V6.19315C18 5.55685 17.2575 5.20962 16.7692 5.61756L14 7.93082Z"></path></g></svg></div>
                        <!---->
                    </div>
                </div>

                <div class="ts-message-thread-body" data-tid="messageThreadBody">
                    <div class="message-body message-body-width">
                        <!---->
                        <calling-thread-body ng-if="!ctrl.isCallRecordingMessage &amp;&amp; !ctrl.isCallTranscriptMessage" message-vm="::ctrl.messageViewModel" defered-pre-render-ready="ctrl.deferedPreRenderReady" conversation-id="19:x48VY3ngTSvbeDyfkVZlEz4fHRXcZCQcCJFeukTUbNA1@thread.tacv2"
                            render-state="ctrl.renderState" host-tenant-id="ctrl.hostTenantId" is-shared-channel="ctrl.isSharedChannel">
                            <div class="ts-calling-thread-body">
                                <div class="content">
                                    <div class="top padded-content">
                                        <div class="left larger call-ended" ng-class="{
   'call-ended': ctrl.messageVm.isCallEndedMessage
   }" ng-bind-html="ctrl.callTitleHtml" ng-attr-data-tid="{{ctrl.messageVm.isCallEndedMessage &amp;&amp; 'call-ended-' + ctrl.messageVm.callId || 'in-progress-' + ctrl.messageVm.callId}}" data-tid="call-ended-0af7ada6-8b5d-410b-80c8-4bc4ed8ea908">Конец собрания: 3 ч 6 мин</div>
                                        <!---->
                                        <!---->
                                        <calling-live-roster ng-if="ctrl.callParticipantsMris.length > 0" call-participants-mris="ctrl.callParticipantsMris" max-visible-participants="ctrl.maxVisibleParticipants" use-small-icons="true" conversation-id="ctrl.conversationId"
                                            host-tenant-id="ctrl.hostTenantId" is-shared-channel="ctrl.isSharedChannel" call-id="ctrl.messageVm.callId" caller-info="calling-thread-body">
                                            <div class="ts-calling-live-roster use-small-icons" role="list" ng-class="::{ 'use-small-icons': ctrl.useSmallIcons}" aria-label="Участники собрания" acc-role-dom="list" kb-list="">
                                                <!---->
                                                <div role="listitem" aria-label="Сандульский Семён" tabindex="0" class="inset-border inset-border-round wrapper item kb-active" data-tid="calling-live-roster-participant-8:orgid:3e008d96-8266-4c84-9869-a4efc34dee35"
                                                    ng-repeat="callParticipant in ctrl.visibleCallParticipants" acc-role-dom="list-item clickable" kb-item="">
                                                    <profile-picture person-card="" pc-disable-hover="ctrl.isPersonCardDisabled(callParticipant)" pc-ignore-click="ctrl.isPersonCardDisabled(callParticipant)" pc-mri="callParticipant.mri" pc-host-tenant-id="ctrl.hostTenantId"
                                                        pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="callParticipant.displayName" css-class="ts-user-picture ts-contact-image"
                                                        principal-name="callParticipant.userPrincipalName" display-name="callParticipant.displayName" source="calling-live-roster" mri="callParticipant.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.conversationId : null"
                                                        is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-189" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки"
                                                        data-is-focusable="true">
                                                        <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="ts-user-picture ts-contact-image" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:3e008d96-8266-4c84-9869-a4efc34dee35/profilepicturev2?displayname=Сандульский Семён&amp;size=HR64x64"
                                                            alt="Аватар пользователя Сандульский Семён." upn="Sandu_gs22@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                                            src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:3e008d96-8266-4c84-9869-a4efc34dee35/profilepicturev2?displayname=Сандульский Семён&amp;size=HR64x64" style="object-fit: cover;">
                                                        <!---->

                                                        <!---->

                                                        <!---->
                                                    </profile-picture>
                                                </div>
                                                <!---->
                                                <div role="listitem" aria-label="Скукина Елизавета Александровна" class="inset-border inset-border-round wrapper item" data-tid="calling-live-roster-participant-8:orgid:e221314d-88fe-488c-a2b1-0fd00a09668a"
                                                    ng-repeat="callParticipant in ctrl.visibleCallParticipants" acc-role-dom="list-item clickable" kb-item="">
                                                    <profile-picture person-card="" pc-disable-hover="ctrl.isPersonCardDisabled(callParticipant)" pc-ignore-click="ctrl.isPersonCardDisabled(callParticipant)" pc-mri="callParticipant.mri" pc-host-tenant-id="ctrl.hostTenantId"
                                                        pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="callParticipant.displayName" css-class="ts-user-picture ts-contact-image"
                                                        principal-name="callParticipant.userPrincipalName" display-name="callParticipant.displayName" source="calling-live-roster" mri="callParticipant.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.conversationId : null"
                                                        is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-190" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки"
                                                        data-is-focusable="true">
                                                        <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="ts-user-picture ts-contact-image" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:e221314d-88fe-488c-a2b1-0fd00a09668a/profilepicturev2?displayname=Скукина Елизавета Александровна&amp;size=HR64x64"
                                                            alt="Аватар пользователя Скукина Елизавета Александровна." upn="Skuki_xp91@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                                            src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:e221314d-88fe-488c-a2b1-0fd00a09668a/profilepicturev2?displayname=Скукина Елизавета Александровна&amp;size=HR64x64" style="object-fit: cover;">
                                                        <!---->

                                                        <!---->

                                                        <!---->
                                                    </profile-picture>
                                                </div>
                                                <!---->
                                                <div role="listitem" aria-label="Потапов Максим Владиславович" class="inset-border inset-border-round wrapper item" data-tid="calling-live-roster-participant-8:orgid:a13c31ad-8f13-4d53-8b3f-24855a709370"
                                                    ng-repeat="callParticipant in ctrl.visibleCallParticipants" acc-role-dom="list-item clickable" kb-item="">
                                                    <profile-picture person-card="" pc-disable-hover="ctrl.isPersonCardDisabled(callParticipant)" pc-ignore-click="ctrl.isPersonCardDisabled(callParticipant)" pc-mri="callParticipant.mri" pc-host-tenant-id="ctrl.hostTenantId"
                                                        pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="callParticipant.displayName" css-class="ts-user-picture ts-contact-image"
                                                        principal-name="callParticipant.userPrincipalName" display-name="callParticipant.displayName" source="calling-live-roster" mri="callParticipant.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.conversationId : null"
                                                        is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-191" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки"
                                                        data-is-focusable="true">
                                                        <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="ts-user-picture ts-contact-image" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:a13c31ad-8f13-4d53-8b3f-24855a709370/profilepicturev2?displayname=Потапов Максим Владиславович&amp;size=HR64x64"
                                                            alt="Аватар пользователя Потапов Максим Владиславович." upn="Potap_qu77@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                                            src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:a13c31ad-8f13-4d53-8b3f-24855a709370/profilepicturev2?displayname=Потапов Максим Владиславович&amp;size=HR64x64" style="object-fit: cover;">
                                                        <!---->

                                                        <!---->

                                                        <!---->
                                                    </profile-picture>
                                                </div>
                                                <!---->
                                                <div role="listitem" aria-label="Кириллова Ульяна Станиславовна" class="inset-border inset-border-round wrapper item" data-tid="calling-live-roster-participant-8:orgid:2a34fd62-d738-454f-937d-b07f443f3147"
                                                    ng-repeat="callParticipant in ctrl.visibleCallParticipants" acc-role-dom="list-item clickable" kb-item="">
                                                    <profile-picture person-card="" pc-disable-hover="ctrl.isPersonCardDisabled(callParticipant)" pc-ignore-click="ctrl.isPersonCardDisabled(callParticipant)" pc-mri="callParticipant.mri" pc-host-tenant-id="ctrl.hostTenantId"
                                                        pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="callParticipant.displayName" css-class="ts-user-picture ts-contact-image"
                                                        principal-name="callParticipant.userPrincipalName" display-name="callParticipant.displayName" source="calling-live-roster" mri="callParticipant.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.conversationId : null"
                                                        is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-192" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки"
                                                        data-is-focusable="true">
                                                        <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="ts-user-picture ts-contact-image" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:2a34fd62-d738-454f-937d-b07f443f3147/profilepicturev2?displayname=Кириллова Ульяна Станиславовна&amp;size=HR64x64"
                                                            alt="Аватар пользователя Кириллова Ульяна Станиславовна." upn="Kiril_jc33@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                                            src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:2a34fd62-d738-454f-937d-b07f443f3147/profilepicturev2?displayname=Кириллова Ульяна Станиславовна&amp;size=HR64x64" style="object-fit: cover;">
                                                        <!---->

                                                        <!---->

                                                        <!---->
                                                    </profile-picture>
                                                </div>
                                                <!---->
                                                <div role="listitem" aria-label="Ашрапов Карим Ленарович" class="inset-border inset-border-round wrapper item" data-tid="calling-live-roster-participant-8:orgid:003f8ab6-3f51-4fdb-af47-f57af4643a1c" ng-repeat="callParticipant in ctrl.visibleCallParticipants"
                                                    acc-role-dom="list-item clickable" kb-item="">
                                                    <profile-picture person-card="" pc-disable-hover="ctrl.isPersonCardDisabled(callParticipant)" pc-ignore-click="ctrl.isPersonCardDisabled(callParticipant)" pc-mri="callParticipant.mri" pc-host-tenant-id="ctrl.hostTenantId"
                                                        pc-host-conversation-id="ctrl.isSharedChannel ? ctrl.conversationId : null" pc-is-shared-channel="ctrl.isSharedChannel" pc-display-name="callParticipant.displayName" css-class="ts-user-picture ts-contact-image"
                                                        principal-name="callParticipant.userPrincipalName" display-name="callParticipant.displayName" source="calling-live-roster" mri="callParticipant.mri" host-tenant-id="ctrl.hostTenantId" conversation-id="ctrl.isSharedChannel ? ctrl.conversationId : null"
                                                        is-shared-channel="ctrl.isSharedChannel" class="lpcCommonWeb-hoverTarget" data-lpc-hover-target-id="lpc-dom-target-193" tabindex="0" role="button" aria-haspopup="dialog" aria-label="Открытие карточки"
                                                        data-is-focusable="true">
                                                        <!----><img ng-if="$ctrl.displayImg() &amp;&amp; !$ctrl.isDisplayLocallyGeneratedInitialsImage" class="ts-user-picture ts-contact-image" ng-class="$ctrl.additionalCssClass" ng-src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:003f8ab6-3f51-4fdb-af47-f57af4643a1c/profilepicturev2?displayname=Ашрапов Карим Ленарович&amp;size=HR64x64"
                                                            alt="Аватар пользователя Ашрапов Карим Ленарович." upn="Ashra_ss79@top-academy.ru" profile-picture-img-event="$ctrl.onImgEventHandler($event)" ng-dblclick="$ctrl.popOutChat()" ng-style="{'object-fit':'cover', 'visibility': $ctrl.visibility}"
                                                            src="https://teams.microsoft.com/api/mt/part/emea-02/beta/users/8:orgid:003f8ab6-3f51-4fdb-af47-f57af4643a1c/profilepicturev2?displayname=Ашрапов Карим Ленарович&amp;size=HR64x64" style="object-fit: cover;">
                                                        <!---->

                                                        <!---->

                                                        <!---->
                                                    </profile-picture>
                                                </div>
                                                <!---->
                                                <!---->
                                                <div class="item hidden-participants" ng-if="ctrl.numberOfHiddenParticipants" title="Гость (гость), Гость (гость), Гнездилов Алексей Дмитриевич, Сысина Карина Алексеевна, Бобров Степан Алексеевич, Саничев Артур Вячеславович, Калинин Максим Игоревич, Портас Константин Сергеевич, Шестелева Евгения Евгеньевна, Турсунов Эмиль-бег Усманович, Петроченков Алексей Андреевич, Тюргашкин Максим Михайлович, Бровкин Михаил Сергеевич, Сафронов Артём Игоревич, Муравьев Дмитрий Дмитриевич, Семенова Екатерина Александровна, Цыбрий Илья Сергеевич, Рубцов Михаил Олегович"
                                                    aria-label="Гость (гость), Гость (гость), Гнездилов Алексей Дмитриевич, Сысина Карина Алексеевна, Бобров Степан Алексеевич, Саничев Артур Вячеславович, Калинин Максим Игоревич, Портас Константин Сергеевич, Шестелева Евгения Евгеньевна, Турсунов Эмиль-бег Усманович, Петроченков Алексей Андреевич, Тюргашкин Максим Михайлович, Бровкин Михаил Сергеевич, Сафронов Артём Игоревич, Муравьев Дмитрий Дмитриевич, Семенова Екатерина Александровна, Цыбрий Илья Сергеевич, Рубцов Михаил Олегович">+18</div>
                                                <!---->
                                            </div>
                                        </calling-live-roster>
                                        <!---->
                                    </div>
                                    <!---->
                                    <div class="bottom padded-content recording" ng-if="(ctrl.messageVm.recordings.length > 0) ||
           (ctrl.messageVm.isTranscriptEnabled &amp;&amp; ctrl.messageVm.transcript &amp;&amp; ctrl.messageVm.meetingArtifacts) ||
           (ctrl.showAttendanceReportEntryPoint &amp;&amp; ctrl.isAttendanceReportAvailable)">
                                        <!---->
                                        <!---->
                                        <!---->
                                        <calling-attendance-report-message ng-if="::ctrl.showAttendanceReportEntryPoint &amp;&amp; ctrl.isAttendanceReportAvailable" message-vm="ctrl.messageVm.meetingArtifacts" call-id="ctrl.attendanceReportCallId" call-ended-timestamp="ctrl.messageVm.originalArrivalTimeUtc"
                                            is-channel-meeting="true">
                                            <div class="ts-calling-attendance-report-message inset-border inset-border-themed" id="attendance-report-">
                                                <div class="download-attendance-report-button" ng-click="ctrl.downloadAttendanceReport($event)" ng-disabled="ctrl.currentDownloadStatus === ctrl.attendanceDownloadStatus.Downloading" track-panel-type="116" track-scenario="1460" track-name="1316" track-type="50"
                                                    track-summary="Download attendance report from call ended message">
                                                    <div class="attendance-report-icon-container">
                                                        <!---->
                                                        <ng-include class="attendance-report-icon" src="'svg/icons-download.html'"><svg viewBox="-6 -6 32 32" class="app-svg icons-download" focusable="false" role="presentation"><g class="icons-default-fill"><path class="icons-filled" d="M15.2444 16.4976C15.6586 16.4976 15.9944 16.8334 15.9944 17.2476C15.9944 17.6273 15.7123 17.9411 15.3462 17.9907L15.2444 17.9976H4.74976C4.33554 17.9976 3.99976 17.6618 3.99976 17.2476C3.99976 16.8679 4.28191 16.5541 4.64799 16.5044L4.74976 16.4976H15.2444ZM10.0034 1.99939C10.3831 1.99939 10.6969 2.28154 10.7465 2.64762L10.7534 2.74939L10.7528 12.9424L13.719 9.97181C13.985 9.7053 14.4016 9.68071 14.6955 9.89829L14.7796 9.97083C15.0461 10.2369 15.0707 10.6535 14.8532 10.9473L14.7806 11.0315L10.5378 15.2821L10.4671 15.3446L10.3762 15.4032L10.3397 15.4244L10.2486 15.4623L10.1281 15.4924L10.0588 15.5003L9.99876 15.5023C9.94864 15.5023 9.89776 15.4968 9.84804 15.4862L9.76716 15.4631C9.67115 15.4321 9.58404 15.3818 9.50989 15.3171L5.22032 11.0324C4.92721 10.7397 4.92688 10.2648 5.21956 9.9717C5.48564 9.70524 5.90228 9.68074 6.19605 9.89838L6.28022 9.97094L9.25276 12.9384L9.25338 2.74939C9.25338 2.33518 9.58917 1.99939 10.0034 1.99939Z"></path><path class="icons-unfilled" d="M15.5 16.9989C15.7761 16.9989 16 17.2227 16 17.4989C16 17.7443 15.8231 17.9485 15.5899 17.9908L15.5 17.9989H4.5C4.22386 17.9989 4 17.775 4 17.4989C4 17.2534 4.17688 17.0493 4.41012 17.0069L4.5 16.9989H15.5ZM10.0001 2.0011C10.2456 2.0011 10.4497 2.1781 10.492 2.41137L10.5 2.50124L10.496 14.2951L14.1414 10.6468C14.3148 10.473 14.5842 10.4535 14.7792 10.5883L14.8485 10.6461C15.0222 10.8195 15.0418 11.0889 14.907 11.2839L14.8492 11.3532L10.3574 15.8532C10.285 15.9259 10.1957 15.9715 10.1021 15.9902L9.99608 16C9.83511 16 9.69192 15.9239 9.60051 15.8057L5.14386 11.3538C4.94846 11.1587 4.94823 10.8421 5.14336 10.6467C5.3168 10.473 5.58621 10.4535 5.78117 10.5884L5.85046 10.6462L9.496 14.2871L9.5 2.50095C9.50008 2.22481 9.724 2.0011 10.0001 2.0011Z"></path></g></svg></ng-include>
                                                    </div>

                                                    <div for="attendance-report-" class="attendance-report-content">
                                                        <span class="title">Отчет об участии</span>
                                                        <!---->
                                                        <div class="attendance-report-status-text subtitle" ng-if="ctrl.currentDownloadStatus === ctrl.attendanceDownloadStatus.Default">
                                                            Щелкните здесь, чтобы загрузить отчет об участии
                                                        </div>
                                                        <!---->
                                                        <!---->
                                                        <!---->
                                                        <!---->
                                                        <!---->
                                                    </div>
                                                </div>
                                            </div>
                                        </calling-attendance-report-message>
                                        <!---->
                                    </div>
                                    <!---->
                                </div>
                                <!---->
                            </div>
                        </calling-thread-body>
                        <!---->
                        <!---->
                        <!---->
                    </div>
                </div>
            </div>
        </thread-body>
        <!---->

        <!---->
    </div>
    <!---->


    <!---->
    <div class="thread-action-reply-message" ng-if="msgCtrl.thread.shouldShowReplyButton &amp;&amp; !msgCtrl.thread.hasMessageFailures">
        <reply-message message-type="msgCtrl.constants.messages.types.replyConversation" thread="msgCtrl.thread" last-sent-client-id="msgCtrl.lastSentClientId">
            <div data-tid="replyMessage" ng-class="{ 'ts-reply-form-showing': replyMsgCtrl.thread.replyFormVisible }" class="ts-reply-message">
                <div class="ts-reply-message-footer">
                    <div role="presentation" class="ts-reply-message-pseudofocus" aria-hidden="true"><textarea role="form" id="pseudofocus-5285558792936335377" tabindex="-1" rows="0" cols="0">        </textarea></div>
                    <!---->
                    <div class="ts-message-action-toolbar" ng-if="!replyMsgCtrl.thread.replyFormVisible"><button type="button" class="ts-sym icons-reply acc-thread-focusable" ng-click="replyMsgCtrl.showNewMessageForm(true)" track-summary="Reply" track-outcome="4" track-outcome-new="1" track-scenario="318" track-scenario-type="34" track-name="323"
                            track-type="32" track-name-new="323" track-type-new="23" track-work-load="" track-sub-work-load="" title="" data-tid="replyMessageButtonShort" tabindex="-1" ng-disabled="!replyMsgCtrl.canUserReply"><svg class="app-svg icons-unfilled icons-default-fill"><use xlink:href="#icons-reply" href="#icons-reply"></use></svg><svg class="app-svg icons-filled icons-default-fill"><use xlink:href="#icons-reply-filled" href="#icons-reply-filled"></use></svg><span data-tid="replyMessageButtonText">Ответить</span></button></div>
                    <!---->
                    <!---->
                </div>
            </div>
        </reply-message>
    </div>
    <!---->


    <!---->

    <!---->
</div>